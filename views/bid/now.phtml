<?php
if ($this->get('item')) {
    $item = $this->get('item');
    $bids = $this->get('bids');
    $profile = $this->get('profile');
} else {
    echo "No item found.";
    return;
}
?>
<div class="product-info" data-handbid-bid data-handbid-item-key="<?php echo $item->key; ?>">
    <ul class="description dividedList">
        <?php if($item->donor) {
            ?>
            <li>
                <span><?php echo __('Donated by') . ':'; ?></span><span data-handbid-item-attribute="donor"><?php echo $item->donor; ?></span>
            </li>
        <?php
        }
        ?>
        <?php if($item->closingTime) {
            ?>
            <li>
                <span><?php echo __('Closing Time') . ':'; ?></span><span><?php echo date('g:i A m/d/Y', $item->closingTime); ?></span>
            </li>
        <?php
        }
        ?>
        <?php if($item->highestBid) {
            ?>
            <li>
                <span><?php echo __('Winning Bid') . ':'; ?></span>
                <span>$<span data-handbid-item-attribute="highestBid"><?php echo $item->highestBid; ?></span>
                    by
                    <span class="highest-bidder-pin" data-handbid-item-attribute="leadingBidderAlias">
                        <?php echo ($profile->pin == $item->_restMetaData->leadingBidderAlias) ? ' You' : $item->_restMetaData->leadingBidderAlias; ?>
                    </span>
                </span>
            </li>

        <?php
        }
        ?>
        <li>
            <span><?php echo __('Bid increment') . ':'; ?></span><span class="bidIncrement">$<span data-handbid-item-attribute="bidIncrement"><?php echo $item->bidIncrement; ?></span></span>
        </li>
        <li>
            <div class="bid-adder bidUpDown">
                <a href="#" class="add-up up add-action button" data-handbid-bid-button="up">+</a>
                <a href="#" class="add-down down add-action button" data-handbid-bid-button="down">-</a>
            </div>
            <p class="bid-value bidAmountTotal" data-handbid-bid-amount><?php echo $item->minimumBidAmount; ?></p>
            <div class="bidBar">
                <button type="submit" class="bidNow button" data-handbid-bid-button="bid"><?php echo __('Bid'); ?></button>
                <button type="submit" class="proxyBid button" data-handbid-bid-button="proxy"><?php echo __('Max Bid'); ?></button>
            </div>
        </li>
        <li>
            <span><?php echo __('Bid history'); ?></span>
            <span></span>
            <table class="bid-history">
                <thead>
                <tr>
                    <th><?php echo __('Amount'); ?></th>
                    <th><?php echo __('Bidder Pin'); ?></th>
                </tr>
                </thead>
                <?php forEach($bids as $bid) {
                    ?>
                    <tr>
                        <td>$<?php echo $bid->amount; ?></td>
                        <td><?php echo ($profile->pin == $bid->_restMetaData->bidderPin) ? 'You' : $bid->_restMetaData->bidderPin; ?></td>
                    </tr>
                    <?php
                }
                ?>
            </table>
        </li>
    </ul>

</div>