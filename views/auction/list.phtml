<?php
if ($this->get('categories') || $this->get('items') || $this->get('donors')) {
    $categories = $this->get('categories');
    $items      = $this->get('items');
    $donors     = $this->get('donors');


    $priceRanges = [
        '_all' => 'All',
        '_0'   => '0 - 100',
        '_1'   => '101 - 250',
        '_2'   => '251 - 500',
        '_5'   => '501+'
    ];

} else {
    echo "No Categories / Items Found";
    return;
}

?>

<div class="auctionItemListWidget">

    <!-- Item List -->
    <div class="itemList">
        <ul id="container" class="items js-isotope">
            <?php forEach ($items as $item) {

                $currentPrice = $item->currentPrice;

                // By default no filtering is done
                $priceClass = '_all';

                if ($currentPrice >= 0 && $currentPrice <= 100) {
                    $priceClass = '_0';
                } else {
                    if ($currentPrice >= 101 && $currentPrice < 250) {
                        $priceClass = '_1';
                    } else {
                        if ($currentPrice >= 251 && $currentPrice < 500) {
                            $priceClass = '_2';
                        } else {
                            if ($currentPrice >= 501) {
                                $priceClass = '_5';
                            }
                        }
                    }
                }

                $terms = $item->terms;

                if (is_array($terms)) {
                    $terms = implode($terms);
                }

                ?>

                <li class="item item-tile <?php echo sanitize_html_class($terms) . $priceClass; ?> all _all">

                    <div class="itemBox">
                        <a title="<?php echo $item->name; ?>" href="/auction-item/?item=<?php echo $item->key; ?>">
                            <div class="inner">
                                <div class="image" style="background-image:url('<?php echo $item->images[0]; ?>')">
                                    <div class="itemCode"># <?php echo $item->itemCode; ?></div>
                                </div>
                                <div class="details">
                                    <h3><?php echo $item->name; ?></h3>
                                    <div><span style="width:80%"><strong><?php echo __('Current'); ?></strong> <?php echo '$' . $currentPrice; ?></span></div>
                                    <div><span style="width:80%"><strong><?php echo __('Increment'); ?></strong> <?php echo '$' . $item->bidIncrement; ?></span></div>
                                </div>
                            </div>
                        </a>
                    </div>
                </li>
            <?php } ?>
        </ul>
    </div>
</div>

