var $j=jQuery.noConflict();$j(function(){var e=$j(".banner");e.unslider({speed:500,delay:6e3,keys:!0,fluid:!1}),$j(".unslider-arrow").click(function(){var t=this.className.split(" ")[1];e.data("unslider")[t]()})}),function(e){e(document).ready(function(){function t(){var t=e(this).closest("[data-slider-progress]").attr("data-slider-nav-id"),a=e('.slider-nav[data-slider-nav-id="'+t+'"]');e(".active-slide",a).closest("[data-slider-nav-item]").next().length>0?e(".active-slide",a).closest("[data-slider-nav-item]").next().click():e(".active-slide",a).length>0&&e(e("[data-slider-nav-item]",a)[0]).click(),e(this).css("width",0),i()}function a(a){if(a.length>0){var i=a.closest(".slider-nav").attr("data-slider-nav-id"),o=e('[data-slider-nav-id="'+i+'"][data-slider-progress] .slider-progress-bar');o.stop(),o.css("width",0),o.animate({width:"100%"},n,"swing",t.bind(o))}}function i(){var a=e(".slider-content[data-slider-progress]");a.each(function(a,i){var o=null;1==e(".slider-progress-bar",i).length?o=e(".slider-progress-bar",i):(o=e('<div class="slider-progress-bar"></div>'),o.appendTo(i)),e(i).on("mouseenter",function(){o.stop()}),e(i).on("mouseleave",function(){o.animate({width:"100%"},n,"swing",t.bind(o))}),o.animate({width:"100%"},n,"swing",t.bind(o))})}var n=5e3,o=e(".slider-nav.auto-open"),d=e(window).height(),r=1e3,s=function(){var t=d+e(window).scrollTop();o.each(function(i,n){if(!n.beenShown){var o=e(n).position().top;o<t&&(setTimeout(function(){e(e("[data-slider-nav-key]",n)[0]).click(),a(n)},r),n.beenShown=!0)}})};e(".slider-nav [data-slider-nav-direction]").on("click",function(t){t.preventDefault();var i=e(this).attr("data-slider-nav-direction"),n=e(this).closest(".slider-nav"),o=n.attr("data-slider-nav-id"),d=e('.slider-nav[data-slider-nav-id="'+o+'"] .active-slide'),r=d;"next"==i&&d.next().length>0?r=d.next():"next"==i?r=e("[data-slider-nav-key]:first-of-type",d.parent()):"prev"==i&&d.prev().length>0?r=d.prev():"prev"==i&&(r=e("[data-slider-nav-key]:last-of-type",d.parent())),a(n),r.click()}),e(".slider-nav [data-slider-nav-key]").live("click",function(){var t=e(this).attr("data-slider-nav-key"),i=e(this).closest(".slider-nav"),n=e(i).attr("data-slider-nav-id"),o=e('.slider-content[data-slider-nav-id="'+n+'"] [data-slider-nav-key="'+t+'"]'),d=e('.slider-nav[data-slider-nav-id="'+n+'"] [data-slider-nav-key="'+t+'"]'),r=(e(".slider-content[data-slider-nav="+n+"] [data-slider-nav-key="+t+"]"),i.attr("data-toggle-mode")),s=r&&d.hasClass("active-slide"),c=e('.slider-content[data-slider-nav-id="'+n+'"] [data-slider-nav-key] [data-slider-nav-key]');if(e('.slider-content[data-slider-nav-id="'+n+'"] [data-slider-nav-key], .slider-nav[data-slider-nav-id="'+n+'"] [data-slider-nav-key]').not(c).removeClass("active-slide"),!s){var l=e(e(o).find(".slider-nav [data-slider-nav-key]")[0]),u=e(o).find(".slider-nav .active-slide").length>0;l&&!u&&e(l).click(),"bidder-dashboard"==n&&e("#bidder-info-load").hasClass("sticking")&&e("html, body").animate({scrollTop:0},"fast"),e(o).addClass("active-slide"),e(d).addClass("active-slide"),a(d)}}),e(".slider-content [data-slider-close]").live("click",function(){var t=e(this).attr("data-slider-close"),a=e('.slider-content[data-slider-nav-id="'+t+'"] [data-slider-nav-key] [data-slider-nav-key]');e('.slider-content[data-slider-nav-id="'+t+'"] [data-slider-nav-key], .slider-nav[data-slider-nav-id="'+t+'"] [data-slider-nav-key]').not(a).removeClass("active-slide")}),s(),e(window).scroll(s),i()})}(jQuery);var handbidMain,connectMessage,modal_overlay,reload_overlay,confirm_bid_overlay,timerNotice,timerMessage,circleTimer,auctionInvoices,currentPaddleNumber,currentElemNeedsCard,timerTimeout=1e3,timerElements,timerElementsFull,timerTime,currentCCForm,cookieExpire=7,ticketsPopupWasOpened=!1,addingCCState=!1,profile_location_map,invoices_loaded=!1,refreshTimerInterval=15e3,autocomplete,address_to_pay_receipt,currencySpan;!function(e){attentionAboutTickets=!1,attentionAboutBidding=!1,attentionAboutConfirm=!1,attentionAboutTBuying=!1,attentionAboutBuyConf=!1,attentionAboutUnpaidI=!1,attentionAboutSendInv=!1,attentionAboutAddrPay=!1,attentionAboutContPay=!1,attentionAboutAreHere=!1,String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),i=e-3600*t-60*a;return t<10&&(t="0"+t),a<10&&(a="0"+a),i<10&&(i="0"+i),{simple:t+":"+a+":"+i,full:'<div class="col-xs-4 number-cont"><em class="timer-hours-number">'+t+'</em><span>hours</span></div><div class="col-xs-4 number-cont"><em class="timer-mins-number">'+a+'</em><span>mins</span></div><div class="col-xs-4 number-cont secs-number-cont"><em class="timer-secs-number">'+i+"</em><span>secs</span></div>"}};currencySpan=function(){var t=e("[data-auction-currency-code]").eq(0).data("auction-currency-code"),a=e("[data-auction-currency-symbol]").eq(0).data("auction-currency-symbol");return'<span class="handbidAuctionCurrency" title="'+t+'">'+a+"</span>"};var t=e("#apiEndpointsAddress").val(),a={no_response:"Sorry, try again later",current_winner:"You are current winner of this item"},i=0,n=9,o={addpos2:0,animation:!0,dir1:"down",dir2:"right",firstpos1:0,firstpos2:0,nextpos1:0,nextpos2:0,push:"top",spacing1:0,spacing2:0},d={loggedIn:null,number_format:function(e,t,a,i){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,d="undefined"==typeof i?",":i,r="undefined"==typeof a?".":a,s="",c=function(e,t){var a=Math.pow(10,t);return""+(Math.round(e*a)/a).toFixed(t)};return s=(o?c(n,o):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),(s[1]||"").length<o&&(s[1]=s[1]||"",s[1]+=new Array(o-s[1].length+1).join("0")),s.join(r)},in_array:function(e,t){for(var a=0,i=e.length;a<i;a++)if(e[a]==t)return!0;return!1},setCookie:function(t,a,i,n){e.cookie(t,a,{expires:i?i:cookieExpire,path:n?n:"/"})},getCookie:function(t){return e.cookie(t)},getCookieNameForItem:function(e){return"go-to-"+e+"-from"},recalculateDashboardPrice:function(){var t=0,a=0;e.map(e("[data-dashboard-price]"),function(i){a=parseFloat(e(i).data("dashboard-price")),t+=a}),t=d.number_format(t,0,".",","),e("[data-handbid-stats-grand-total]").html(t)},goToSingleItemPage:function(t,a){var i=e("[data-legacy-category-id].selected").data("legacy-category-id");i=i?i:"all",this.setCookie(this.getCookieNameForItem(a),i),window.location.href=t},fadeInModalOverlayAndPositionModal:function(t){t.get().css({top:e(window).height()/2-t.get().height()/2-80,left:e(window).width()/2-t.get().width()/2}),modal_overlay?modal_overlay.fadeIn("fast"):modal_overlay=e("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",background:"rgba(0, 0, 0, 0.7)",top:"0",bottom:"0",right:"0",left:"0","z-index":"9999"}}).appendTo("body").fadeIn("fast")},fadeOutModalOverlay:function(){attentionAboutBidding||attentionAboutTickets||attentionAboutConfirm||attentionAboutTBuying||attentionAboutUnpaidI||attentionAboutAddrPay||attentionAboutContPay||attentionAboutSendInv||attentionAboutAreHere||attentionAboutBuyConf||modal_overlay.fadeOut("fast")},recheckBidCounts:function(){var t=e("[data-maxbid-item-id]").length;e("[data-handbid-stats-num-proxies]").html(t);var a=e("[data-winning-item-id]").length;e("[data-handbid-stats-num-winning]").html(a);var i=e("[data-losing-item-id]").length;e("[data-handbid-stats-num-losing]").html(i);var n=e("[data-purchased-item-id]").length;e("[data-handbid-stats-num-purchases]").html(n)},recheckAndRecalculateBids:function(){this.recheckBidCounts(),this.recalculateDashboardPrice(),this.recheckYourCardItems()},addDashboardBidProxy:function(t,a,i,n,o,d){var r='<li class="row bid-row-id-'+t+'"  data-proxy-item-id="'+a+'"  data-maxbid-item-id="'+a+'"  data-proxy-item-max-value="'+d+'"  data-maxbid-bid-id="'+t+'"> <div class="col-md-8 col-xs-8"> <a href="/auctions/'+o+"/item/"+n+'"><h4>'+i+'</h4></a> </div> <div class="col-md-2 col-xs-2"> <span class="bid-amount winning">'+currencySpan()+"<span>"+d+'</span></span> </div> <div class="col-md-2 col-xs-2"> <a class="button pink-solid-button loading-span-button" href="#" data-handbid-delete-proxy="'+t+'" data-item-id="'+a+'"><em>Delete</em></a> </div> </li>',s=e(".handbid-list-of-bids-proxy").eq(0);this.removeItemFromDashboardList(a,"proxy"),e("p",s).remove(),s.prepend(r),this.recheckAndRecalculateBids()},addDashboardBidWinning:function(t,a,i,n){var o='<li class="row" data-dashboard-price="'+n+'" data-winning-item-id="'+t+'"> <div class="col-md-10 col-xs-10">     <a href="'+i+'"><h4>'+a+'</h4></a> </div> <div class="col-md-2 col-xs-2"> <span class="bid-amount winning">'+currencySpan()+"<span>"+n+"</span></span> </div> </li>",d=e(".handbid-list-of-bids-winning").eq(0);e("p",d).remove(),d.prepend(o),this.displayOnlyCurrentStatusOfItem(t,"winning"),this.recheckAndRecalculateBids()},addDashboardBidLosing:function(t,a,i,n){var o='<li class="row"data-losing-item-id="'+t+'"><div class="col-md-8 col-xs-8"><a href="'+i+'"><h4>'+a+'</h4></a></div><div class="col-md-4 col-xs-4"><span class="bid-amount losing">'+currencySpan()+"<span>"+n+"</span></span></div></li>",d=e(".handbid-list-of-bids-losing").eq(0);d.prepend(o),e("p",d).remove(),this.displayOnlyCurrentStatusOfItem(t,"losing"),this.recheckAndRecalculateBids()},addDashboardBidPurchased:function(t){var a=t.item,i=a.id,n=a.key,o=a.name,d=t.pricePerItem,r=t.quantity,s=(t.receiptId,t.grandTotal),c=(t.requireAddresstoPay,t.auctionId,t.grandTotal,t.id),l=void 0!=t.tax?t.tax:0,u=void 0!=t.auctionKey?t.auctionKey:"undefined",h='<li class="row"data-dashboard-price="'+d*r+'"data-dashboard-quantity="'+r+'"data-purchased-item-id="'+i+'" '+(1==a.isTicket?'data-purchased-item-is-ticket="yes" ':"")+'data-purchased-purchase-id="'+c+'"><div class="col-md-4 col-xs-4"><a href="/auctions/'+u+"/item/"+n+'"><h4>'+o+'</h4></a></div><div class="col-md-4 col-xs-4"><h4 class="quantity-total">'+r+" x "+currencySpan()+d+'</h4></div><div class="col-md-4 col-xs-4"><span class="bid-amount winning">'+currencySpan()+'<span class="purchaseTotalAmount"data-dashboard-tax="'+l+'">'+s+"</span></span></div></li>",m=e(".handbid-list-of-bids-purchases").eq(0);e("p",m).remove(),m.append(h),this.recheckAndRecalculateBids()},addItemBidsHistory:function(t,a,i,n){var o=(void 0!=i.winnerName?i.winnerName:i.bidderName,'<li class="row open" data-list-bid-id="'+a+'"><div class="col-md-6"><h4>Bidder Pin</h4><span>'+i.bidderName+'</span></div><div class="col-md-6"><span class="bid-amount winning">'+currencySpan()+"<span>"+n+"</span></span></div></li>"),d=e(".bid-history-item-"+t).eq(0);e("p",d).remove(),e("li",d).removeClass("open").addClass("closed"),d.prepend(o),this.recheckAndRecalculateBids()},addProfileActiveAuctions:function(){var t=e("#bidder-info-load"),a=e(".handbid-list-of-active-auctions").eq(0),i=e(".handbid-hidden-of-active-auctions").eq(0),n=parseInt(t.data("auction")),o=t.data("auction-status"),d=t.data("auction-name"),r=t.data("auction-key"),s=t.data("auction-image"),c=t.data("auction-organization-key"),l=t.data("auction-organization-name"),u=e("[data-handbid-active-profile-auction='"+n+"']",a).length,h=e("[data-hidden-active-auction='"+n+"']",i).length,m='<li class="row '+o+'" data-handbid-active-profile-auction="'+n+'"> <div class="col-md-2"><img class="full-width-image"src="'+s+'"/></div><div class="col-md-7"><h4>'+d+'</h4><a href="/organizations/'+c+'"class="org-link">'+l+'</a></div><div class="col-md-3"><a class="cta-link" href="/auctions/'+r+'">See Auction</a></div></li>';e("p",a).remove(),u||a.prepend(m),h||i.prepend('<input type="hidden" data-hidden-active-auction="'+n+'">')},addItemToTickets:function(t){var a=t,i=a.id,n=a.buyNowPrice,o=a.inventoryRemaining,d=a.name,r=a.description?a.description:"",s=1,c=0==o||"sold"==a.status,l=c?"":"display:none",u=c?"display:none":"",h=parseInt(o)>0&&o<s?"ghosted-out":"",m='<div class="row ticket-row" data-handbid-ticket-row="'+i+'"><div class="col-xs-12 ticket" data-handbid-ticket-id="'+i+'"data-handbid-ticket-price="'+n+'"data-handbid-ticket-step="'+s+'"><div class="col-xs-6 ticket-part-container no-padding-left"><h4 class="ticket-title"><span data-handbid-ticket-title>'+d+'</span></h4><p class="ticket-description">'+r+'</p></div><div class="col-md-3 ticket-part-container"><strong class="ticket-price">'+currencySpan()+"<span>"+n+'</span></strong></div><div class="col-md-3 ticket-part-container no-padding-right tickets-are-sold"style="'+l+'"><h4>SOLD OUT</h4></div><div class="col-md-3 ticket-part-container no-padding-right tickets-are-available"style="'+u+'"><div class="col-md-4 col-xs-4 no-padding"><a href="" class="bid-price-toggle bid-down green-button button ghosted-out"data-handbid-ticket-button="down">-</a></div><div class="buy-quantity col-md-4 col-xs-4 no-padding"><span data-handbid-ticket-quantity>0</span><input type="hidden" data-handbid-tickets-remaining value="'+o+'"></div><div class="col-md-4 col-xs-4 ticket-quantity-up no-padding"><a href=""class="bid-price-toggle bid-up green-button button '+h+'"data-handbid-ticket-button="up">+</a></div></div></div></div>',p=e(".tickets-container").eq(0);p.prepend(m)},updateItemTicket:function(t){var a=t,i=a.id,n=a.status,o=a.buyNowPrice,d=a.inventoryRemaining,r=a.name,s=a.description?a.description:"",c=parseInt(a.ticketQuantity),l=1,u=e("[data-handbid-ticket-row='"+i+"']").eq(0),h=e("[data-handbid-ticket-block]",u).eq(0),m=e("[data-handbid-tickets-remaining]",u).eq(0),p=e(".tickets-are-sold",u).eq(0),v=e(".tickets-are-available",u).eq(0),f=d!=-1?d+" available":"Unlimited quantity";e("[data-handbid-ticket-title]",u).html(r),e("[data-handbid-ticket-description]",u).html(s),e("[data-handbid-ticket-quant]",u).html(c),e("[data-handbid-ticket-quant-remaining]",u).html(f),e("[data-handbid-ticket-buynow]",u).html(o),h.data("handbid-ticket-price",o),h.data("handbid-ticket-step",l),m.val(d),0==d||"sold"==n?(p.slideDown("fast"),v.slideUp("fast"),e("[data-handbid-ticket-quantity]",u).html("0")):(p.slideUp("fast"),v.slideDown("fast"),d!=-1&&d<parseInt(e("[data-handbid-ticket-quantity]",u).html())&&e("[data-handbid-ticket-quantity]",u).html(d)),e("[data-is-hidden-item] [data-handbid-ticket-quantity]").html("0")},clickOnFiltersToReorder:function(){var t=e("[data-initial-auction-category]").eq(0).val(),a=e('[data-legacy-category-id="'+t+'"] a');a=a[0];var i=e("ul.by-category li.selected a")[0];void 0!=i&&i.click()},checkItemIsAvailableForPresale:function(){var t=e("[data-item-check-available-item-id]").val(),a=e("[data-item-check-status-auction-id]").val(),i=e("[data-item-check-status-item-id]").val();return("preview"==a||"presale"==a)&&"1"!=t&&"sold"!=i},checkItemsAuctionIsClosed:function(){var t=e("[data-item-check-status-auction-id]").val();return"closed"==t||"reconcile"==t||"reconciled"==t},checkItemIsAlreadySold:function(){var t=e("[data-item-check-status-item-id]").val();return"sold"==t},checkItemIsLiveOnly:function(){var t=e("[data-item-check-is-live-item-id]").val();return"yes"==t},checkItemIsBidPadOnly:function(){var t=e("[data-item-check-is-bidpad-item-id]").val();return"yes"==t},checkItemIsAlreadySoldOrNotAvailable:function(t,a){var i=e("[data-item-bidding-id]"),n=e("[data-item-nobidding-id]"),o=e("[data-item-is-sold-id]"),d=e("[data-item-is-live-id]"),r=e("[data-item-is-bidpad-id]"),s=e(".not-for-live-auctions"),c=this.checkItemIsAvailableForPresale(),l=this.checkItemsAuctionIsClosed(),u=this.checkItemIsAlreadySold(),h=this.checkItemIsLiveOnly(),m=this.checkItemIsBidPadOnly();if(c||u||h||m||l?i.hide():i.show(),c||l?n.show():n.hide(),u?o.show():o.hide(),m?r.show():r.hide(),h?d.show():d.hide(),h?s.hide():s.show(),u&&void 0!=t){var p=e("#bidder-info-load"),v=parseInt(p.data("profile-id"));v==t&&this.displayOnlyCurrentStatusOfItem(a,"winning")}},processAuctionChange:function(t){var a=e(".handbid-list-of-active-auctions").eq(0),i=(e(".handbid-hidden-of-active-auctions").eq(0),t.id),n=t.status;if("open"!=n){if(e("[data-handbid-active-profile-auction="+i+"]").remove(),0==e("li",a).length){var o=a.data("no-items-text");a.prepend("<p>"+o+"</p>")}if("closed"==n||"reconcile"==n||"reconciled"==n){var r=e("[data-hidden-active-auction="+i+"]");r.length?r.remove():"";var s=r.length;d.notifyUserAboutAuctionClosing(t,s)}}var c=e("[data-handbid-item-auction='"+i+"']:not(.simple-box.status-available)");"preview"==n||"presale"==n?c.addClass("not-available-in-presale"):c.removeClass("not-available-in-presale"),e(".filters .by-item-type li.selected a").eq(0).click();var l="1"==t.enableCreditCardSupport,u=e("[data-receipt-of-auction='"+i+"']");l?u.removeClass("invoiceNoCCAllowed"):u.addClass("invoiceNoCCAllowed"),e("[data-item-check-status-auction-id='"+i+"']").val(n);var h=t.spendingThreshold;h=null!=h&&void 0!=h?h:0,e("[data-auction-spending-threshold]").val(h),this.checkItemIsAlreadySoldOrNotAvailable()},processTicketChange:function(t){var a=t.id,i="1"==t.isTicket,n=t.inventoryRemaining,o=e("[data-handbid-ticket-row='"+a+"']"),d=o.eq(0),r=0!=o.length,s=r&&!i,c=!r&&i,l=r&&i,u=e("[data-handbid-item-box='"+a+"']"),h=e('[data-handbid-item-details-block="'+a+'"]');s&&(d.slideUp("normal"),d.remove(),this.recalculateTotalTicketsPrice(),u.removeAttr("data-is-ticket"),h.removeAttr("data-ticket-inventory")),c&&(this.addItemToTickets(t),this.recalculateTotalTicketsPrice(),u.attr("data-is-ticket","1")),l&&(this.updateItemTicket(t),this.recalculateTotalTicketsPrice()),(s||c)&&this.clickOnFiltersToReorder(),(l||c)&&h.attr("data-ticket-inventory",n)},processItemChange:function(t){var a=t,i=t.id,n=t.status,o=t.showValue,r=t.availableForPreSale,s=t.categoryId,c=1==a.hideSales,l=e("[data-handbid-item-box='"+i+"']").eq(0),u=e("#bidItemId").val();if(u==i&&(l=e("[data-handbid-item-details-block='"+i+"']").eq(0)),e.each(t,function(t,a){a=void 0!=a&&null!=a?a:0,"inventoryRemaining"==t&&a==-1&&(a="∞"),"categoryName"==t&&l.attr("data-tags","|"+a.toLowerCase()+"|"),"quantitySold"==t&&e("[data-handbid-sold-of-id="+i+"]").html(a),"bidCount"==t&&e("[data-handbid-bids-of-id="+i+"]").html(a),e("[data-change-attribute="+t+"]",l).html(a),e("[data-handbid-item-attribute="+t+"]",l).html(a)}),void 0!=t.inventoryRemaining&&t.inventoryRemaining!=-1&&"∞"!=t.inventoryRemaining){var h=t.inventoryRemaining;h=void 0!=h&&null!=h?h:0,e("[data-handbid-remaining-of-id="+i+"]").html(h)}var m=!1,p=e("[data-handbid-params-box='"+i+"']"),v=e("[data-is-hidden-item] [data-handbid-ticket-quantity]"),f="1"==t.isHidden,b="1"==t.isDirectPurchaseItem,g="1"==t.disableMobileBidding,y="1"==t.isBidpadOnly,k=!b&&0===t.bidCount;e.map(p,function(t){var a=e(t),i=parseInt(a.attr("data-handbid-item-cat-id")),o=void 0!=a.eq(0).attr("data-is-hidden-item"),r=(void 0!=a.eq(0).attr("data-hide-if-sold"),a.data("handbid-item-box-status"),!f&&o),l=f&&!o,u=void 0!=i&&void 0!=s&&i!=s,h=e(".countAuctionItemsForCat"+i).eq(0),p=e(".countAuctionItemsForCat"+s).eq(0),v=e(".countAuctionItemsForCatAll").eq(0);u?(a.attr("data-handbid-item-cat-id",s),r?d.utilChangeCountValue(p,1):"",l?d.utilChangeCountValue(h,-1):"",r||l||f||(d.utilChangeCountValue(p,1),d.utilChangeCountValue(h,-1))):(r?d.utilChangeCountValue(p,1):"",l?d.utilChangeCountValue(p,-1):""),r?d.utilChangeCountValue(v,1):"",l?d.utilChangeCountValue(v,-1):"",m=l||r,f?a.attr("data-is-hidden-item","1"):a.removeAttr("data-is-hidden-item"),b?a.attr("data-for-sale","1"):a.removeAttr("data-for-sale"),g?a.attr("data-live","1"):a.removeAttr("data-live"),y?a.attr("data-bidpad","1"):a.removeAttr("data-bidpad"),k?a.attr("data-no-bids","1"):a.removeAttr("data-no-bids"),c?a.attr("data-hide-if-sold","1"):a.removeAttr("data-hide-if-sold"),a.attr("data-handbid-item-box-status",n)}),v.html("0");var C=e("[data-handbid-item-details-block='"+i+"']").eq(0);c?C.attr("data-hide-if-sold","1"):C.removeAttr("data-hide-if-sold");var I=e(".itemValueBox"+i),w="1"!=o&&1!=o;w?I.addClass("itemValueBoxHidden"):I.removeClass("itemValueBoxHidden"),this.processTicketChange(t),e("[data-item-check-status-item-id='"+i+"']").val(n),e("[data-item-check-is-live-item-id='"+i+"']").val(g?"yes":"no"),e("[data-item-check-is-live-bidpad-id='"+i+"']").val(y?"yes":"no"),e("[data-item-check-available-item-id='"+i+"']").val(r),this.checkItemIsAlreadySoldOrNotAvailable(a.winnerId,a.id),a.buyNowPrice=null==a.buyNowPrice||void 0==a.buyNowPrice?0:a.buyNowPrice;var T=!a.isDirectPurchaseItem,x=T&&a.buyNowPrice>0&&a.buyNowPrice>a.currentPrice,A=e(".BINButton.BINItem"+i).eq(0),P=e(".BINButton.BINItem"+i+" a.buy-now").eq(0);x?A.addClass("BINAvailable"):A.removeClass("BINAvailable"),P.attr("data-handbid-buynow-price",a.buyNowPrice),m&&this.clickOnFiltersToReorder();var M=e('[data-handbid-item-box="'+a.id+'"].simple-item-box');M.removeClass("status-open").removeClass("status-closed").removeClass("status-sold").removeClass("status-preview").removeClass("status-presale").addClass("status-"+n)},wantToPurchaseTicketsImmediately:function(t,a,i,n,o,d){var r=e("#bidder-info-load"),s=r.data("paddle-nonce");if(attentionAboutTBuying)return!1;attentionAboutTBuying=!0;var c=new PNotify({title:"Pay for Tickets?",text:"If you choose 'Pay Later', the Auction Staff will charge your card.",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Pay Now",addClass:"bid-here-button",click:function(t){var a=handbidMain.auctionRequiresAddressToPay(!1,i,d);if(a)attentionAboutTBuying=!1,t.remove();else{t.update({title:"Purchasing",text:'<div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:"glyphicon glyphicon-refresh gly-spin",addclass:"handbid-paddle-number-notice",hide:!1,confirm:{confirm:!1},buttons:{closer:!1,sticker:!1},history:{history:!1}});var o={action:"handbid_ajax_pay_for_tickets",auctionId:n,receiptId:i,nonce:s};e.post(ajaxurl,o,function(a){console.log("----Pay For Tickets success----"),a=JSON.parse(a);var n="",o="",d="",r="";return void 0==a.errors?a.result?(n="Purchased by your credit card '"+a.paid_by.nameOnCard+"' (**** **** **** "+a.paid_by.lastFour+")",o="Purchasing success",d="success",r="glyphicon glyphicon-ok",e('[data-receipt-block-id="'+i+'"]').removeClass("preview").addClass("open")):(n="Cannot pay invoice by any of your cards. Please, contact auction manager for instructions.",o="Failed",d="error",r="glyphicon glyphicon-remove-sign"):(n=a.errors.join("<br>"),o="Failed",d="error",r="glyphicon glyphicon-remove-sign"),attentionAboutTBuying=!1,t.update({title:o,text:n,icon:r,hide:!0,type:d,delay:3e3,mouse_reset:!1,confirm:{confirm:!1},buttons:{closer:!0,sticker:!1},history:{history:!1}}),!1})}}},{text:"Pay Later",addClass:"browse-here-button",click:function(e){attentionAboutTBuying=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});c.get().on("pnotify.cancel",function(){return!1})},detectIfUserAlreadyHasTicketsInPurchases:function(t){var a=!1,i=t?t:e("[data-purchased-purchase-id]");return i.length&&e.map(i,function(t){void 0!=e(t).attr("data-purchased-item-is-ticket")&&(a=!0)}),a},detectIfUserHasOnlyTicketsInPurchases:function(t){var a=!1,i=t?t:e("[data-purchased-purchase-id]");return i.length&&(a=!0,e.map(i,function(t){void 0==e(t).attr("data-purchased-item-is-ticket")&&(a=!1)})),a},doesUserWantToBuyTicketsJustNow:function(t,a,i,n){var o=e("[data-purchased-purchase-id]"),d=0,r=0;handbidMain.detectIfUserHasOnlyTicketsInPurchases(o)&&(e.map(o,function(t){r+=parseFloat(e(t).data("dashboard-price")),d+=parseInt(e(t).data("dashboard-quantity"))}),handbidMain.wantToPurchaseTicketsImmediately(d,r,t,a,i,n))},utilChangeCountValue:function(e,t){e.html(parseInt(e.html())+t)},showUnpaidInvoicesToUser:function(t,a,i,n){var o=e.cookie("bidder-"+t+"-want-no-invoice-"+n.id),r=t&&n.id&&"yes"!=o,s=a==n.auction&&i;if(r||s){s&&(attentionAboutUnpaidI=!0);var c="You have an unpaid invoice with a Balance of "+currencySpan()+n.total+" in "+n.title+".  Do you want to pay it?";new PNotify({title:"Unpaid Invoice",type:"info",text:c,icon:"glyphicon glyphicon-off",addclass:"handbid-message-notice",hide:!s,delay:1e4,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"View Invoice",addClass:"view-invoices-button",click:function(e){s&&(attentionAboutUnpaidI=!1),d.scrollToInvoices(e,n.id),e.remove()}},{text:"Cancel",addClass:"browse-here-button",click:function(a){s&&(attentionAboutUnpaidI=!1),attentionAboutBidding=!1,e.cookie("bidder-"+t+"-want-no-invoice-"+n.id,"yes",{expires:cookieExpire,path:"/"}),a.remove()}}]},before_open:function(e){s&&handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){s&&handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}})}},loadInvoicesToContainer:function(t,a){var i=e(".unpaidInvoicesCountContainer"),n=e(".receipts-list-area");n.addClass("loading-messages");var o=n.data("nonce");invoices_loaded=!1,e.post(ajaxurl,{action:"handbid_ajax_get_invoices",nonce:o},function(o){o=JSON.parse(o),n.removeClass("loading-messages"),i.html(o.unpaid),o.unpaid?i.show():i.hide(),n.html(o.invoices),invoices_loaded=!0;var d=e("#bidder-info-load"),r=parseInt(d.data("profile-id")),s=e(".item-details"),c=handbidMain.detectIfUserHasOnlyTicketsInPurchases(),l=!!s.length&&parseInt(s.data("item-auction-id")),u=!!s.length&&("yes"==s.data("item-is-ticket")&&c);if(!t&&o.unpaid>0&&e.map(e(".receiptRow.preview"),function(t){var a=e(t),i=parseInt(a.data("receipt-block-id")),n=a.data("receipt-total"),o=a.data("receipt-of-auction"),d=e(".invoice-title",a).eq(0).html();handbidMain.showUnpaidInvoicesToUser(r,l,u,{id:i,total:n,title:d,auction:o})}),a){var h=e('[data-toggle-invoice-link="'+a+'"]');h.click(),e("html,body").animate({scrollTop:h.offset().top},"normal")}return!1})},loadMessagesToContainer:function(){var t=e(".messages-list-area");t.addClass("loading-messages");var a=t.data("nonce");e.post(ajaxurl,{action:"handbid_ajax_get_messages",nonce:a},function(e){return e=JSON.parse(e),t.removeClass("loading-messages"),t.html(e.messages),!1})},loadBidsHistoryToContainer:function(t){var a=e(".bid-history-container-"+t);if(a.length){a.addClass("loading-messages");var i=a.data("bids-nonce");e.post(ajaxurl,{action:"handbid_ajax_get_bid_history",itemID:t,nonce:i},function(e){return e=JSON.parse(e),a.removeClass("loading-messages"),a.html(e.history),!1})}},loadAllToContainers:function(){this.loadInvoicesToContainer(),this.loadMessagesToContainer()},scrollToInvoices:function(t,a){if(void 0!=a&&e("rtg-"+a).is(":visible"))return!1;var i=e('a[data-slider-nav-key="profile-user-info"]:visible');i.click(),e('a[data-slider-nav-key="see-my-receipt"]:visible').click(),e("html,body").animate({scrollTop:i.offset().top},"normal"),d.loadInvoicesToContainer(!0,a),void 0!=t&&null!=t?t.remove():""},notifyUserAboutAuctionClosing:function(t,a){var i=t.name,n="Auction <b>"+i+"</b> is closed now.",o=[],r=!1,s=!0,c=e("#bidder-info-load").length&&""!=e("#bidder-info-load").html();e(".auction-details").removeClass("open").removeClass("preview").removeClass("presale").addClass("closed"),e(".auction-details .status .status-label").html("closed"),a&&c&&(n+="<br>You may have an unpaid invoices so you can check them.",o.push({text:"View Invoices",addClass:"view-invoices-button",click:function(e){d.scrollToInvoices(e),e.remove()}}),r={confirm:!0,buttons:o},s=!1),void 0!=timerNotice?timerNotice.remove():"",timerNotice=new PNotify({title:"Auction Closed",type:"info",text:n,icon:"glyphicon glyphicon-off",addclass:"handbid-message-notice",hide:s,mouse_reset:!1,confirm:r,buttons:{closer:!0,sticker:!1},history:{history:!1}})},notifyUserAboutReceipt:function(t){var a=t.id,i=e("#bidder-info-load").length&&""!=e("#bidder-info-load").html();if(0==e("[data-receipt-block-id='"+a+"']").length&&i){var n=(t.name,t.name),o=[];o.push({text:"invoice",addClass:"view-invoices-button",click:function(e){d.scrollToInvoices(e),e.remove()}}),confirm={confirm:!0,buttons:o},hide=!1;var r={title:"Auction Invoices",type:"info",text:n,icon:"",addclass:"handbid-message-notice",hide:!0,delay:1e4,mouse_reset:!1,confirm:confirm,buttons:{closer:!0,sticker:!1},history:{history:!1}};void 0!=auctionInvoices&&"out"==auctionInvoices.animating&&(auctionInvoices=void 0),void 0!=auctionInvoices?auctionInvoices.update(r):auctionInvoices=new PNotify(r)}},removeItemFromDashboardList:function(t,a,i){var n=e(".handbid-list-of-bids-"+a).eq(0);if("purchases"==a?(e("[data-purchased-purchase-id="+t+"]").remove(),i&&e("[data-purchased-item-id="+t+"]").remove()):e("[data-"+a+"-item-id="+t+"]").remove(),0==e("li",n).length){var o=n.data("no-items-text");n.prepend("<p>"+o+"</p>")}},displayOnlyCurrentStatusOfItem:function(t,a){e("[data-handbid-box-id="+t+"][data-handbid-item-banner]").hide(),e("[data-handbid-box-id="+t+"][data-handbid-item-banner='"+a+"']").show(),e("[data-handbid-item-box="+t+"]").attr("data-handbid-item-box-status",a)},addLosingItemRow:function(e,t,a){this.removeItemFromDashboardList(e,"losing");var i="under_maxbid"==a?" by MaxBid. ":".",n=void 0!=t.auctionKey?t.auctionKey:currentAuctionKey,o="/auctions/"+n+"/item/"+t.item.key,d=void 0!=t.item.image?t.item.image:t.item.imageUrl;this.addDashboardBidLosing(t.item.id,t.item.name,o,t.amount),this.removeItemFromDashboardList(e,"winning"),this.recheckAndRecalculateBids();var r={isBidding:!0,itemLink:o,itemImage:d};this.notice("You are <br>outbid</b> the item <b>"+t.item.name+" ("+t.item.itemCode+") </b> at "+currencySpan()+t.amount+i+" <a href='"+o+"'>GO TO ITEM</a>","Losing Item","error",null,r)},addWinningItemRow:function(e,t,a){this.removeItemFromDashboardList(e,"winning"),this.removeItemFromDashboardList(e,"purchases");var i="under_maxbid"==a?" by MaxBid! ":" now!",n=void 0!=t.auctionKey?t.auctionKey:currentAuctionKey,o="/auctions/"+n+"/item/"+t.item.key,d=void 0!=t.item.image?t.item.image:t.item.imageUrl;this.addDashboardBidWinning(t.item.id,t.item.name,o,t.amount),this.removeItemFromDashboardList(e,"losing"),this.recheckAndRecalculateBids();var r={isBidding:!0,itemLink:o,itemImage:d},s="You are <br>winning</b> the item <b>"+t.item.name+" ("+t.item.itemCode+") </b> at "+currencySpan()+t.amount+i;s="maxbid_auto"==a?t.message:s;var c="maxbid_auto"==a?"Still Winning!":"Winning!";this.notice(s,c,"success",null,r)},checkIfBidsExistsAndChange:function(t,a){var i=e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id"),n=t.item.id,o=t.winnerId,d=e("[data-winning-item-id="+n+"]").length;e("[data-losing-item-id="+n+"]").length;d&&o!=i&&(console.log("----- LOSING ITEM -----"),this.checkIfMaxBidIsNotActual(t),this.loadMessagesToContainer()),o==i&&(console.log("----- WINNING ITEM -----"),this.addWinningItemRow(n,t),this.checkIfMaxBidIsNotActual(t),this.loadMessagesToContainer())},userItemBiddingEvent:function(e){var t=e.item.id,a=e.status,i=e.statusReason;"losing"==a&&(this.removeItemFromDashboardList(t,"losing"),this.addLosingItemRow(t,e,i)),"winning"==a&&"maxbid_auto"==i&&(this.removeItemFromDashboardList(t,"winning"),this.addWinningItemRow(t,e,i),d.loadBidsHistoryToContainer(t)),"removed"==a&&"bid_removed"==i&&(this.removeItemFromDashboardList(t,"purchases",t),this.recheckAndRecalculateBids(),d.loadBidsHistoryToContainer(t))},checkIfMaxBidIsNotActual:function(t){var a=t.item.id,i=e("[data-maxbid-item-id='"+a+"']").eq(0),n=parseInt(i.data("proxy-item-max-value"));void 0!=i&&t.amount>=n&&this.removeItemFromDashboardList(a,"proxy"),this.recheckAndRecalculateBids()},addUserPurchase:function(e){1==e.isDeleted?(this.removeItemFromDashboardList(e.id,"purchases"),this.recheckAndRecalculateBids()):(this.removeItemFromDashboardList(e.item.id,"winning"),this.removeItemFromDashboardList(e.id,"purchases"),this.addDashboardBidPurchased(e),
this.loadMessagesToContainer())},getSinglePaymentTemplate:function(e){var t="";switch(e.paymentMethod){case"creditcard":t=e.card+" xxxx-xxxx-xxxx-"+e.last4;break;case"creditcard_external":t="Credit Card (external)";break;case"cash":t="Cash";break;case"checking_account":t="Check";break;case"credited_amount":t="Credit";break;case"discount_amount":t="Discount";break;default:t=""}var a='<div class="col-xs-0 col-md-4"></div><div class="col-xs-7 col-md-5"><h4 class="quantity-total">Payment Applied: '+t+"<span>"+e.datetime+'</span></h4></div><div class="col-xs-5 col-md-3"><span class="bid-amount winning">'+currencySpan()+'<span class="handbidInventorySinglePaymentAmount">'+e.amount+"</span></span></div>";return a},processPayments:function(t,a){var i=e(".handbid-list-of-purchase-totals .payments-list-"+a);i.html(""),e.map(t,function(e){var t=handbidMain.getSinglePaymentTemplate(e);i.append(t)}),handbidMain.recheckYourCardItems()},processUserReceipt:function(t){var a=t.id,i=e('[data-receipt-block-id="'+a+'"]').eq(0),n=e('[data-receipt-block-id="'+a+'"] .unpaidControls'),o=e('[data-receipt-block-id="'+a+'"] .paidControls'),d=e('[data-receipt-block-id="'+a+'"] .unpaidRows');t.paid?(i.removeClass("preview").addClass("open"),n.hide(),d.hide(),o.show()):(i.addClass("preview").removeClass("open"),n.show(),d.show(),o.hide()),void 0!=t.payments&&handbidMain.processPayments(t.payments,t.auctionId)},scrollToProfile:function(t){t&&(address_to_pay_receipt=t);var a='a[data-slider-nav-key="profile-user-info"]:visible',i='a[data-slider-nav-key="user-profile"]:visible';0!=e(i).length?(e(i).click(),setTimeout(function(){e("html,body").animate({scrollTop:e("#profileNewPasswordConfirm").offset().top},"normal")},300)):(e(a).click(),setTimeout(function(){e(i).click(),setTimeout(function(){e("html,body").animate({scrollTop:e("#profileNewPasswordConfirm").offset().top},"normal")},300)},300))},proposeToFillAddressBeforePay:function(t){attentionAboutAddrPay=!0;var a=new PNotify({title:"Address Needed",text:"This organization requires your shipping address be on file prior to completing this transaction. Please fill and save it in your profile and return to payment processing.",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Add",addClass:"send-invoice-button",click:function(a){attentionAboutAddrPay=!1,a.remove(),e("#payInvoiceID").val(t),handbidMain.scrollToProfile(t)}},{text:"Cancel",addClass:"cancel-sending-button",click:function(e){attentionAboutAddrPay=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});a.get().on("pnotify.cancel",function(){return!1})},proposeToContinuePayInvoice:function(t){attentionAboutContPay=!0;var a=new PNotify({title:"Continue Payment",text:"Do you want to continue payment?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Continue",addClass:"send-invoice-button",click:function(a){attentionAboutContPay=!1,a.remove(),handbidMain.scrollToInvoices(a,t);var i=e('[data-receipt-id="'+t+'"]').eq(0);handbidMain.tryToMakePaymentForReceipt(i)}},{text:"Cancel",addClass:"cancel-sending-button",click:function(e){attentionAboutContPay=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});a.get().on("pnotify.cancel",function(){return!1})},initGoogleAutocomplete:function(e){autocomplete=new google.maps.places.Autocomplete(document.getElementById(e),{types:["geocode"]})},toggleProfileLocationMap:function(){e("#profile-location-map-container").slideToggle();var t=e("#profileShippingAddress");if(void 0==profile_location_map){var a=new google.maps.Geocoder,i={lat:39.7642543,lng:-104.9955388},n=t.val();""!=n.trim()&&a.geocode({address:n},function(e,t){t==google.maps.GeocoderStatus.OK&&(i=e[0].geometry.location.toJSON())}),profile_location_map=new google.maps.Map(document.getElementById("profile-location-map"),{center:i,zoom:8});var o=new google.maps.Marker({position:i,map:profile_location_map,draggable:!0,animation:google.maps.Animation.DROP,title:"Hello World!"});google.maps.event.addListener(profile_location_map,"click",function(e){var i={lat:e.latLng.lat(),lng:e.latLng.lng()};o.setPosition(i),a.geocode({location:i},function(e,a){a===google.maps.GeocoderStatus.OK&&e[0]&&t.val(e[0].formatted_address)})})}},auctionRequiresAddressToPay:function(t,a,i){var n=!0;if(t){var o=t.attr("data-require-address-to-pay");n="undefined"!=typeof o&&o!==!1}else n=i;if(n){var d=e("#profileShippingAddress").val().trim(),r=""!=d&&"United States"!=d;return n&&!r&&(a||(a=t.attr("data-receipt-id")),handbidMain.proposeToFillAddressBeforePay(a)),!r}return!1},noticeIfNoCreditCard:function(t,a,i){var n=t.attr("data-handbid-credit-cards-required"),o="undefined"!=typeof n&&n!==!1,d=e("[data-handbid-card-row]"),r=e("#footer-credit-cards-count"),s=r.length?parseInt(r.val()):d.length;return(o&&0==s||i)&&(a&&(ticketsPopupWasOpened=!0),handbidModalsMain.showSingleModal("credit-card-form")),o||i},getCountOfPastItemPurchases:function(t){var a=0;return e.map(e('.handbid-list-of-bids-purchases [data-purchased-item-id="'+t+'"]'),function(t){a+=parseInt(e(t).data("dashboard-quantity"))}),a},confirmIfUserReallyWantToBuy:function(t,a){var i=parseInt(e("[data-handbid-quantity]").eq(0).html()),n=parseFloat(e('[data-handbid-item-attribute="buyNowPrice"]').eq(0).html()),o=i*n,d=e(".item-details").eq(0),r=d.data("item-id"),s="yes"==d.data("item-is-donation"),c="yes"==d.data("item-is-ticket"),l=!s&&t.getCountOfPastItemPurchases(r),u=s?"Donation Confirmation":"Purchase Confirmation",h=s?"Confirm Donation of "+currencySpan()+o+"?":"Add "+i+" for "+currencySpan()+o+" to your cart?",m=l?h+"<br /><br /> Hey! You have already purchased "+l+" of this item, are you sure you want to purchase "+i+" more?":h;a&&(i=0,o=0,e.map(a,function(e,t){i+=e.quantity,o+=e.quantity*e.price})),(c||a)&&(u="Ticket Confirmation",m="Confirm addition of "+i+" ticket"+(i>1?"s":"")+" for "+currencySpan()+o+" to purchases?"),attentionAboutBuyConf=!0;var p=new PNotify({title:u,text:m,icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice handbid-left-padding-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Yes",addClass:"bid-here-button",click:function(e){attentionAboutBuyConf=!1,e.remove(),a?t.confirmedTicketsPurchase(a):t.confirmedPurchase()}},{text:"No, thanks",addClass:"browse-here-button",click:function(e){attentionAboutBuyConf=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});p.get().on("pnotify.cancel",function(){return!1})},alreadyHaveMaxBidForItem:function(t){var a=parseInt(e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id")),i=t.item.winnerId;if(i==a&&t){var n=t.item.name,o=t.proxyBid,d=t.item.highestProxyBid;handbidMain.notice("Cannot create MaxBid at <b>"+n+"</b> at "+currencySpan()+o+". You already have a maxbid for this item at "+currencySpan()+d+" . Please remove the current maxbid to create a new one.","Already Have MaxBid","error")}},disableAllBiddingButtonsIfSold:function(){e('[data-handbid-bid-button="up"]').addClass("disabled-button"),e('[data-handbid-bid-button="down"]').addClass("disabled-button"),e('[data-handbid-bid-button="bid"]').addClass("disabled-button"),e('[data-handbid-bid-button="proxy"]').addClass("disabled-button"),e('[data-handbid-bid-button="purchase"]').addClass("disabled-button"),e('[data-handbid-bid-button="buyItNow"]').addClass("disabled-button")},isButtonDisabledOrAlreadyActive:function(e){return e.hasClass("disabled-button")||e.hasClass("active")},scrollBodyToTopOfElement:function(t,a){a=a?a:900,e("html, body").animate({scrollTop:t},a)},getCategoryForInitialFilter:function(){var e="all",t=window.location.hash;return t&&(t=t.split("-").pop(),e=this.getCookie(this.getCookieNameForItem(t))),e},goBackToItem:function(){var t=window.location.hash;if(t){t=t.split("-").pop();var a=e('[data-handbid-item-box="'+t+'"]').offset();if(void 0!=a){var i=this.getCategoryForInitialFilter();"all"!=i?setTimeout(function(){e('[data-legacy-category-id="'+t+'"] a').click(),setTimeout(function(){handbidMain.scrollBodyToTopOfElement(a.top)},500)},500):this.scrollBodyToTopOfElement(a.top)}}},getStatusReasonByCode:function(e){return void 0!=a[e]?a[e]:e},cannotDoIfUnauthorized:function(){var t=e.cookie("handbid-auth");return t?this.loggedIn=!0:(e("[data-handbid-connect]").eq(0).click(),this.loggedIn=!1),!this.loggedIn},confirmedPurchase:function(){var t=e("[data-handbid-user-id]"),a=e("[data-handbid-auction-id]"),i=e("[data-handbid-item-id]"),n=e("#bidUserId"),o=e("#bidAuctionId"),r=e("#bidItemId"),s=t.length>0?t.attr("data-handbid-user-id"):parseInt(n.val())?parseInt(n.val()):null,c=a.length>0?a.attr("data-handbid-auction-id"):parseInt(o.val())?parseInt(o.val()):null,l=i.length>0?i.attr("data-handbid-item-id"):parseInt(r.val())?parseInt(r.val()):null,u=e("[data-handbid-quantity], [data-handbid-bid-amount]"),h=e(".increment span.incrementSpan"),m=e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]'),p=(h.length>0?parseInt(h[0].innerHTML):1,m.length>0?parseInt(m[0].innerHTML):1,e("#bidNonce").val()),v=e('[data-handbid-bid-button="purchase"]').eq(0),f=parseFloat(v.data("handbid-buynow-price")),b=parseInt(u[0].innerHTML);v.addClass("active");var g={action:"handbid_ajax_createbid",nonce:p,userId:s,auctionId:c,itemId:l,amount:f,quantity:b};e.post(ajaxurl,g,function(t){console.log("-----------------------"),console.log("----Buy Items success----"),t=JSON.parse(t),v.removeClass("active");var a="";if("failed"==t.status)a=d.getStatusReasonByCode(t.statusReason),handbidMain.notice(a,t.status.toUpperCase(),t.status);else{d.setPaddleNumberAndWelcomeMessage(t.welcomeForReceipt,t.paddleNumber),d.showAreYouHereMessage(t.bidderLocationQuestion);var i=e('[data-handbid-item-attribute="totalSoldItems"]').eq(0),n=t.item.quantitySold;i.html(n);var o=e('[data-handbid-item-attribute="inventoryRemaining"]').eq(0),r=t.item.inventoryRemaining;r=r==-1?"∞":r,o.html(r);var s=0!=t.item.inventoryRemaining?1:0;u.html(s);var c=void 0!=t.item.isAppeal&&1==t.item.isAppeal,h=c?"Thank You!":"Congratulations!";a=c?"You donated "+currencySpan()+t.currentAmount*t.quantity:"You've added "+b+" <br>of Item #"+t.item.id+" <br><b>"+t.item.name+" to your Cart</b>",handbidMain.notice(a,h,"success"),handbidMain.removeItemFromDashboardList(l,"proxy"),handbidMain.recheckAndRecalculateBids(),d.loadAllToContainers(),d.reloadPageIfForceRefresh()}return!1})},confirmedTicketsPurchase:function(t){var a=e(".handbid-modal.tickets-modal .modal-close").eq(0),i=e('[data-handbid-tickets-button="purchase"]').eq(0),n=i.data("handbid-buy-tickets-nonce"),o=i.data("handbid-auction-id"),r=i.data("handbid-profile-id");i.addClass("active"),a.hide();var s={action:"handbid_ajax_buy_tickets",nonce:n,userId:r,auctionId:o,items:t};e.post(ajaxurl,s,function(n){console.log("---------------------------"),console.log("----Buy Tickets success----"),n=JSON.parse(n),e.map(e("[data-handbid-ticket-id]"),function(t,a){var i=e(t),o=e("[data-handbid-ticket-quantity]",i).eq(0),r=e("[data-handbid-tickets-remaining]",i).eq(0),s=parseInt(o.html()),c=parseInt(i.data("handbid-ticket-id")),l=r.val(),u=parseInt(r.val());return o.html(0),!connectedToSocket&&"-1"!=l&&"∞"!=l&&d.in_array(n.successID,c)&&r.val(u-s),null}),e("[data-handbid-tickets-total]").html(0);var o=[];if(n.failID.length&&(o=e.map(t,function(t,a){if(d.in_array(n.failID,t.id)){var i="";if(void 0!=n.fail[t.id].data&&void 0!=n.fail[t.id].data.error){var o=e.map(n.fail[t.id].data.error,function(e,t){return e.join(", ")});i="<br> Reason: "+o.join(", ")}else i="<br> Reason: Something wrong. Please, try again later";return d.in_array(n.failID,t.id)?"Item #"+t.id+" <br><b>"+t.name+"</b>"+i:null}return null}),handbidMain.notice("<b>Cannot Buy:</b> <br><br>"+o.join(" <br><br>"),"Cannot Buy Tickets","error")),n.successID.length){o=e.map(t,function(e,t){if(d.in_array(n.successID,e.id)){var a=n.success[e.id];a.amount,a.quantity,a.name;return d.in_array(n.successID,e.id)?"<b>"+e.quantity+"</b> of Item #"+e.id+" <br><b>"+e.name+"</b>":null}return null}),d.loadInvoicesToContainer(!0);var r="You've added "+o.join("; <br>")+" to your Cart</b>";handbidMain.notice(r,"Congratulations!","success")}return i.removeClass("active"),a.show(),a.click(),!1})},setupBidding:function(t){var a=e("[data-handbid-user-id]").length>0?e("[data-handbid-user-id]").attr("data-handbid-user-id"):parseInt(e("#bidUserId").val())?parseInt(e("#bidUserId").val()):null,i=e("[data-handbid-auction-id]").length>0?e("[data-handbid-auction-id]").attr("data-handbid-auction-id"):parseInt(e("#bidAuctionId").val())?parseInt(e("#bidAuctionId").val()):null,n=e("[data-handbid-item-id]").length>0?e("[data-handbid-item-id]").attr("data-handbid-item-id"):parseInt(e("#bidItemId").val())?parseInt(e("#bidItemId").val()):null,o=e("[data-handbid-quantity], [data-handbid-bid-amount]"),d=e(".increment span.incrementSpan").length>0?parseInt(e(".increment span.incrementSpan")[0].innerHTML):1,r=e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]').length>0?parseInt(e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]')[0].innerHTML):1;e('[data-handbid-bid-button="up"]').live("click",function(a){var i=parseInt(e('[data-handbid-item-attribute="inventoryRemaining"]').eq(0).html());if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this))||0==i)return!1;a.preventDefault();var n=!0,r=!0,s=o,c=e(this).hasClass("max-bid-up"),l=e(this).hasClass("isDirectPurchase");l||(s=e(c?"[data-handbid-maxbid-amount]":"[data-handbid-onlybid-amount]"));var u=parseInt(s[0].innerHTML)+d;if(l){var i=e('[data-handbid-item-attribute="inventoryRemaining"]').length>0?parseInt(e('[data-handbid-item-attribute="inventoryRemaining"]')[0].innerHTML):-1;i=i?i:-1;var h=e('[data-handbid-item-attribute="totalSoldItems"]').length>0?parseInt(e('[data-handbid-item-attribute="totalSoldItems"]')[0].innerHTML):0;h=h?h:0,n=i==-1||i!=-1&&u<=i}else{var m=e("[data-handbid-buynow-price]").length>0?e("[data-handbid-buynow-price]").eq(0).data("handbid-buynow-price"):-1;m=""!=m?parseInt(m):-1;var p=c?u<m:u<=m;n=m<=0||m>0&&p,r=m<=0||m>0&&u<m}n&&(s.html(u),l||c||!r||e("[data-handbid-maxbid-amount]").html(u))}),e('[data-handbid-bid-button="down"]').live("click",function(a){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;a.preventDefault();var i=o,n=e(this).hasClass("max-bid-down"),s=e(this).hasClass("isDirectPurchase");s||(i=e(n?"[data-handbid-maxbid-amount]":"[data-handbid-onlybid-amount]"));var c=parseInt(i[0].innerHTML)-d;r=e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]').length>0?parseInt(e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]')[0].innerHTML):1,c>=r&&(i.html(c),s||n||e("[data-handbid-maxbid-amount]").html(c))}),e('[data-handbid-bid-button="bid"]').live("click",function(o){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;o.preventDefault();var d=e(this),r=t.checkIfWantToShowBidConfirmation();return r?t.notConfirmedBidAction(d,a,i,n):t.confirmedBidAction(d,a,i,n),!1}),e('[data-handbid-bid-button="proxy"]').live("click",function(o){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;var d=e("[data-handbid-maxbid-amount]"),r=d[0].innerHTML,s=e("#bidNonce").val(),c=e(this);c.addClass("active"),e(".proxy-bid-dialog-close").hide();var l={action:"handbid_ajax_createbid",nonce:s,userId:a,auctionId:i,itemId:n,maxAmount:r};return e.post(ajaxurl,l,function(a){if(console.log("-----------------------"),console.log("----Max Bid success----"),a=JSON.parse(a),void 0==a.status)t.notice("Something went wrong. Please, try again later","No response from server","error");else if("failed"==a.status){var i="";"max_bid"==a.bidType?t.alreadyHaveMaxBidForItem(a):(i=t.getStatusReasonByCode(a.statusReason),t.notice(i,a.status.toUpperCase(),a.status))}else t.setPaddleNumberAndWelcomeMessage(a.welcomeForReceipt,a.paddleNumber),t.showAreYouHereMessage(a.bidderLocationQuestion),a.item.auctionKey=e("#bidder-info-load").data("auction-key"),t.addDashboardBidProxy(a.id,a.item.id,a.item.name,a.item.key,a.item.auctionKey,a.maxAmount),"raised_maxbid"==a.statusReason&&"winning"==a.status&&(t.addWinningItemRow(a.item.id,a,a.statusReason),t.loadBidsHistoryToContainer(a.item.id)),t.reloadPageIfForceRefresh();return c.removeClass("active"),e(".proxy-bid-dialog-close").show(),e(".proxy-bid-dialog-close").click(),!1}),!1}),e('[data-handbid-bid-button="purchase"]').live("click",function(a){a.preventDefault();var i=parseInt(e('[data-handbid-item-attribute="inventoryRemaining"]').eq(0).html());return!(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this))||0==i)&&(t.confirmIfUserReallyWantToBuy(t,!1),!1)}),e('[data-handbid-bid-button="buyItNow"]').live("click",function(o){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;o.preventDefault();var d=e("#bidNonce").val(),r=parseFloat(e(this).data("handbid-buynow-price")),s=e(this);s.addClass("active");var c={action:"handbid_ajax_createbid",nonce:d,userId:a,auctionId:i,itemId:n,amount:r};return e.post(ajaxurl,c,function(a){return console.log("-----------------------"),console.log("----Buy Now success----"),a=JSON.parse(a),t.setPaddleNumberAndWelcomeMessage(a.welcomeForReceipt,a.paddleNumber),t.showAreYouHereMessage(a.bidderLocationQuestion),e('[data-handbid-item-banner="sold"]').show(),t.disableAllBiddingButtonsIfSold(),s.removeClass("active"),t.loadInvoicesToContainer(!0),t.reloadPageIfForceRefresh(),!1}),!1}),e("[data-handbid-delete-proxy]").live("click",function(a){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;a.preventDefault();var i=(e(".handbid-list-of-bids-proxy").eq(0),e("#bidNonce").val()),n=parseInt(e(this).data("handbid-delete-proxy")),o=e(this),d=o.data("item-id");o.addClass("active");var r={action:"handbid_ajax_removebid",nonce:i,bidID:n};return e.post(ajaxurl,r,function(e){return console.log("-----------------------------"),console.log("----Delete Maxbid success----"),e=JSON.parse(e),t.removeItemFromDashboardList(d,"proxy"),t.recheckAndRecalculateBids(),o.removeClass("active"),!1}),!1})},notConfirmedBidAction:function(t,a,i,n){attentionAboutConfirm=!0;var o=e('[data-change-attribute="minimumBidAmount"]').eq(0).html(),d=e(".handbidAuctionCurrency").eq(0).html();new PNotify({title:"",text:"<b>Place a bid for "+d+'<span data-change-attribute="minimumBidAmount">'+o+"</span> on this item?</b>",icon:"glyphicon glyphicon-question-sign",type:"info",hide:!1,confirm:{confirm:!0,buttons:[{text:"Yes",click:function(e){attentionAboutConfirm=!1,e.remove(),handbidMain.confirmedBidAction(t,a,i,n)}},{text:"No",click:function(e){attentionAboutConfirm=!1,e.remove()}}]},buttons:{closer:!1,sticker:!1},history:{history:!1},before_open:function(t){t.get().css({}),confirm_bid_overlay?confirm_bid_overlay.fadeIn("fast"):confirm_bid_overlay=e("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",background:"rgba(0, 0, 0, 0.7)",top:"0",bottom:"0",right:"0",left:"0","z-index":"9999"}}).appendTo("body").fadeIn("fast")},before_close:function(){confirm_bid_overlay.fadeOut("fast")}})},confirmedBidAction:function(t,a,i,n){var o=e("[data-handbid-onlybid-amount]"),r=o[0].innerHTML,s=e("#bidNonce").val(),c=t,l="";c.addClass("active");var u={action:"handbid_ajax_createbid",nonce:s,userId:a,auctionId:i,itemId:n,amount:r};e.post(ajaxurl,u,function(t){return console.log("-----------------------"),console.log("----Bid Now success----"),t=JSON.parse(t),"failed"==t.status?(l=d.getStatusReasonByCode(t.statusReason),d.notice(l,t.status.toUpperCase(),t.status)):(d.setPaddleNumberAndWelcomeMessage(t.welcomeForReceipt,t.paddleNumber),d.showAreYouHereMessage(t.bidderLocationQuestion),e('[data-handbid-item-attribute="bidCount"]').html(t.item.bidCount),e('[data-handbid-item-attribute="minimumBidAmount"]').html(currencySpan()+t.item.minimumBidAmount),"under_maxbid"==t.statusReason&&(d.addLosingItemRow(t.item.id,t,t.statusReason),d.loadBidsHistoryToContainer(t.item.id)),d.reloadPageIfForceRefresh()),c.removeClass("active"),!1})},reloadPageIfForceRefresh:function(){forcePageRefreshAfterBids&&location.reload()},reloadPageAfterPurchasesIfForceRefresh:function(){forcePageRefreshAfterPurchases&&location.reload()},recalculateTotalTicketsPrice:function(){var t=0,a=e.map(e("[data-handbid-ticket-id]"),function(a,i){var n=e(a),o=e("[data-handbid-ticket-quantity]",n).eq(0),d=parseInt(o.html()),r=parseInt(n.data("handbid-ticket-id")),s=parseFloat(n.data("handbid-ticket-price")),c=e("[data-handbid-ticket-title]",n).eq(0).html(),l=e("[data-handbid-ticket-description]",n).eq(0).html();return t+=d*s,d>0?{id:r,price:s,quantity:d,name:c,description:l}:null});return t=d.number_format(t,0,".",","),e("[data-handbid-tickets-total]").html(t),a},setupTicketsPurchasing:function(t){e('[data-handbid-ticket-button="up"]').live("click",function(a){a.preventDefault();var i=e(this).parents("[data-handbid-ticket-id]").eq(0),n=e("[data-handbid-ticket-button='down']",i).eq(0),o=e("[data-handbid-ticket-quantity]",i).eq(0),d=e("[data-handbid-tickets-remaining]",i).eq(0),r=parseInt(o.html()),s=d.val(),c=parseInt(d.val()),l=(parseInt(i.data("handbid-ticket-id")),parseInt(i.data("handbid-ticket-step"))),u=(parseFloat(i.data("handbid-ticket-price")),r+l);(u<=c||"-1"==s||"∞"==s)&&(o.html(u),t.recalculateTotalTicketsPrice(),n.removeClass("ghosted-out"),u+l>c&&"-1"!=s&&"∞"!=s&&e(this).addClass("ghosted-out"))}),e('[data-handbid-ticket-button="down"]').live("click",function(a){a.preventDefault();var i=e(this).parents("[data-handbid-ticket-id]").eq(0),n=e("[data-handbid-ticket-button='up']",i).eq(0),o=e("[data-handbid-ticket-quantity]",i).eq(0),d=e("[data-handbid-tickets-remaining]",i).eq(0),r=parseInt(o.html()),s=(parseInt(d.val()),parseInt(i.data("handbid-ticket-id")),parseInt(i.data("handbid-ticket-step"))),c=(parseFloat(i.data("handbid-ticket-price")),r-s);c>=0&&(o.html(c),t.recalculateTotalTicketsPrice(),n.removeClass("ghosted-out"),c-s<0&&e(this).addClass("ghosted-out"))}),e('[data-handbid-tickets-button="purchase"]').live("click",function(a){a.preventDefault();var i=t.recalculateTotalTicketsPrice();return!(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this),!0,!1)||0==i.length)&&(t.confirmIfUserReallyWantToBuy(t,i),!1)})},tryToMakePaymentForReceipt:function(e){setTimeout(function(){invoices_loaded?handbidMain.makePaymentForReceipt(e):handbidMain.tryToMakePaymentForReceipt(e)},500)},makePaymentForReceipt:function(t){if(d.isButtonDisabledOrAlreadyActive(t)||d.cannotDoIfUnauthorized()||d.noticeIfNoCreditCard(t))return!1;if(d.auctionRequiresAddressToPay(t))return!1;var a=void 0!=t.attr("data-inventory-payment-button"),i=t.parents(".receipt-payment-block").eq(0),n=e(".select-payment-card",i).eq(0).val(),o=t.data("make-payment-nonce"),r=t.data("auction-id"),s={action:"handbid_ajax_make_receipt_payment",nonce:o,cardId:n,auctionId:r};if(!a){var c=t.parents(".receiptRow").eq(0),l=e(".paidControls",c).eq(0),u=e(".unpaidControls",c).eq(0),h=t.data("receipt-id");s[h]=h}t.addClass("active"),e.post(ajaxurl,s,function(i){if(console.log("---------------------------"),console.log("----Make payment success----"),i=JSON.parse(i),console.log(i),void 0!=i.result)if(void 0!=i.result.data&&void 0!=i.result.data.error){var n=[];for(var o in i.result.data.error){var d=i.result.data.error[o];n.push("<b>"+o+":</b> "+d)}handbidMain.notice(n.join("<br>"),"Payment Error","error")}else if(i.result.paid){if(!a){l.slideDown(),u.remove(),c.addClass("open").removeClass("preview");var r=e(".unpaidInvoicesCountContainer"),s=e(".receipts-list-area li.preview").length;s?r.show():r.hide(),r.html(s)}handbidMain.notice("Your receipt was successfully paid!","Congratulations!","success")}else handbidMain.notice(i.result.description,"Payment Error","error");else handbidMain.notice("Something went wrong. Please try again later","Payment Error","error");return t.removeClass("active"),!1})},recheckYourCardItems:function(){var t=e(".handbid-list-of-bids-purchases li .purchaseTotalAmount"),a=e(".handbidInventorySinglePaymentAmount"),i=e(".handbid-list-of-purchase-totals"),n=e(".handbid-list-of-purchase-totals .payments-list"),o=e(".handbid-list-of-purchase-totals .auctionPremiumRow"),d=e(".handbid-list-of-purchase-totals .itemsTaxRow"),r=e(".handbid-list-of-purchase-totals .itemsTaxTotal"),s=e(".handbid-list-of-purchase-totals .inventoryPremium"),c=e(".handbidInventoryTotalPurchases"),l=e(".handbidInventoryBalanceDue"),u=e(".handbid-list-of-purchase-totals .balanceDuePaymentCards"),h=(t.length,a.length,0),m=0,p=0,v=0,f=0;e.map(t,function(t){h+=parseFloat(e(t).html()),p+=parseFloat(e(t).attr("data-dashboard-tax"))}),h?(i.show(),c.html(h),e.map(a,function(t){v+=parseFloat(e(t).html())}),v?n.show():n.hide(),m=h*parseFloat(o.attr("data-auction-tax-rate")),m=Math.round(100*m)/100,m?(o.show(),s.html(m)):o.hide(),p?(d.show(),r.html(p)):d.hide(),f=h+m+p-v,f<.01&&(f=0),f=handbidMain.number_format(f,2,".",","),l.html(f),f>0?u.show():u.hide()):i.hide()},initializePaymentButtons:function(){e(".make-payment-button").live("click",function(t){t.preventDefault(),handbidMain.makePaymentForReceipt(e(this))})},submitBid:function(e){},setupConnect:function(){var t=e("body");if(t.hasClass("handbid-logged-out")){this.loggedIn=!1;var a=e('[data-handbid-modal-key="login-modal"]');e("[data-handbid-connect]").live("click",function(t){t.preventDefault();var i=e(this).hasClass("register");i&&(e(".active-container").eq(0).removeClass("active-container").hide(),e("[data-tab-name='register-form']").eq(0).addClass("active-container").show()),a.modal("show")}),a.on("hidden.bs.modal",function(e){handbidLoginMain.restoreInitialTabState()})}else this.loggedIn=!0,e("[data-handbid-connect]").css("display","none")},setupTutorialPopup:function(){var t=(e("body"),e('[data-handbid-modal-key="login-modal"]'));e("[data-handbid-tutorial]").live("click",function(e){e.preventDefault(),void 0!=handbidLoginMain&&handbidLoginMain.changeToTutorialTabState(),t.modal("show")})},setupBidderDashboard:function(){e(".bidder-info-container .stats-bar").live("click.ajax-load",function(){e.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"load_bidder_dashboard"},dataType:"html",success:function(t){e(t).appendTo(e(".bidder-dashboard-inner"))}}),e(this).off(".ajax-load")})},setupDeleteCreditCard:function(){e("[data-handbid-delete-credit-card]").live("click",function(t){t.preventDefault();var a=e(this),i=a.data("handbid-delete-credit-card"),n=e("#deleteCardNonce").val();a.addClass("active");var o={action:"handbid_ajax_remove_credit_card",cardID:i,nonce:n};return e.post(ajaxurl,o,function(t){console.log("-----------------------------"),console.log("----Remove Credit Card Success----");try{t=JSON.parse(t)}catch(n){}if(a.removeClass("active"),void 0==t.error)if(void 0==t.resp||void 0==t.resp.data||void 0==t.resp.data.message||void 0==t.resp.success||t.resp.success){e('[data-handbid-card-row="'+i+'"]').remove(),d.notice("Your card has been deleted","Card Success","success");var o=e("#footer-credit-cards-count");if(void 0!=o){var r=parseInt(o.val())+1;o.val(r)}if(e(".select-payment-card option[data-option-val="+i+"]").remove(),0==e(".credit-card ul.simple-list li").length){var s=e(".credit-card ul.simple-list");s.after('<div class="row no-results-row"> <p style="text-align: left;">Note: Not all auctions use credit cards</p>  <label class="no-results"> You have no cards on file. </label> </div>'),s.remove(),e("[data-handbid-credit-cards-need]").attr("data-handbid-credit-cards-required",""),e(".select-payment-card").hide()}}else d.notice(t.resp.data.message,"Card Error","error");else d.notice("Something wrong. Please, try again later","Card Error","error")}),!1})},setupAddCreditCardCallback:function(t,a){addingCCState=!1;var i=currentCCForm,n=e(".bidder-info-container.credit-card ul"),o=(e('[data-handbid-modal-key="credit-card-form"] .modal-close'),i.find(".credit-card-status").eq(0)),r=!1,s="",c=!1,l="",u="Something wrong. Please, try again later";if(void 0!=a.error)r=!0,void 0!=a.error.message?(s=a.error.message,d.notice(s,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1)):(s=u,d.notice(u,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1));else if(void 0==a.card)r=!0,s=u,d.notice(u,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1);else{var h={action:"handbid_ajax_add_credit_card",stripeId:a.id,creditCardHandle:a.card.id,nameOnCard:i.find(".ccNameOnCard").val(),nonce:e("#hb-credit-card-nonce").val()},m="Card was created successfully.<br> Adding it to your profile";d.notice(m),c=!0,l=m,e.post(ajaxurl,h,function(t){try{t=JSON.parse(t)}catch(a){}if(t=t.resp,void 0==t.success||t.success||void 0==t.data||void 0==t.data.error){d.notice("Your card has been added successfully","Card Success","success");var i=e("#footer-credit-cards-count");if(void 0!=i){var r=parseInt(i.val())+1;i.val(r)}var c=e(' <li class="row" data-handbid-card-row="'+t.id+'"> <div class="col-md-3 col-xs-3"> <h4>Name</h4>'+t.nameOnCard+'</div> <div class="col-md-3 col-xs-3"> <h4>Card Number</h4> xxxx xxxx xxxx '+t.lastFour+'</div> <div class="col-md-3 col-xs-3"> <h4>Exp. Date</h4>'+t.expMonth+"/"+t.expYear+'</div> <div class="col-md-3 col-xs-3"> <a class="button pink-solid-button  loading-span-button" data-handbid-delete-credit-card="'+t.id+'"><em>Delete</em></a></div></li>'),l=e(".credit-card .no-results-row").length>0,u=e(".select-payment-card");if(u.show(),e(".select-payment-card option").removeAttr("selected"),u.append("<option data-option-val='"+t.id+"' selected='selected' value='"+t.id+"'>"+t.nameOnCard+" (xxxx xxxx xxxx "+t.lastFour+")</option>"),l){e(".credit-card .no-results-row").remove();var h=null;h=e(e(".credit-card .simple-list").length>0?".credit-card .simple-list":'<ul class="simple-list"></ul>'),h.prependTo(e(".credit-card")),c.appendTo(h)}else c.appendTo(n);var m="no-cards-on-file",p=e(".no-cards-if-no-cards");if(p.removeClass(m),e("[data-handbid-credit-cards-need]").removeAttr("data-handbid-credit-cards-required"),e('[data-handbid-modal-key="credit-card-form"] .modal-close').click(),o.removeClass("card-error").removeClass("card-success"),o.html(""),handbidLoginMain.requestToAddCCAfter(!0),ticketsPopupWasOpened){var v=d.recalculateTotalTicketsPrice();d.confirmIfUserReallyWantToBuy(d,v),ticketsPopupWasOpened=!1}}else{var f=e.map(t.data.error,function(e,t){return e.join("<br>")});s="<b>"+f.join("<br>")+"</b>",o.removeClass("card-success").addClass("card-error"),o.html(s),d.notice(s,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1)}})}i.find(".submit-cc-button").prop("disabled",!1),e(".credit-card-form-modal").removeClass("processing"),r?(o.removeClass("card-success").addClass("card-error"),o.html(s)):c?(o.removeClass("card-error").addClass("card-success"),o.html(l)):(o.removeClass("card-error").removeClass("card-success"),o.html(""))},setupAddCreditCard:function(){var t=e(".creditcard-template");t.live("submit",function(t){if(!addingCCState){addingCCState=!0;var a=e(this);currentCCForm=a,a.find(".submit-cc-button").prop("disabled",!0),e(".credit-card-form-modal").addClass("processing"),
Stripe.card.createToken(a,handbidMain.setupAddCreditCardCallback)}return!1})},showCardErrorsIfExists:function(){var t="handbid-cc-error",a=e.cookie(t);void 0!=a&&null!=a&&"null"!=a&&""!=a.trim()&&(handbidMain.notice(a,"Card Error","error"),e.removeCookie(t,{path:"/"}));var i="handbid-cc-success",n=e.cookie(i);void 0!=n&&null!=n&&"null"!=n&&""!=n.trim()&&(handbidMain.notice(n,"Card Success","success"),e.removeCookie(i,{path:"/"}))},setupProvincesSelect:function(){var t=e("#userAddressCountryId"),a=e("#userAddressProvinceId"),i=e(".provincesRow"),n=e("#provincesCountByCountry");t.live("change",function(o){var d=parseInt(t.val()),r=parseInt(n.data("current-country"));if(d!=r){var s=n.data("provinces-"+d);if(void 0!=s){var c=t.data("provinces-nonce"),l={action:"handbid_ajax_get_countries_provinces",nonce:c,countryID:d};e.post(ajaxurl,l,function(t){t=JSON.parse(t),a.find("option").remove().end().val(""),e.each(t,function(t,i){a.append(e("<option>",{value:i.value,text:i.text})),0==t&&a.val(i.value)}),i.slideDown("fast")})}else i.slideUp("fast"),a.find("option").remove().end().append('<option value="">No Provinces</option>').val("");n.data("current-country",d)}})},setupEditProfile:function(){var a=e(".edit-profile");a.on("submit",function(a){a.preventDefault();var i=e(this).serialize();return e.ajax({url:t+"bidder/update",method:"PUT",data:i,success:function(e){return d.notice("Your profile has been updated"),!1}}),!1})},setupAuthorizationStatus:function(){var t=e("#bidder-info-load"),a=t.is(":visible")&&(""!=t.html().trim()||t.hasClass("hidden-page-dashboard")),i=!(!e.cookie("handbid-auth")||!a);i===!0?(e("body").addClass("handbid-logged-in"),e(".quick-links > li").clone().appendTo("#menu-mobile-menu"),e.ajaxSetup({headers:{Authorization:e.cookie("handbid-auth").split(": ")[1]}})):e("body").addClass("handbid-logged-out")},oldNotice:function(t){d.noticeContainer=e('<div class="handbid-growl-container"></div>'),d.noticeContainer.appendTo("body"),d.noticeTemplate='<div class="handbid-growl"><div class="message">Notice Message</div></div>',t.indexOf("&")>-1&&(t=t.split("&")[0]),t=t.split("+").join(" ");var a=e(d.noticeTemplate);e(".message",a).html(t),a.appendTo(d.noticeContainer),setTimeout(function(){a.remove()},5e3)},notice:function(t,a,i,n,o){a=void 0!=a?a:"Notice Message",n=void 0==n||n,i=void 0!=i?i:"info",i="failed"==i?"error":i;var d=void 0!=o&&void 0!=o.isBidding&&o.isBidding;if(d){var r=void 0!=o.itemLink?o.itemLink:"#",s=void 0!=o.itemImage&&"/images/default_photo-75px-white.png"!=o.itemImage?o.itemImage:e("[data-default-item-image]").eq(0).val();t="<div class='col-xs-4 handbid-notice-image-container'><a href='"+r+"'><img src='"+s+"'></a></div><div class='col-xs-8 handbid-notice-text-container'><h5 class='notice-text-title'>"+a+"</h5>"+t+"</div>",a=""}var c={title:a,text:t,type:i,hide:n,mouse_reset:!1,delay:5e3,addclass:"handbid-message-notice",buttons:{sticker:!1}};"Broadcast Message"==a&&(c.icon=" glyphicon glyphicon-envelope ",c.addclass+=" handbid-broadcast-notice"),d&&(c.icon="",c.addclass+=" handbid-bidding-notice");try{return new PNotify(c)}catch(l){return this.oldNotice(t),!1}},sendInvoice:function(t,a,i){var n="Send Invoice?",o="",d="";if(i?(o="Text a link to this invoice to "+a+"?",d="Your request to Text(SMS) invoice completed."):(o="Send this invoice to "+a+"?",d="Your request to Email invoice completed."),""!=t){attentionAboutSendInv=!0;new PNotify({title:n,text:o,icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Send",addClass:"send-invoice-button",click:function(n){n.update({title:"Processing send invoice to "+a,text:'<div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:"glyphicon glyphicon-refresh gly-spin",addclass:"handbid-paddle-number-notice",hide:!1,confirm:{confirm:!1},buttons:{closer:!1,sticker:!1},history:{history:!1}});var o={action:"handbid_ajax_send_invoice",invoice_id:t,send_to:a,send_type:i?"sms":"email"};e.post(ajaxurl,o,function(e){console.log("-----------------------"),console.log("----Sending Invoice success----"),e=JSON.parse(e);var t="",a="",i="",o="";return void 0==e.errors?(t=d,a="Done",i="success",o="glyphicon glyphicon-ok"):(t=e.errors.join("<br>"),a="Failed",i="error",o="glyphicon glyphicon-remove-sign"),attentionAboutSendInv=!1,n.update({title:a,text:t,icon:o,hide:!0,type:i,delay:3e3,mouse_reset:!1,confirm:{confirm:!1},buttons:{closer:!0,sticker:!1},history:{history:!1}}),!1})}},{text:"Cancel",addClass:"cancel-sending-button",click:function(e){attentionAboutSendInv=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});bidNotice.get().on("pnotify.cancel",function(){return!1})}},showWelcomeMessage:function(e){if(""!=e.trim()){attentionAboutWelcome=!0;var t=new PNotify({title:"WELCOME!",text:e,icon:"glyphicon glyphicon-envelope small-envelope",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){attentionAboutWelcome=!1,handbidMain.fadeOutModalOverlay()},buttons:{closer:!0,sticker:!1},history:{history:!1}});t.get().on("pnotify.cancel",function(){return!1})}},setPaddleNumberAndWelcomeMessage:function(t,a){var i=e("#bidder-info-load");void 0!=a&&(e("#data-profile-current-paddle-number").html(a),i.data("profile-paddle-number",currentPaddleNumber));var n=parseInt(i.data("auction")),o=parseInt(i.data("profile-id")),d="bidder-"+o+"-has-welcome-message-"+n,r=e.cookie(d),s="yes"!=r;s&&void 0!=t&&""!=t&&(e.cookie(d,"yes",{expires:cookieExpire,path:"/"}),handbidMain.showWelcomeMessage(t))},showAreYouHereMessage:function(t){if(t){var a=e("#bidder-info-load"),i=parseInt(a.data("auction")),n=parseInt(a.data("profile-id")),o="bidder-"+n+"-has-are-you-here-message-"+i,d=e.cookie(o),r="yes"!=d;if(r&&void 0!=t&&""!=t){e.cookie(o,"yes",{expires:cookieExpire,path:"/"}),attentionAboutAreHere=!0;var s=new PNotify({title:"Are You Here?",text:t,icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Yes",addClass:"bid-here-button",click:function(t){t.update({title:"Sending your answer to auction manager",text:'<div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:"glyphicon glyphicon-refresh gly-spin",addclass:"handbid-paddle-number-notice",hide:!1,confirm:{confirm:!1},buttons:{closer:!1,sticker:!1},history:{history:!1}});var a={action:"handbid_ajax_i_am_here",auctionID:i};e.post(ajaxurl,a,function(e){return console.log("-----------------------"),console.log("----I Am Here Notification success----"),e=JSON.parse(e),attentionAboutAreHere=!1,t.update({title:"Done",text:"Thank you for this notification!",icon:"glyphicon glyphicon-ok",hide:!0,type:"success",delay:3e3,mouse_reset:!1,confirm:{confirm:!1},buttons:{closer:!0,sticker:!1},history:{history:!1}}),!1})}},{text:"No",addClass:"browse-here-button",click:function(e){attentionAboutAreHere=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){attentionAboutAreHere=!1,handbidMain.fadeOutModalOverlay()},buttons:{closer:!0,sticker:!1},history:{history:!1}});s.get().on("pnotify.cancel",function(){return!1})}}},detectIfNeedToShowAreYouHereMessage:function(){var t=e("#bidder-info-load"),a=t.data("auction-locatin-question"),i=t.data("profile-paddle-number"),n=void 0!=i&&"N/A"!=(i+"").trim();a&&n&&handbidMain.showAreYouHereMessage(a)},detectIfNeedToShowWelcomeMessage:function(){var t=e("#bidder-info-load"),a=t.data("auction-welcome-message"),i=t.data("profile-paddle-number"),n=void 0!=i&&"N/A"!=(i+"").trim();a&&n&&handbidMain.setPaddleNumberAndWelcomeMessage(a)},detectIfUserWantToBid:function(){var t=e("#bidder-info-load"),a=parseInt(t.data("auction")),i=t.data("auction-status"),n=parseInt(t.data("profile-id")),o=t.data("profile-paddle-number"),r=t.data("paddle-nonce"),s="bidder-"+n+"-just-view-auction-"+a,c=e.cookie(s),l="bidder-"+n+"-bidding-in-auction-"+a,u=e.cookie(l),h="N/A"==o&&void 0==u,m="";if("N/A"!=o&&void 0==u&&e.cookie(l,o,{expires:cookieExpire,path:"/"}),a&&n&&h&&"yes"!=c&&"closed"!=i&&"reconcile"!=i&&"reconciled"!=i){attentionAboutBidding=!0;var p=new PNotify({title:"Register to Bid?",text:"Do you want to bid in this auction or just browse for now?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Register",addClass:"bid-here-button",click:function(t){t.update({title:"Receiving the Paddle Number for this Auction",text:'<div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:"glyphicon glyphicon-refresh gly-spin",addclass:"handbid-paddle-number-notice",hide:!1,confirm:{confirm:!1},buttons:{closer:!1,sticker:!1},history:{history:!1}});var i={action:"handbid_ajax_get_paddle_number",auctionID:a,nonce:r};e.post(ajaxurl,i,function(i){console.log("-----------------------"),console.log("----Receive Paddle Number success----"),i=JSON.parse(i);var n="",o="",r="",c="";return void 0!=i.paddleId?(e("[data-paddle-for-auction-"+a+"]").html(i.paddleId),currentPaddleNumber=i.paddleId,e.cookie(l,currentPaddleNumber,{expires:cookieExpire,path:"/"}),n="Your paddle number for this auction is <b>"+i.paddleId+"</b>",o="Done",r="success",c="glyphicon glyphicon-ok",e.removeCookie(s),void 0!=i.welcomeForReceipt&&(m=i.welcomeForReceipt)):(n=i.errors.join("<br>"),o="Failed",r="error",c="glyphicon glyphicon-remove-sign"),attentionAboutBidding=!1,t.update({title:o,text:n,icon:c,hide:!0,type:r,delay:3e3,mouse_reset:!1,confirm:{confirm:!1},buttons:{closer:!0,sticker:!1},history:{history:!1}}),d.addProfileActiveAuctions(),!1})}},{text:"Browse",addClass:"browse-here-button",click:function(t){attentionAboutBidding=!1,e.cookie(s,"yes",{expires:cookieExpire,path:"/"}),t.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.showWelcomeMessage(m),""==m.trim()&&handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});p.get().on("pnotify.cancel",function(){return!1})}},detectIfUserWantToBuyTickets:function(){var t=e("#bidder-info-load"),a=e("[data-handbid-tickets]").length,i=parseInt(t.data("auction")),n=t.data("auction-status"),o=parseInt(t.data("profile-id")),d=e("[data-purchased-purchase-id]"),r=e.cookie("bidder-"+o+"-want-no-tickets-"+i),s=handbidMain.detectIfUserAlreadyHasTicketsInPurchases(d);if(i&&o&&a&&"yes"!=r&&"closed"!=n&&"reconcile"!=n&&"reconciled"!=n&&!s){attentionAboutTickets=!0;var c=new PNotify({title:"Auction Tickets",text:"Current Auction has tickets. Do you want to purchase one of them?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Yes",addClass:"bid-here-button",click:function(t){attentionAboutTickets=!1,t.remove(),e("[data-handbid-tickets]").eq(0).click()}},{text:"No, thanks",addClass:"browse-here-button",click:function(t){attentionAboutTickets=!1,e.cookie("bidder-"+o+"-want-no-tickets-"+i,"yes",{expires:cookieExpire,path:"/"}),t.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});c.get().on("pnotify.cancel",function(){return!1})}},displayRequiredCardsMessage:function(t){var a=e("div.credit-card ul").children("li.row"),i=parseInt(e("#footer-credit-cards-count").val());return!(!a.length&&!i)||(t=void 0!=t?t:"You must supply a credit card to bid in this auction.",void new PNotify({title:"Credit cards required",type:"error",text:"<b>"+t+"</b>",icon:"glyphicon glyphicon-exclamation-sign",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Add a card",addClass:"add-credit-card-button",click:function(e){handbidModalsMain.showSingleModal("credit-card-form"),e.remove()}}]},buttons:{closer:!1,sticker:!1},history:{history:!1}}))},lazyShowMoreMessages:function(t){var a=parseInt(t.data("current-chunk"))+1,i=parseInt(t.data("chunks-count")),n=e(".messages-part-"+a);n.slideDown("normal"),e(".load-less-messages").show(),t.data("current-chunk",a),a>=i&&t.hide()},lazyShowLessMessages:function(t){var a=e(".message-row"),i=e(".messages-part-0");a.hide(),i.slideDown("normal");var n=e(".load-more-messages");n.data("current-chunk",0),n.show(),t.hide()},setCircleTimer:function(t){timerTime=t;var a=1e3*t,i="#6FD57F",n="#FC5B3F";timerElements=e("[data-handbid-timer]"),timerElementsFull=e(".auction-timer-place .numbers-place");var o=document.getElementById("handbid-circle-timer-"+t);o.innerHTML="",circleTimer=new ProgressBar.Circle(o,{color:i,trailColor:"#fff",trailWidth:10,duration:a,strokeWidth:15,step:function(e,t){t.path.setAttribute("stroke",e.color)}}),handbidMain.startTimerNew(),setTimeout(function(){handbidMain.refreshTimerToAvoidMistakes()},refreshTimerInterval),circleTimer.animate(1,{from:{color:i},to:{color:n}})},startTimerNew:function(){if(timerTime--,timerTime>0){var t=(timerTime+"").toHHMMSS();e.map(timerElements,function(a){e(a).html(t.simple)}),e.map(timerElementsFull,function(a){e(a).html(t.full)}),setTimeout(function(){handbidMain.startTimerNew()},1e3)}else handbidMain.changeAuctionTimer(0,!1)},refreshTimerToAvoidMistakes:function(){timerTime>0&&(e.post(ajaxurl,{action:"handbid_ajax_auction_info",auction_guid:e("#bidder-info-load").attr("data-auction-guid")},function(e){e=parseInt(e),e&&(timerTime=e)}),setTimeout(function(){handbidMain.refreshTimerToAvoidMistakes()},refreshTimerInterval))},setTimerRemaining:function(t){var a=e("#timerRemaining");if(void 0!=a.val()){var i=parseInt(a.val());i&&t.changeAuctionTimer(i,!0)}},formatTimerTime:function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),i=e-3600*t-60*a;return i<10&&(i="0"+i),a<10&&(a="0"+a),t<10&&(t="0"+t),"000"==t&&(t="00"),"000"==a&&(a="00"),t+":"+a+":"+i},showTimerRemainingNotice:function(e,t){t=void 0!=t?" <b>"+t+"</b>":"";var a=this.formatTimerTime(e);void 0!=timerNotice?timerNotice.remove():"",timerNotice=void 0,timerNotice=d.notice("Auction "+t+"<br>closes after <b><div data-handbid-timer>"+a+"</div></b>","Closing Auction Timer"),this.changeAuctionTimer(e,!0)},changeAuctionTimer:function(e,t){var a=this.formatTimerTime(e),i='<div class="auction-timer-place"><div class="circle-place col-xs-3"><div class="handbid-circle-timer" id="handbid-circle-timer-'+e+'"></div></div><div class="numbers-place col-xs-9" id="handbid-numbers-timer-'+e+'"><div class="col-xs-4 number-cont"><em class="timer-hours-number">00</em><span>hours</span></div><div class="col-xs-4 number-cont"><em class="timer-mins-number">00</em><span>mins</span></div><div class="col-xs-4 number-cont secs-number-cont"><em class="timer-secs-number">00</em><span>secs</span></div></div></div>',n='<span class="btn btn-small btn-default toggle-timer-notice"><em class="glyphicon glyphicon-chevron-down"></em><em class="glyphicon glyphicon-chevron-up"></em></span>',d='<h3 class="notice-connection-title"><b>Auction Closes After&nbsp;&nbsp;&nbsp;&nbsp;<span data-handbid-timer>'+a+"</span></b></h3>"+n;void 0!=timerMessage&&"out"==timerMessage.animating&&(timerMessage=void 0),t?void 0==timerMessage?(timerMessage=new PNotify({title:d,type:"error",text:i,icon:"",addclass:"handbid-message-notice handbid-timer-top-notice  stack-bar-top",cornerclass:"",width:"100%",stack:o,hide:!1,mouse_reset:!1,buttons:{closer:!1,sticker:!1},history:{history:!1}}),this.setCircleTimer(e)):(timerMessage.update({title:d,text:i}),this.setCircleTimer(e)):void 0!=timerMessage&&timerMessage.update({title:'<h3 class="notice-connection-title"><b>Auction Closed</b></h3>',text:"",hide:!0,delay:5e3,before_close:function(){handbidMain.loadAllToContainers()}})},showExpiredNotice:function(){var t=new PNotify({title:"Session Expired",text:"Your user session has expired. Please, relogin.",icon:"glyphicon glyphicon-off",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,delay:3e3,confirm:!1,stack:!1,before_open:function(t){t.get().css({top:e(window).height()/2-t.get().height()/2-80,left:e(window).width()/2-t.get().width()/2}),reload_overlay?reload_overlay.fadeIn("fast"):reload_overlay=e("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",background:"rgba(0, 0, 0, 0.7)",top:"0",bottom:"0",right:"0",left:"0","z-index":"9999"}}).appendTo("body").fadeIn("fast")},before_close:function(){reload_overlay.fadeOut("fast"),location.reload()},buttons:{closer:!0,sticker:!1},history:{history:!1}});t.get().on("pnotify.cancel",function(){return!1})},reloadBidderProfile:function(){var t=jQuery("#bidder-info-load"),a=parseInt(t.data("auction"));void 0!=t.html()&&""!=t.html().trim()&&(a?e.post(ajaxurl,{action:"handbid_profile_load",auction:t.data("auction"),nonce:t.data("load")},function(a){if(""!=t.html().trim()&&""==a.trim());else{t.html(a);var i=t.data("auction");void 0!=currentPaddleNumber&&""!=i.trim()&&(t.data("profile-paddle-number",currentPaddleNumber),e("[data-paddle-for-auction-"+i+"]").html(currentPaddleNumber)),t.slideDown("normal"),d.setupAddCreditCard(),d.setupProvincesSelect(),d.loadAllToContainers()}}):(d.setupAddCreditCard(),d.setupProvincesSelect(),d.loadAllToContainers())),d.applyBidConfirmationChecking(),e(".creditcard-template").length>0?d.setupAddCreditCard():""},applyBidConfirmationChecking:function(t){e("#bidConfirmationsEnabled").live("change",function(t){var a=e(this).val(),i=parseInt(e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id")),n=i+"_bid_confirmations";e.cookie(n,a,{expires:cookieExpire,path:"/"})})},checkIfWantToShowBidConfirmation:function(){var t=parseInt(e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id")),a=t+"_bid_confirmations",i=e.cookie(a),n=void 0==i||"yes"==i;return n=0!=t&&void 0!=t&&n},redirectFromResetedAuctions:function(t){var a=e("#bidder-info-load"),i=parseInt(a.data("auction")),n=parseInt(a.data("profile-id")),o="bidder-"+n+"-has-welcome-message-"+i,d="bidder-"+n+"-has-are-you-here-message-"+i;e.cookie(o,"no",{expires:cookieExpire,path:"/"}),e.cookie(d,"no",{expires:cookieExpire,path:"/"}),window.location="/auctions/?auction-reset"},redirectFromResetedAuctionsCheck:function(){e("[data-auction-reset-sign]").length>0&&this.notice("<b>This auction has been reset, please select another one</b>","Auction Reset","info")},detectIfNeedToContinuePayment:function(){e("[data-auction-continue-payment-sign]").length>0&&setTimeout(function(){var t=parseInt(e("[data-auction-continue-payment-sign]").eq(0).val());handbidMain.proposeToContinuePayInvoice(t)},3e3)},checkSocketConnection:function(e){i+=i,!connectedToSocket&&i<=n?void 0==connectMessage&&(connectMessage=new PNotify({title:'<h3 class="notice-connection-title"><b>Unable to connect for real-time updates</b><span class="notice-connection-switch">?</span></h3>',type:"error",text:'<div class="notice-connection-tip">Handbid uses a live connection to the server to update auction items, bids and stats. When it can\'t connect to this live connection, this message will appear. You can still bid on items, but you may need to refresh your browser page to see if any prices have changed. Please click on the chat/help tab below to let us know this message exists. It is likely that your Internet service provider is blocking our connection, but we will look into it! Happy Bidding!</div>',icon:"",addclass:"handbid-message-notice handbid-no-connection-notice notice-collapsed stack-bar-top",cornerclass:"",width:"100%",stack:o,hide:!1,mouse_reset:!1,buttons:{closer:!1,sticker:!1},history:{history:!1}})):void 0!=connectMessage&&(connectMessage.remove(),connectMessage=void 0),setTimeout(function(){e.checkSocketConnection(e,i)},3e3)},changeBackgroundImageIfElementIsVisible:function(){e("[data-backgroung-image-url].without-image").each(function(){var t=e(this).visible("complete");if(t){var a=e(this).data("backgroung-image-url");""!=a.trim&&e(this).attr("style","background-image: url('"+a+"');"),e(this).removeClass("without-image")}})},updateUserProfile:function(t){var a=e(".edit-profile input, .edit-profile select"),i=e("[data-profile-form-password]").eq(0),n=e("[data-profile-form-password-confirm]").eq(0),o={};e("[data-profile-form-field]").each(function(){var t=e(this),a=t.attr("name"),i=t.attr("id"),n=e("#"+i+"Old"),d=t.val(),r=n.val();d!=r&&(o[a]=d)}),""!=i.val().trim()?i.val().trim()!=n.val().trim()?(i.addClass("required-error"),n.addClass("required-error")):(i.removeClass("required-error"),n.removeClass("required-error"),o.password=i.val().trim()):(i.removeClass("required-error"),n.removeClass("required-error")),e.isEmptyObject(o)||(console.log(o),t.addClass("active"),a.attr("disabled","disabled"),o.action="handbid_ajax_update_profile",e.post(ajaxurl,o,function(i){if(console.log("----Profile Updating success----"),i=JSON.parse(i),void 0!=i.id){var n=i.firstName.substring(0,1).toUpperCase()+". "+i.lastName.substring(0,1).toUpperCase()+i.lastName.substring(1);e(".profile-user-info span").html(n),e.map(o,function(t,a){var i=e('[data-profile-form-field][name="'+a+'"]'),n=i.attr("id"),o=e("#"+n+"Old");o.val(t)}),handbidMain.notice("Your Profile was successfully updated","Profile Updated","success"),address_to_pay_receipt&&(e('[data-slider-nav-key="see-my-receipt"]').click(),handbidMain.loadInvoicesToContainer(null,address_to_pay_receipt)),address_to_pay_receipt=null;var d=e("#profileShippingAddress").val();e("#hb-required-profile-address").val(d),e("#profile-shipping-address").val(d)}else handbidMain.notice("Your Profile was not updated. Please try later","Profile Error","error"),address_to_pay_receipt=null;t.removeClass("active"),a.removeAttr("disabled")}))},setupTicketsPurchasingViaLoginPopup:function(){e('[data-handbid-tickets="open-button"]').click(function(){handbidLoginMain.displaySpecifiedTabOfLoginPopup("purchase-tickets");var t=e("[data-profile-current-paddle-number]").html();e(".reg-paddle-number").html(t),e(".handbid-login-modal").modal("show"),e(".handbid-login-modal .tickets-container.purchase-container").addClass("loading");var a=e("#bidder-info-load").attr("data-auction-guid");console.log("!!!%%%%%%%%%%%%%%%%%%%%%%%%%!!!!!!!!!"),console.log(a),e.post(ajaxurl,{action:"handbid_ajax_get_auction_ticketing",auctionGuid:a},function(e){e=JSON.parse(e);var t=handbidLoginMain.getBidderCreditCards(e.data),a=handbidLoginMain.getAuctionTickets(e.data),i=handbidLoginMain.getAuctionPremiumCoefficient(e.data);handbidLoginMain.addCreditCardsToPayForTickets(t),handbidLoginMain.goToResultWindowDependsOnTickets(a,i,!0),handbidLoginMain.getTicketsForAuction()})})}};e(document).ready(function(){handbidMain=d,t=e("#apiEndpointsAddress").val(),d.setupAuthorizationStatus(),d.initializePaymentButtons(),d.detectIfUserWantToBuyTickets(),d.detectIfUserWantToBid(),d.redirectFromResetedAuctionsCheck(),d.detectIfNeedToContinuePayment(),d.changeBackgroundImageIfElementIsVisible(),setTimeout(function(){d.detectIfNeedToShowAreYouHereMessage()},1e3),setTimeout(function(){d.detectIfNeedToShowWelcomeMessage()},2e3),setTimeout(function(){d.checkSocketConnection(d)},1e4),e("[data-handbid-item-key], [data-no-bids], [data-tags]").length>0&&e("body").addClass("enable-handbid-fatal-error");var a=window.location.href;a.indexOf("handbid-notice")>-1&&d.notice(window.location.href.split("handbid-notice=")[1]),e(".bidder-info-container").length>0?d.setupBidderDashboard():"",d.setupDeleteCreditCard(),e("[data-handbid-connect]").length>0?d.setupConnect():"",d.setupTutorialPopup(),e("[data-handbid-bid]").length>0||e(".handbid-list-of-bids-proxy").length>0?d.setupBidding(d):"",d.setTimerRemaining(d);var i=!1;i?d.reloadBidderProfile():(d.setupAddCreditCard(),d.setupProvincesSelect(),d.loadAllToContainers()),d.showCardErrorsIfExists(),d.setupTicketsPurchasingViaLoginPopup(),e(".handbid-logout a, a.handbid-logout-link").live("click",function(t){t.preventDefault();var a=e(this).attr("href"),i=new PNotify({title:"Logout Confirmation",text:"Are you sure want to logout?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0},buttons:{closer:!1,sticker:!1},history:{history:!1}});i.get().on("pnotify.confirm",function(){e.removeCookie("handbid-auth",{path:"/"}),window.location=a}).on("pnotify.cancel",function(){return!1})}),e(".notice-connection-switch").live("click",function(t){t.preventDefault(),e(".notice-connection-tip").slideToggle("normal"),e(".handbid-no-connection-notice").toggleClass("notice-collapsed")}),e(".toggle-timer-notice").live("click",function(t){t.preventDefault(),e(".handbid-timer-top-notice").toggleClass("notice-collapsed")}),e("[data-toggle-invoice-link]").live("click",function(t){t.preventDefault();var a=e(this).data("toggle-invoice-link");e(this).toggleClass("opened-invoice"),e("[data-receipt-block-id="+a+"] .invoice-details-container").slideToggle("normal")}),e("[data-toggle-invoice-more-link]").live("click",function(t){t.preventDefault();var a=e(this).data("toggle-invoice-more-link");e(this).toggleClass("opened-invoice"),e("[data-receipt-block-id="+a+"] .invoice-more-details-container").slideToggle("normal")}),e(".load-more-messages").live("click",function(t){t.preventDefault();var a=e(this);d.lazyShowMoreMessages(a)}),e(".load-less-messages").live("click",function(t){t.preventDefault();var a=e(this);d.lazyShowLessMessages(a)}),e(".global-footer").prepend("<span class='toggle-info'>Show Footer Info</span>"),e(".global-footer span.toggle-info").live("click",function(t){t.preventDefault(),e(".global-footer").toggleClass("show-all")}),e('[data-slider-nav-id="auction-details"]').live("click",function(e){d.clickOnFiltersToReorder()}),e(".map-holder-item").live("click",function(e){mapsAreActivated||auctionGoogleMapsInit()}),e("#updateUserProfile").live("click",function(t){t.preventDefault(),handbidMain.updateUserProfile(e(this))})})}(jQuery);var timerForSearch,timerToLoad,isotopeWasFiltered=!1,wasNotVisible=!0,needToMoveToItem=!1,checkIS,currentlyFilteringByCat=null;!function(e){function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function a(){return p||(p=e(".item-list").isotope({itemSelector:".simple-box",layoutMode:"masonry",getSortData:g,sortAscending:h,sortBy:m,masonry:{columnWidth:".sizer"}})),!0}function i(){var t=e("[data-handbid-item-box]:visible").length;0==t?e(".message-no-isotope-results").fadeIn("slow"):e(".message-no-isotope-results").fadeOut("fast"),o()}function n(){void 0!=timerForSearch&&(timerForSearch=void 0),timerForSearch=setTimeout(i,1e3)}function o(){void 0!=timerToLoad&&(timerToLoad=void 0),isotopeWasFiltered=!0,timerToLoad=setTimeout(d,2e3)}function d(){r(),isotopeWasFiltered&&handbidMain.changeBackgroundImageIfElementIsVisible()}function r(){if(wasNotVisible){var t=e('.container[data-slider-nav-key="items"]'),a=t.is(":visible");if(a){var i=handbidMain.getCategoryForInitialFilter();if(void 0!=i&&"all"!=i){var n=e('.by-category li[data-legacy-category-id="'+i+'"]'),o=e(".by-category li[data-selector]");if(n.length){o.removeClass("selected"),n.addClass("selected");var d=n.attr("data-selector"),r="category";"*"===d?delete v[r]:v[r]=d}}c(),wasNotVisible=!1,setTimeout(function(){handbidMain.goBackToItem(),needToMoveToItem=!1},500)}}}function s(){var a,i=[];return e.each(v,function(e,t){i.push(t)}),a=i.join(""),p&&(p.isotope({sortAscending:h,sortBy:m,filter:function(){if(f){var i=new RegExp(t(f),"i"),n=e(this).html();if(i&&n&&!i.test(n))return!1}return!a||matchesSelector(this,a)}}),n()),!0}function c(){p?s():a()&&s()}function l(t){var a=!1;if(currentlyFilteringByCat!=t&&(a=!0,currentlyFilteringByCat=t),t&&auction_categories_ids&&(auction_categories_ids[t]||"all"==t)){a=!0,"all"==t?auction_categories_ids=null:delete auction_categories_ids[t];var i=e("#bidder-info-load").attr("data-auction"),n={action:"handbid_ajax_get_item_boxes_by_category",auctionId:i,catId:t};e.post(ajaxurl,n,function(t){var a=e(t);e(".simple-box-row.item-list.isotope").append(a).isotope("addItems",a),c()})}return a}e(document).ready(function(){e(".sticky").each(function(t,a){var i,n=e("> *",a)[0],o=!1,d=0,r=e(window).scrollTop(),s=e(a).attr("data-sticky-margin-top");s=s?parseInt(s):0,s=e("body").hasClass("handbid-logged-in")?s+94:s,e(window).scroll(function(){var t,c=e(window).scrollTop(),l=e(a).position().top-s,u=e(".global-footer").position().top-3,h=e(n).is(":visible"),m=c-r;if(!h||document.body.clientWidth<=992||e('.slider-nav[data-slider-nav-id="bidder-dashboard"]').has(".active-slide").length)return e(n).css({position:"",top:"",marginTop:"",width:"",height:"",zIndex:"",backgroundColor:""}),d=0,e(n).removeClass("sticking"),e(a).css({height:""}),void(o=!1);if(i=e(n).height()+parseInt(e(n).css("padding-top"))+parseInt(e(n).css("padding-bottom")),c>=l&&!o?(o=!0,e(a).height(i),e(n).css({position:"fixed",top:s+"px",transition:"none",width:e(n).width()+"px"}),e(n).addClass("sticking")):o&&c<l&&(e(n).css({position:"",top:"",marginTop:"",width:"",height:"",zIndex:"",backgroundColor:""}),d=0,e(n).removeClass("sticking"),e(a).css({height:""}),o=!1),o){var p=e(window).height();i+=s,(0!==d||i>p)&&(d+i>p&&m>0?d-=m:m<0&&d<0&&(d-=m),d>0?d=0:d<p-i&&(d=p-i)),t=c+d+i,t>u&&(d-=t-u),e(n).css({marginTop:d+"px"})}r=c})})});var u,h,m,p,v={},f=!1,b=500,g={name:function(t){return e("h3 .nameLowerCase",t).html()},price:function(t){return parseInt(e(".currentItemPrice",t).html().replace("$",""))},bids:function(t){return parseInt(e(".bids em",t).html())}};window._sortNameAsc=function(){h=!0,m="name"},window._sortNameDesc=function(){h=!1,m="name"},window._sortPriceAsc=function(){h=!0,m="price"},window._sortPriceDesc=function(){h=!1,m="price"},window._sortBidsAsc=function(){h=!0,m="bids"},window._sortBidsDesc=function(){h=!1,m="bids"},window._sortNameAsc(),e(document).ready(function(){var t=!0;if(e('.slider-nav [data-slider-nav-key="items"]').on("click",function(){var t=e(".sticky-for-sort-bar").offset().top;e(window).scrollTop()>t&&e("html, body").animate({scrollTop:t},500)}),e(window).scroll(d),e(".fancy-search .query").on("keydown",function(a){var i=a.charCode||a.keyCode;if(13!=i||!e(this).hasClass("categories-query")){u&&clearTimeout(u);var n=function(){f=e(this).val(),t=!1,e('.filters .section [data-selector="*"] a').click(),t=!0,c()}.bind(this);if(13===i)return n(),!1;u=setTimeout(n,b)}}),e(".fancy-search .query").on("keyup",function(){var t=e(this).val();t&&0!==t.length?e(".fancy-search .reset").show():e(".fancy-search .reset").hide()}),e(".fancy-search .reset").on("click",function(t){t.preventDefault(),e(".fancy-search .query").val(""),f=!1,e(this).hide(),c()}),e('select[name="sort"], select[name="mobile-sort"]').on("change",function(){
var t=e(this).val();window[t]?(window[t](),c()):console.log("not found",t)}),e(".filters .section").each(function(a,i){var n=e(i).attr("data-section");e("[data-selector] a",i).on("click",function(a){a.preventDefault(),e("[data-selector]",i).removeClass("selected"),e(this).parent().addClass("selected");var o=e(this).parent().attr("data-selector");"*"===o?delete v[n]:v[n]=o;var d=!1;if("category"==n){var r=e(this).parent().attr("data-legacy-category-id");d=l(r)}t&&!d&&(e(".fancy-search .query").val(""),f=!1,c())})}),e('select[name="mobile-type"], select[name="mobile-category"]').on("change",function(){var a=e(this).val(),i=e(this).attr("name").split("-")[1];"*"===a?delete v[i]:v[i]=a;var n=!1;if("category"==i){var o=e('select[name="mobile-category"] option:selected').attr("data-legacy-category-id");n=l(o)}t&&!n&&(e(".fancy-search .query").val(""),f=!1,c())}),setTimeout(function(){var t=e("ul.by-category li.selected a")[0];void 0!=t&&t.click()},3500),e('[data-slider-nav-key="items"]').on("click",function(e){e.preventDefault(),c()}),e('[data-slider-nav-key="items"]').on("click",function(e){e.preventDefault(),c()}),window.location.hash){var a=e('[data-slider-nav-key="items"]').offset();void 0!=a&&(needToMoveToItem=!0,setTimeout(function(){e("html, body").animate({scrollTop:a.top+50},50),setTimeout(function(){r()},100)},500))}e(window).scroll(function(){r()})}),e(window).load(function(){a(),c()})}(jQuery),function(e){e(document).ready(function(){e("[data-tooltip-wrapper]").on("hover",function(){e(this).addClass("simple-tooltip-showing")}),e("[data-tooltip-wrapper]").on("click",function(){var t=e(this).attr("data-tooltip-delay"),a=e(this);e(this).attr("tooltip-clicked",!0),void 0==t&&(t=3e3),e(this).addClass("simple-tooltip-showing"),setTimeout(function(){a.removeClass("simple-tooltip-showing"),a.removeAttr("tooltip-clicked")},t)}),e("[data-tooltip-wrapper]").on("mouseleave",function(){void 0==e(this).attr("tooltip-clicked")&&e(this).removeClass("simple-tooltip-showing")})})}(jQuery);var handbidLoginMain,cookieExpire=7;!function(e){var t=[],a=0,i=[],n=null,o=null,d={displaySpecifiedTabOfLoginPopup:function(t,a){var i=e(".active-container").eq(0),n=e("[data-tab-name="+t+"]");if(0!=n.length&&(e(".errorsRow").hide(),i.removeClass("active-container").slideUp("fast"),n.addClass("active-container").slideDown("fast")),"purchase-tickets"==t){var o=e(".tickets-container.loading-tickets-container").eq(0).html().trim();""!=o&&void 0==a||d.getTicketsForAuction()}"process-payment"==t&&d.loadResultTicketsWithDiscount(),"process-success"==t&&d.checkIfOnAuctionPage()},registerFieldsValidation:function(t){var a,i,n,o,r=!0,s=e("[data-tab-name="+t+"] .errorsRow").eq(0),c=e("[data-tab-name="+t+"] .errorsContainer").eq(0);return c.html(""),e("[data-tab-name="+t+"] input[required]").each(function(){a=e(this),i=a.attr("type"),""==a.val().trim()||"checkbox"==i&&!a.is(":checked")?(c.append(a.data("required-message")+"<br>"),a.addClass("validation-error"),r=!1):a.removeClass("validation-error")}),e("[data-tab-name="+t+"] input.is-email").each(function(){a=e(this),""==a.val().trim()||d.validEmail(a.val())?a.removeClass("validation-email-error"):(a.addClass("validation-email-error"),c.append(a.data("not-email-message")+"<br>"),r=!1)}),"register-form"==t&&(n=e("#reg-password"),o=e("#reg-password-confirm"),n.val()!=o.val()?(c.append(o.data("mismatch-message")+"<br>"),n.addClass("validation-mismatch-error"),o.addClass("validation-mismatch-error"),r=!1):(n.removeClass("validation-mismatch-error"),o.removeClass("validation-mismatch-error"))),r?s.slideUp("normal"):s.slideDown("normal"),r},restoreInitialTabState:function(){this.displaySpecifiedTabOfLoginPopup("login-form"),e(".cleanable-input").val(""),e(".to-hide-block").hide(),e(".validation-error").removeClass("validation-error")},copyToConfirmField:function(t){var a=t.data("copy-to");e("#"+a).val(t.val())},getPhoneNumber:function(e){return e.replace(/\D+/g,"")},validEmail:function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},setPaddleNumberToContainer:function(t,a){o=a;var i=e("#reg-complete-have-paddle-number");if(t){var n=e("#reg-complete-auction"),d=e(".reg-paddle-number"),r=e("#confirm-add-to-auction-name").val(),s=e("#confirm-add-to-auction-id").val(),c="bidder-"+a+"-bidding-in-auction-"+s;n.html(r),d.html(t),i.show(),e.cookie(c,t,{expires:cookieExpire,path:"/"})}else i.hide()},setAuctionKeysToButtons:function(){var t=e("[data-handbid-modal-key='login-modal'] .modal-close").eq(0),a=e("#confirm-add-to-auction-slug").val(),i=e(".start-bidding-button");void 0!=a&&""!=a.trim()||void 0==currentAuctionKey||(a=currentAuctionKey);var n="/auctions/"+a;i.attr("href",n),t.attr("data-reload-href",n)},goToResultWindowDependsOnTickets:function(e,i,n){var o="register-complete";t=e,a=i,void 0!=e&&(o=e.length?"purchase-tickets":"process-success"),n||d.displaySpecifiedTabOfLoginPopup(o)},getAuctionTickets:function(e){var t=[];return void 0!=e.auctionTickets&&(t=e.auctionTickets),void 0!=e.ticketing&&(t=e.ticketing.auctionTickets),t},getBidderCreditCards:function(e){var t=[];return void 0!=e.creditCards&&(t=e.creditCards),void 0!=e.ticketing&&(t=e.ticketing.creditCards),t},getAuctionPremiumCoefficient:function(e){var t=0;return void 0!=e.auctionPremium&&(t=e.auctionPremium),void 0!=e.ticketing&&(t=e.ticketing.auctionPremium),t},setShippingAddressAfterLogin:function(t){void 0!=t.shippingAddress&&e("#hb-required-profile-address").val(t.shippingAddress)},tryToLogin:function(t){var a=e("#hb-login-form-action").val(),i=e("#hb-login-form-username").val(),n=e("#hb-login-form-password").val(),o=e("#login-add-to-auction").val(),r=e("#hb-login-form-nonce").val(),s=e("#hb-login-form-redirect").val(),c=e(".isCurrentlyLoggingIn"),l=e("[data-handbid-modal-key='login-modal'] .errorsRow");d.validEmail(i)||(i=d.getPhoneNumber(i)),t.addClass("active"),c.slideDown(),l.slideUp("normal"),e.post(ajaxurl,{action:a,username:i,password:n,auctionGuid:o,nonce:r},function(e){if(e=JSON.parse(e),t.removeClass("active"),e.success){l.slideUp("normal");var a=e.resp.data;if(void 0!=a.auctionTickets||void 0!=a.ticketing){var i=handbidLoginMain.getBidderCreditCards(a),n=handbidLoginMain.getAuctionTickets(a),o=handbidLoginMain.getAuctionPremiumCoefficient(a);handbidLoginMain.setShippingAddressAfterLogin(a),d.setAuctionKeysToButtons(),d.setPaddleNumberToContainer(a.currentPaddleNumber,a.identity),d.addCreditCardsToPayForTickets(i),d.goToResultWindowDependsOnTickets(n,o)}else c.children("h3").html("Successfully Logged In. Redirecting"),window.location=s}else c.slideUp(),l.slideDown("normal")})},tryToRegister:function(t){var a=e("#hb-reg-form-action").val(),i=e("#confirm-firstname").val(),n=e("#confirm-lastname").val(),o=e("#confirm-password").val(),r=e("#confirm-email").val(),s=e("#confirm-address").val(),c=e("#confirm-phone-code").val(),l=d.getPhoneNumber(e("#confirm-phone-number").val()),u=e("#confirm-phone-type").val(),h=e("#confirm-add-to-auction").val(),m=e("#confirm-add-to-auction-slug").val(),p=e("#confirm-add-to-auction-name").val(),v=e("#hb-reg-form-nonce").val(),f=e("[data-tab-name='register-form-confirm'] .errorsRow").eq(0),b=e("[data-tab-name='register-form-confirm'] .errorsContainer").eq(0);t.addClass("active");var g={action:a,firstname:i,lastname:n,password:o,email:r,shippingAddress:s,countryCode:c,mobile:l,deviceType:u,auctionGuid:h,auctionSlug:m,auctionName:p,nonce:v};e.post(ajaxurl,g,function(a){if(a=JSON.parse(a),t.removeClass("active"),a.success){var i=a.profile.data;f.hide(),b.html("");var n=e("#reg-complete-name");n.html(a.values.firstname+" "+a.values.lastname),d.setAuctionKeysToButtons(),d.setPaddleNumberToContainer(i.currentPaddleNumber,i.identity);var o=e("#reg-complete-add-card"),r=o.hasClass("add-new-cc-to-register");d.requestToAddCCAfter(!r);var s=handbidLoginMain.getBidderCreditCards(i),c=handbidLoginMain.getAuctionTickets(i),l=handbidLoginMain.getAuctionPremiumCoefficient(i);handbidLoginMain.setShippingAddressAfterLogin(i),d.addCreditCardsToPayForTickets(s),d.goToResultWindowDependsOnTickets(c,l)}else f.show(),b.html(a.error)})},updateProfileShippingAddress:function(t){if(!t.hasClass("active")){var a=e("#profile-shipping-address"),i=a.val();""==i.trim()?a.addClass("input-error"):(a.removeClass("input-error"),t.addClass("active"),e.post(ajaxurl,{action:"handbid_ajax_update_shipping_address",address:i},function(a){t.removeClass("active"),e("#hb-required-profile-address").val(i),e("#profileShippingAddress").val(i),e("#profileShippingAddressOld").val(i),d.displaySpecifiedTabOfLoginPopup("process-payment"),d.payForTicketsAllCard(e("#hb-tickets-make-payment"))}))}},resendPasswordLink:function(t){var a=e("#emailOrPhoneToResetPass").val();d.validEmail(a)||(a=d.getPhoneNumber(a));var i=t.data("change-pass-nonce"),n=e("[data-tab-name='forgot-pass'] .errorsRow");t.addClass("active"),e.post(ajaxurl,{action:"handbid_ajax_reset_password",emailOrPhone:a,nonce:i},function(e){e=JSON.parse(e),t.removeClass("active"),e.success?(n.slideUp("normal"),d.displaySpecifiedTabOfLoginPopup("forgot-pass-sent")):n.slideDown("normal")})},sendTextLinkSms:function(t){var a=e("#confirm-add-to-auction-id").val();t.addClass("active"),e.post(ajaxurl,{action:"handbid_ajax_send_text_link",auctionId:a},function(e){t.removeClass("active")})},checkDiscountCode:function(t){if(!t.hasClass("active")){i=[];var a=handbidLoginMain.recalculateTotalTicketsPrice(),n=e.map(a,function(e){return e.id}),o=e(".discount-block .form-inline"),d=e(".discount-applied.discount-success"),r=e(".discount-applied.discount-error"),s=e("#confirm-purchasing-discount"),c=e("#confirm-purchasing-subtotal"),l=e("#confirm-purchasing-surcharges"),u=e("#confirm-purchasing-premium"),h=e("#confirm-purchasing-total"),m=e(".tickets-full-price"),p=e("#discount-code"),v=p.val();""!=v.trim()?(p.removeClass("input-error"),t.addClass("active"),e.post(ajaxurl,{action:"handbid_ajax_check_discount_code",ticketIds:n,discountCode:v},function(n){try{n=JSON.parse(n)}catch(p){}if(n.success){var f=0;i=n.apply,e.map(n.apply,function(t){var i=parseInt(t.ticketId);e.map(a,function(e){return e.id==i&&(f+=e.quantity*t.amount),e.id})}),s.html(f);var b=parseFloat(c.html()),g=parseFloat(l.html()),y=parseFloat(u.attr("data-premium")),k=(b-f+g)*y/100,C=k+b-f+g;u.html(k),h.html(C),m.html(C),handbidLoginMain.placeCurrentTotalToTotalPlaces(),r.slideUp("fast"),o.slideUp("fast"),d.slideDown("fast")}else{var I="The code "+v.toUpperCase()+" was not applied due to the following reason: "+n.reason;r.html(I),r.slideDown("fast")}t.removeClass("active")})):p.addClass("input-error")}},requestToAddCC:function(){handbidModalsMain.showSingleModal("credit-card-form")},requestToAddCCAfter:function(t){var a=e("#reg-complete-start-bidding"),i=e("#reg-complete-add-card");t?i.hide():i.show(),t?a.show():a.hide()},getTicketsForAuction:function(){var i=e(".tickets-on-register .tickets-container"),n=e("#login-add-to-auction-currency-code").val(),o=e("#login-add-to-auction-currency-symbol").val();e("[data-handbid-tickets-quantity]").html(0),e("[data-handbid-tickets-total]").html(0),i.html(),i.addClass("loading"),e.post(ajaxurl,{action:"handbid_ajax_get_auction_tickets_template",tickets:t,premium:a,currencyCode:n,currencySymbol:o},function(e){i.removeClass("loading"),i.html(e),t.length&&d.setupTicketsPurchasing()})},addCreditCardsToPayForTickets:function(t){var a=e("#tickets-payment-card"),i="no-cards-on-file",n=e(".no-cards-if-no-cards");a.html(),void 0!=t&&t.length?(e.map(t,function(e){a.append("<option data-option-val='"+e.id+"' value='"+e.id+"'>"+e.nameOnCard+" (xxxx xxxx xxxx "+e.lastFour+")</option>")}),n.removeClass(i)):n.addClass(i)},checkIfOnAuctionPage:function(){var t=e(".block-only-for-auction"),a=e(".block-for-all-pages"),i=e("#confirm-add-to-auction-id").val(),n="col-md-offset-4";i?(t.show(),a.removeClass(n)):(t.hide(),a.addClass(n))},placeCurrentTotalToTotalPlaces:function(){var t=e("#confirm-purchasing-total").html();t=handbidMain.number_format(t,2,".",""),e("#confirm-purchasing-total, .tickets-full-price").html(t)},loadCheckedTicketsForConfirmation:function(){var t=e(".confirmed-tickets-container"),i=e("#login-add-to-auction-currency-code").val(),n=e("#login-add-to-auction-currency-symbol").val(),o=d.recalculateTotalTicketsPrice();t.html(),t.addClass("loading"),e.post(ajaxurl,{action:"handbid_ajax_get_confirmed_tickets_template",tickets:o,premium:a,currencyCode:i,currencySymbol:n},function(e){t.removeClass("loading"),t.html(e),handbidLoginMain.placeCurrentTotalToTotalPlaces()})},loadResultTicketsWithDiscount:function(){var t=e(".result-tickets-container"),a=e("#login-add-to-auction-currency-code").val(),n=e("#login-add-to-auction-currency-symbol").val(),o=d.recalculateTotalTicketsPrice();t.html(),t.addClass("loading"),e.post(ajaxurl,{action:"handbid_ajax_get_result_tickets_template",tickets:o,discounts:i,currencyCode:a,currencySymbol:n},function(e){t.removeClass("loading"),t.html(e)})},recalculateTotalTicketsPrice:function(){var t=0,a=0,i=e("#hb-purchase-tickets-next"),n=e.map(e("[data-handbid-ticket-row]"),function(i,n){var o=e(i),d=e("[data-handbid-ticket-quantity]",o).eq(0),r=parseInt(d.html()),s=parseInt(o.data("handbid-ticket-row")),c=parseFloat(e("[data-handbid-ticket-buynow]",o).eq(0).html()),l=parseFloat(e("[data-handbid-ticket-surcharge]",o).eq(0).val()),u=e("[data-handbid-ticket-surcharge-name]",o).eq(0).val(),h=e("[data-handbid-ticket-title]",o).eq(0).html(),m=e("[data-handbid-ticket-description]",o).eq(0).html();return t+=r*c,a+=r,r>0?{id:s,price:c,quantity:r,name:h,surcharge:l,surchargeName:u,description:m}:null});return t=handbidMain.number_format(t,2,".",""),e("[data-handbid-tickets-total]").html(t),e(".tickets-full-price").html(t),handbidLoginMain.placeCurrentTotalToTotalPlaces(),e("[data-handbid-tickets-quantity]").html(a),n.length?i.removeAttr("disabled"):i.attr("disabled","disabled"),n},setupTicketsPurchasing:function(){e('[data-handbid-ticket-button="up"]').on("click",function(t){t.preventDefault();var a=e(this).parents(".ticket-part-container").eq(0),i=e("[data-handbid-ticket-button='down']",a).eq(0),n=e("[data-handbid-ticket-quantity]",a).eq(0),o=e("[data-handbid-tickets-remaining]",a).eq(0),d=parseInt(n.html()),r=o.val(),s=parseInt(o.val()),c=d+1;(c<=s||"-1"==r||"∞"==r)&&(n.html(c),handbidLoginMain.recalculateTotalTicketsPrice(),i.removeClass("ghosted-out"),c+1>s&&"-1"!=r&&"∞"!=r&&e(this).addClass("ghosted-out"))}),e('[data-handbid-ticket-button="down"]').on("click",function(t){t.preventDefault();var a=e(this).parents(".ticket-part-container").eq(0),i=e("[data-handbid-ticket-button='up']",a).eq(0),n=e("[data-handbid-ticket-quantity]",a).eq(0),o=parseInt(n.html()),d=o-1;d>=0&&(n.html(d),handbidLoginMain.recalculateTotalTicketsPrice(),i.removeClass("ghosted-out"),d-1<0&&e(this).addClass("ghosted-out"))})},purchaseTickets:function(t){n=d.recalculateTotalTicketsPrice();var a=e(".pay-for-purchased-containers"),i=e("#confirm-add-to-auction-id").val(),r=o;a.addClass("loading");var s={action:"handbid_ajax_buy_tickets",userId:r,auctionId:i,items:n};e.post(ajaxurl,s,function(e){a.removeClass("loading"),t()})},payForTicketsAllCard:function(t){if(!t.hasClass("active")){var a=parseInt(e("#hb-auction-requires-address").val()),r=e("#hb-required-profile-address").val();if(a&&""==r.trim())return d.displaySpecifiedTabOfLoginPopup("add-shipping-address"),!1;var s=e("#confirm-add-to-auction-id").val(),c=e("#tickets-payment-card"),l=e("#tickets-payment-card option:selected").text(),u=c.val(),h=e("span[data-card-number]");h.html(l);var m="process-success",p=e(".process-message-error");if(u){t.addClass("active");var v=[];null==n&&(n=d.recalculateTotalTicketsPrice(),v=n),e.map(i,function(t){var a=parseInt(t.ticketId);e.map(v,function(e,i){e.id==a&&(v[i].discountId=t.discountId)})});var f=o?o:e("#bidder-info-load").attr("data-profile-id"),b={action:"handbid_ajax_buy_tickets",userId:f,auctionId:s,items:v};e.post(ajaxurl,b,function(a){var i={action:"handbid_ajax_pay_for_tickets_by_card",auctionId:s,cardId:u};e.post(ajaxurl,i,function(a){if(t.removeClass("active"),a=JSON.parse(a),void 0!=a.result)if(void 0!=a.result.data&&void 0!=a.result.data.error){var i=[];for(var o in a.result.data.error){var r=a.result.data.error[o];i.push(r)}p.html(i.join("<br>")),m="process-error"}else a.result.paid?(m="process-success",e(".hide-if-no-tickets").show(),e(".last-screen-title").html("Successfully Processed!"),n=null):(p.html(a.result.description),m="process-error");else p.html("Something went wrong. Please try again later"),m="process-error";d.displaySpecifiedTabOfLoginPopup(m)})})}else p.html("There is no card selected"),d.displaySpecifiedTabOfLoginPopup("process-error")}}};e(document).ready(function(){e(".has-popover").popover(),e(".login-popup-link").live("click",function(t){if(t.preventDefault(),!e(this).hasClass("register-next")&&!e(this).hasClass("register-confirm")){var a=e(this).data("target-tab");d.displaySpecifiedTabOfLoginPopup(a)}}),e(".tutorialTabs").click(function(t){t.preventDefault(),e(this).tab("show"),e(".tutorialTabsContainer").removeClass("active"),e(this).parent().addClass("active")}),e("#hb-login-form-submit").click(function(t){t.preventDefault(),e(this).hasClass("active")||d.tryToLogin(e(this))}),e('[data-handbid-modal-key="login-modal"] .modal-close').on("click",function(){d.restoreInitialTabState();var t=e(this).data("reload-href");void 0!=t&&(window.location=t)}),e(".copyable-field").on("focusout",function(){d.copyToConfirmField(e(this))}),e(".login-popup-link.register-next").on("click",function(t){if(t.preventDefault(),d.registerFieldsValidation("register-form")){var a=e(this).data("target-tab");e(".copyable-field").each(function(){d.copyToConfirmField(e(this))}),d.displaySpecifiedTabOfLoginPopup(a)}}),e("#hb-purchase-tickets-back").on("click",function(e){e.preventDefault(),d.displaySpecifiedTabOfLoginPopup("process-success")}),e("#hb-purchase-tickets-next").on("click",function(e){e.preventDefault(),d.loadCheckedTicketsForConfirmation(),d.displaySpecifiedTabOfLoginPopup("confirm-purchase")}),e("#hb-confirm-tickets-back").on("click",function(e){e.preventDefault(),d.displaySpecifiedTabOfLoginPopup("purchase-tickets")}),e("#hb-pay-tickets-skip").on("click",function(e){e.preventDefault(),d.displaySpecifiedTabOfLoginPopup("purchase-tickets","hb-pay-tickets-skip")}),e("#hb-confirm-tickets-pay").on("click",function(e){e.preventDefault(),d.displaySpecifiedTabOfLoginPopup("process-payment")}),e(".login-popup-link.register-confirm").on("click",function(t){if(t.preventDefault(),d.registerFieldsValidation("register-form-confirm")){d.tryToRegister(e(this));e(this).data("target-tab")}}),e("#hb-tickets-add-card").on("click",function(e){e.preventDefault(),handbidModalsMain.showSingleModal("credit-card-form")}),e("#hb-tickets-make-payment").on("click",function(t){t.preventDefault(),d.payForTicketsAllCard(e(this))}),e("#hb-ticket-payment-error-card").on("click",function(e){e.preventDefault(),handbidModalsMain.showSingleModal("credit-card-form"),d.displaySpecifiedTabOfLoginPopup("process-payment")}),e("#hb-ticket-payment-error-back").on("click",function(e){e.preventDefault(),d.displaySpecifiedTabOfLoginPopup("process-payment")}),e("#hb-add-address-skip").on("click",function(e){e.preventDefault(),d.displaySpecifiedTabOfLoginPopup("process-payment")}),e(".reset-password-link").on("click",function(t){d.resendPasswordLink(e(this))}),e("#hb-update-shipping-address").on("click",function(t){t.preventDefault(),d.updateProfileShippingAddress(e(this))}),e("#start-enter-card-button").on("click",function(t){d.requestToAddCC(e(this))}),e("#hb-text-a-link").on("click",function(t){d.sendTextLinkSms(e(this))}),e("#hb-apply-discount-code-button").live("click",function(t){t.preventDefault(),d.checkDiscountCode(e(this))}),e(".start-bidding-button").live("click",function(t){t.preventDefault();var a=e(this).attr("href");"#"==a?e('[data-handbid-modal-key="login-modal"]').modal("hide"):window.location=a}),handbidLoginMain=d})}(jQuery),function(e){e(document).ready(function(){var t=e(".mobile-menu");t.find("a[data-slider-nav-key]").on("click",function(){var t=e('.slider-nav[data-slider-nav-id="bidder-dashboard"] .slider-nav-mobile a[data-slider-nav-key="profile-user-info"]'),a=e(this).attr("data-slider-nav-key");e('.slider-nav[data-slider-nav-id="bidder-dashboard"]').has(".active-slide").length||t[0].click(),e('.slider-nav[data-slider-nav-id="bidder-dashboard-inner"] [data-slider-nav-key="'+a+'"]')[0].click(),e("html,body").animate({scrollTop:t.offset().top},"normal")})})}(jQuery);var handbidModalsMain;!function(e){var t={showSingleModal:function(t){var a=e('.handbid-modal[data-handbid-modal-key="'+t+'"]');e("body").append(a),a.modal("show"),e(".credit-card-form-modal").on("hidden.bs.modal",function(){e(this).find(".credit-card-status").eq(0).html("").removeClass("card-success").removeClass("card-error"),e(this).find("input[type=text]").val("")}),e(".tickets-modal").on("hidden.bs.modal",function(){var t=e('[data-handbid-tickets-button="purchase"]');t.is(":visible")||(ticketsPopupWasOpened=!1)})}};e(document).ready(function(){e(".handbid-modal-link").live("click",function(a){if(a.preventDefault(),handbidMain.noticeIfNoCreditCard(e(this)))return!1;var i=e(this).attr("data-handbid-modal-key");t.showSingleModal(i)}),handbidModalsMain=t})}(jQuery);