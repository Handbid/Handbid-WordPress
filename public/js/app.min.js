function auctionGoogleMapsInit(){var e,t,a,i,n=jQuery(".details-map").attr("data-address"),o={scrollwheel:!1,zoom:12,disableDefaultUI:!0},d={scrollwheel:!1,zoom:17,disableDefaultUI:!0};window.getDirections=function(){var e=prompt("Enter your address.");e&&window.open("https://maps.google.com/maps?saddr="+e+"&daddr="+n)},"function"==typeof google.maps.Map&&(e=new google.maps.Map(jQuery("#small-map")[0],o),t=new google.maps.Map(jQuery("#large-map")[0],d),"function"==typeof google.maps.Geocoder&&(i=new google.maps.Geocoder,i.geocode({address:n},function(i,n){if(n===google.maps.GeocoderStatus.OK){a=i[0].geometry.location,e.setCenter(a),t.setCenter(a),new google.maps.Marker({map:e,icon:"/wp-content/themes/handbid/public/images/auction-details/small-pin.png",position:i[0].geometry.location});var o=new google.maps.Marker({map:t,icon:"/wp-content/themes/handbid/public/images/auction-details/large-pin.png",position:i[0].geometry.location}),d=new google.maps.InfoWindow({content:jQuery("#map-marker-content").html()});google.maps.event.addListenerOnce(t,"tilesloaded",function(){setTimeout(function(){d.open(t,o)},1e3)})}else alert("Geocode was not successful for the following reason: "+n)}))),smallMap=e,jQuery('.slider-nav [data-slider-nav-key="map"]').on("click",function(){setTimeout(function(){google.maps.event.trigger(e,"resize"),google.maps.event.trigger(t,"resize"),e.setCenter(a),t.setCenter(a)},500)}),mapsAreActivated=!0}var smallMap,$j=jQuery.noConflict();$j(function(){var e=$j(".banner");e.unslider({speed:500,delay:6e3,keys:!0,fluid:!1}),$j(".unslider-arrow").click(function(){var t=this.className.split(" ")[1];e.data("unslider")[t]()})}),function(e){e(document).ready(function(){function t(){var t=e(this).closest("[data-slider-progress]").attr("data-slider-nav-id"),a=e('.slider-nav[data-slider-nav-id="'+t+'"]');e(".active-slide",a).closest("[data-slider-nav-item]").next().length>0?e(".active-slide",a).closest("[data-slider-nav-item]").next().click():e(".active-slide",a).length>0&&e(e("[data-slider-nav-item]",a)[0]).click(),e(this).css("width",0),i()}function a(a){if(a.length>0){var i=a.closest(".slider-nav").attr("data-slider-nav-id"),o=e('[data-slider-nav-id="'+i+'"][data-slider-progress] .slider-progress-bar');o.stop(),o.css("width",0),o.animate({width:"100%"},n,"swing",t.bind(o))}}function i(){var a=e(".slider-content[data-slider-progress]");a.each(function(a,i){var o=null;1==e(".slider-progress-bar",i).length?o=e(".slider-progress-bar",i):(o=e('<div class="slider-progress-bar"></div>'),o.appendTo(i)),e(i).on("mouseenter",function(){o.stop()}),e(i).on("mouseleave",function(){o.animate({width:"100%"},n,"swing",t.bind(o))}),o.animate({width:"100%"},n,"swing",t.bind(o))})}var n=5e3,o=e(".slider-nav.auto-open"),d=e(window).height(),s=1e3,r=function(){var t=d+e(window).scrollTop();o.each(function(i,n){if(!n.beenShown){var o=e(n).position().top;o<t&&(setTimeout(function(){e(e("[data-slider-nav-key]",n)[0]).click(),a(n)},s),n.beenShown=!0)}})};e(".slider-nav [data-slider-nav-direction]").on("click",function(t){t.preventDefault();var i=e(this).attr("data-slider-nav-direction"),n=e(this).closest(".slider-nav"),o=n.attr("data-slider-nav-id"),d=e('.slider-nav[data-slider-nav-id="'+o+'"] .active-slide'),s=d;"next"==i&&d.next().length>0?s=d.next():"next"==i?s=e("[data-slider-nav-key]:first-of-type",d.parent()):"prev"==i&&d.prev().length>0?s=d.prev():"prev"==i&&(s=e("[data-slider-nav-key]:last-of-type",d.parent())),a(n),s.click()}),e(".slider-nav [data-slider-nav-key]").live("click",function(){var t=e(this).attr("data-slider-nav-key"),i=e(this).closest(".slider-nav"),n=e(i).attr("data-slider-nav-id"),o=e('.slider-content[data-slider-nav-id="'+n+'"] [data-slider-nav-key="'+t+'"]'),d=e('.slider-nav[data-slider-nav-id="'+n+'"] [data-slider-nav-key="'+t+'"]'),s=(e(".slider-content[data-slider-nav="+n+"] [data-slider-nav-key="+t+"]"),i.attr("data-toggle-mode")),r=s&&d.hasClass("active-slide"),c=e('.slider-content[data-slider-nav-id="'+n+'"] [data-slider-nav-key] [data-slider-nav-key]');if(e('.slider-content[data-slider-nav-id="'+n+'"] [data-slider-nav-key], .slider-nav[data-slider-nav-id="'+n+'"] [data-slider-nav-key]').not(c).removeClass("active-slide"),!r){var l=e(e(o).find(".slider-nav [data-slider-nav-key]")[0]),u=e(o).find(".slider-nav .active-slide").length>0;l&&!u&&e(l).click(),"bidder-dashboard"==n&&e("#bidder-info-load").hasClass("sticking")&&e("html, body").animate({scrollTop:0},"fast"),e(o).addClass("active-slide"),e(d).addClass("active-slide"),a(d)}}),e(".slider-content [data-slider-close]").live("click",function(){var t=e(this).attr("data-slider-close"),a=e('.slider-content[data-slider-nav-id="'+t+'"] [data-slider-nav-key] [data-slider-nav-key]');e('.slider-content[data-slider-nav-id="'+t+'"] [data-slider-nav-key], .slider-nav[data-slider-nav-id="'+t+'"] [data-slider-nav-key]').not(a).removeClass("active-slide")}),r(),e(window).scroll(r),i()})}(jQuery);var handbidMain,connectMessage,modal_overlay,reload_overlay,confirm_bid_overlay,timerNotice,timerMessage,circleTimer,auctionInvoices,currentPaddleNumber,currentElemNeedsCard,timerTimeout=1e3,timerElements,timerTime,currentCCForm,cookieExpire=7,ticketsPopupWasOpened=!1,addingCCState=!1;!function(e){attentionAboutTickets=!1,attentionAboutBidding=!1,attentionAboutMobiles=!1,attentionAboutConfirm=!1,attentionAboutTBuying=!1,attentionAboutBuyConf=!1,attentionAboutUnpaidI=!1;var t={getUserAgent:function(){return navigator.userAgent||navigator.vendor||window.opera},Android:function(){return/Android/i.test(this.getUserAgent())},BlackBerry:function(){return/BlackBerry/i.test(this.getUserAgent())},iPhone:function(){return/iPhone/i.test(this.getUserAgent())},iPad:function(){return/iPad/i.test(this.getUserAgent())},iOS:function(){return/iPad|iPod|iPhone/i.test(this.getUserAgent())},Windows:function(){return/IEMobile/i.test(this.getUserAgent())},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Windows()}},a=function(){var t=e("[data-auction-currency-code]").eq(0).data("auction-currency-code"),a=e("[data-auction-currency-symbol]").eq(0).data("auction-currency-symbol");return'<span class="handbidAuctionCurrency" title="'+t+'">'+a+"</span>"},i=e("#apiEndpointsAddress").val(),n={no_response:"Sorry, try again later",current_winner:"You are current winner of this item"},o=0,d=9,s={addpos2:0,animation:!0,dir1:"down",dir2:"right",firstpos1:0,firstpos2:0,nextpos1:0,nextpos2:0,push:"top",spacing1:0,spacing2:0},r={loggedIn:null,number_format:function(e,t,a,i){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,d="undefined"==typeof i?",":i,s="undefined"==typeof a?".":a,r="",c=function(e,t){var a=Math.pow(10,t);return""+(Math.round(e*a)/a).toFixed(t)};return r=(o?c(n,o):""+Math.round(n)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),(r[1]||"").length<o&&(r[1]=r[1]||"",r[1]+=new Array(o-r[1].length+1).join("0")),r.join(s)},in_array:function(e,t){for(var a=0,i=e.length;a<i;a++)if(e[a]==t)return!0;return!1},setCookie:function(t,a,i,n){e.cookie(t,a,{expires:i?i:cookieExpire,path:n?n:"/"})},getCookie:function(t){return e.cookie(t)},getCookieNameForItem:function(e){return"go-to-"+e+"-from"},recalculateDashboardPrice:function(){var t=0,a=0;e.map(e("[data-dashboard-price]"),function(i){a=parseInt(e(i).data("dashboard-price")),t+=a}),e("[data-handbid-stats-grand-total]").html(t)},goToSingleItemPage:function(t,a){var i=e("[data-legacy-category-id].selected").data("legacy-category-id");i=i?i:"all",this.setCookie(this.getCookieNameForItem(a),i),window.location.href=t},fadeInModalOverlayAndPositionModal:function(t){t.get().css({top:e(window).height()/2-t.get().height()/2-80,left:e(window).width()/2-t.get().width()/2}),modal_overlay?modal_overlay.fadeIn("fast"):modal_overlay=e("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",background:"rgba(0, 0, 0, 0.7)",top:"0",bottom:"0",right:"0",left:"0","z-index":"9999"}}).appendTo("body").fadeIn("fast")},fadeOutModalOverlay:function(){attentionAboutBidding||attentionAboutTickets||attentionAboutMobiles||attentionAboutConfirm||attentionAboutTBuying||attentionAboutUnpaidI||attentionAboutBuyConf||modal_overlay.fadeOut("fast")},recheckBidCounts:function(){var t=e("[data-maxbid-item-id]").length;e("[data-handbid-stats-num-proxies]").html(t);var a=e("[data-winning-item-id]").length;e("[data-handbid-stats-num-winning]").html(a);var i=e("[data-losing-item-id]").length;e("[data-handbid-stats-num-losing]").html(i);var n=e("[data-purchased-item-id]").length;e("[data-handbid-stats-num-purchases]").html(n)},recheckAndRecalculateBids:function(){this.recheckBidCounts(),this.recalculateDashboardPrice()},addDashboardBidProxy:function(t,i,n,o,d,s){var r='<li class="row bid-row-id-'+t+'"  data-proxy-item-id="'+i+'"  data-maxbid-item-id="'+i+'"  data-proxy-item-max-value="'+s+'"  data-maxbid-bid-id="'+t+'"> <div class="col-md-8 col-xs-8"> <a href="/auctions/'+d+"/item/"+o+'"><h4>'+n+'</h4></a> </div> <div class="col-md-2 col-xs-2"> <span class="bid-amount winning">'+a()+"<span>"+s+'</span></span> </div> <div class="col-md-2 col-xs-2"> <a class="button pink-solid-button loading-span-button" href="#" data-handbid-delete-proxy="'+t+'" data-item-id="'+i+'"><em>Delete</em></a> </div> </li>',c=e(".handbid-list-of-bids-proxy").eq(0);this.removeItemFromDashboardList(i,"proxy"),e("p",c).remove(),c.prepend(r),this.recheckAndRecalculateBids()},addDashboardBidWinning:function(t,i,n,o){var d='<li class="row" data-dashboard-price="'+o+'" data-winning-item-id="'+t+'"> <div class="col-md-10 col-xs-10">     <a href="'+n+'"><h4>'+i+'</h4></a> </div> <div class="col-md-2 col-xs-2"> <span class="bid-amount winning">'+a()+"<span>"+o+"</span></span> </div> </li>",s=e(".handbid-list-of-bids-winning").eq(0);e("p",s).remove(),s.prepend(d),this.displayOnlyCurrentStatusOfItem(t,"winning"),this.recheckAndRecalculateBids()},addDashboardBidLosing:function(t,i,n,o){var d='<li class="row"data-losing-item-id="'+t+'"><div class="col-md-8 col-xs-8"><a href="'+n+'"><h4>'+i+'</h4></a></div><div class="col-md-4 col-xs-4"><span class="bid-amount losing">'+a()+"<span>"+o+"</span></span></div></li>",s=e(".handbid-list-of-bids-losing").eq(0);s.prepend(d),e("p",s).remove(),this.displayOnlyCurrentStatusOfItem(t,"losing"),this.recheckAndRecalculateBids()},addDashboardBidPurchased:function(t){var i=t.item,n=i.id,o=i.key,d=i.name,s=t.pricePerItem,r=t.quantity,c=t.receiptId,l=t.auctionId,u=t.grandTotal,m=t.id,h=void 0!=t.auctionKey?t.auctionKey:"undefined";console.log("=====------===="),console.log(i),console.log("=====------===="),console.log(t),console.log("=====------====");var p='<li class="row"data-dashboard-price="'+s*r+'"data-dashboard-quantity="'+r+'"data-purchased-item-id="'+n+'" '+(1==i.isTicket?'data-purchased-item-is-ticket="yes" ':"")+'data-purchased-purchase-id="'+m+'"><div class="col-md-4 col-xs-4"><a href="/auctions/'+h+"/item/"+o+'"><h4>'+d+'</h4></a></div><div class="col-md-4 col-xs-4"><h4 class="quantity-total">'+r+" x "+a()+s+'</h4></div><div class="col-md-4 col-xs-4"><span class="bid-amount winning">'+a()+"<span>"+s*r+"</span></span></div></li>",v=e(".handbid-list-of-bids-purchases").eq(0);e("p",v).remove(),v.append(p),this.recheckAndRecalculateBids(),this.doesUserWantToBuyTicketsJustNow(c,l,u)},addItemBidsHistory:function(t,i,n,o){var d=(void 0!=n.winnerName?n.winnerName:n.bidderName,'<li class="row open" data-list-bid-id="'+i+'"><div class="col-md-6"><h4>Bidder Pin</h4><span>'+n.bidderName+'</span></div><div class="col-md-6"><span class="bid-amount winning">'+a()+"<span>"+o+"</span></span></div></li>"),s=e(".bid-history-item-"+t).eq(0);e("p",s).remove(),e("li",s).removeClass("open").addClass("closed"),s.prepend(d),this.recheckAndRecalculateBids()},addProfileActiveAuctions:function(){var t=e("#bidder-info-load"),a=e(".handbid-list-of-active-auctions").eq(0),i=e(".handbid-hidden-of-active-auctions").eq(0),n=parseInt(t.data("auction")),o=t.data("auction-status"),d=t.data("auction-name"),s=t.data("auction-key"),r=t.data("auction-image"),c=t.data("auction-organization-key"),l=t.data("auction-organization-name"),u=e("[data-handbid-active-profile-auction='"+n+"']",a).length,m=e("[data-hidden-active-auction='"+n+"']",i).length,h='<li class="row '+o+'" data-handbid-active-profile-auction="'+n+'"> <div class="col-md-2"><img class="full-width-image"src="'+r+'"/></div><div class="col-md-7"><h4>'+d+'</h4><a href="/organizations/'+c+'"class="org-link">'+l+'</a></div><div class="col-md-3"><a class="cta-link" href="/auctions/'+s+'">See Auction</a></div></li>';e("p",a).remove(),u||a.prepend(h),m||i.prepend('<input type="hidden" data-hidden-active-auction="'+n+'">')},addItemToTickets:function(t){var i=t,n=i.id,o=i.buyNowPrice,d=i.inventoryRemaining,s=i.name,r=i.description?i.description:"",c=1,l=0==d||"sold"==i.status,u=l?"":"display:none",m=l?"display:none":"",h=parseInt(d)>0&&d<c?"ghosted-out":"",p='<div class="row ticket-row" data-handbid-ticket-row="'+n+'"><div class="col-xs-12 ticket" data-handbid-ticket-id="'+n+'"data-handbid-ticket-price="'+o+'"data-handbid-ticket-step="'+c+'"><div class="col-xs-5 ticket-part-container no-padding-left"><h4 class="ticket-title"><span data-handbid-ticket-title>'+s+'</span></h4><p class="ticket-description">'+r+'</p></div><div class="col-md-3 ticket-part-container"><strong class="ticket-price">'+a()+"<span>"+o+'</span></strong></div><div class="col-md-4 ticket-part-container no-padding-right tickets-are-sold"style="'+u+'"><h4>SOLD OUT</h4></div><div class="col-md-4 ticket-part-container no-padding-right tickets-are-available"style="'+m+'"><div class="col-md-4 col-xs-4 no-padding"><a href="" class="bid-price-toggle bid-down green-button button ghosted-out"data-handbid-ticket-button="down">-</a></div><div class="buy-quantity col-md-4 col-xs-4 no-padding"><span data-handbid-ticket-quantity>0</span><input type="hidden" data-handbid-tickets-remaining value="'+d+'"></div><div class="col-md-4 col-xs-4 ticket-quantity-up no-padding"><a href=""class="bid-price-toggle bid-up green-button button '+h+'"data-handbid-ticket-button="up">+</a></div></div></div></div>',v=e(".tickets-container").eq(0);v.prepend(p)},updateItemTicket:function(t){var a=t,i=a.id,n=a.status,o=a.buyNowPrice,d=a.inventoryRemaining,s=a.name,r=a.description?a.description:"",c=parseInt(a.ticketQuantity),l=1,u=e("[data-handbid-ticket-row='"+i+"']").eq(0),m=e("[data-handbid-ticket-block]",u).eq(0),h=e("[data-handbid-tickets-remaining]",u).eq(0),p=e(".tickets-are-sold",u).eq(0),v=e(".tickets-are-available",u).eq(0),b=d!=-1?d+" available":"Unlimited quantity";e("[data-handbid-ticket-title]",u).html(s),e("[data-handbid-ticket-description]",u).html(r),e("[data-handbid-ticket-quant]",u).html(c),e("[data-handbid-ticket-quant-remaining]",u).html(b),e("[data-handbid-ticket-buynow]",u).html(o),m.data("handbid-ticket-price",o),m.data("handbid-ticket-step",l),h.val(d),0==d||"sold"==n?(p.slideDown("fast"),v.slideUp("fast"),e("[data-handbid-ticket-quantity]",u).html("0")):(p.slideUp("fast"),v.slideDown("fast"),d!=-1&&d<parseInt(e("[data-handbid-ticket-quantity]",u).html())&&e("[data-handbid-ticket-quantity]",u).html(d)),e("[data-is-hidden-item] [data-handbid-ticket-quantity]").html("0")},clickOnFiltersToReorder:function(){var t=e("[data-initial-auction-category]").eq(0).val(),a=e('[data-legacy-category-id="'+t+'"] a');a=a[0];var i=e("ul.by-category li.selected a")[0];void 0!=i&&i.click()},checkItemIsAvailableForPresale:function(){var t=e("[data-item-check-available-item-id]").val(),a=e("[data-item-check-status-auction-id]").val(),i=e("[data-item-check-status-item-id]").val();return("preview"==a||"presale"==a)&&"1"!=t&&"sold"!=i},checkItemsAuctionIsClosed:function(){var t=e("[data-item-check-status-auction-id]").val();return"closed"==t||"reconcile"==t||"reconciled"==t},checkItemIsAlreadySold:function(){var t=e("[data-item-check-status-item-id]").val();return"sold"==t},checkItemIsLiveOnly:function(){var t=e("[data-item-check-is-live-item-id]").val();return"yes"==t},checkItemIsBidPadOnly:function(){var t=e("[data-item-check-is-bidpad-item-id]").val();return"yes"==t},checkItemIsAlreadySoldOrNotAvailable:function(t,a){var i=e("[data-item-bidding-id]"),n=e("[data-item-nobidding-id]"),o=e("[data-item-is-sold-id]"),d=e("[data-item-is-live-id]"),s=e("[data-item-is-bidpad-id]"),r=e(".not-for-live-auctions"),c=this.checkItemIsAvailableForPresale(),l=this.checkItemsAuctionIsClosed(),u=this.checkItemIsAlreadySold(),m=this.checkItemIsLiveOnly(),h=this.checkItemIsBidPadOnly();if(c||u||m||h||l?i.hide():i.show(),c||l?n.show():n.hide(),u?o.show():o.hide(),h?s.show():s.hide(),m?d.show():d.hide(),m?r.hide():r.show(),u&&void 0!=t){var p=e("#bidder-info-load"),v=parseInt(p.data("profile-id"));v==t&&this.displayOnlyCurrentStatusOfItem(a,"winning")}},processAuctionChange:function(t){var a=e(".handbid-list-of-active-auctions").eq(0),i=(e(".handbid-hidden-of-active-auctions").eq(0),t.id),n=t.status;if("open"!=n){if(e("[data-handbid-active-profile-auction="+i+"]").remove(),0==e("li",a).length){var o=a.data("no-items-text");a.prepend("<p>"+o+"</p>")}if("closed"==n||"reconcile"==n||"reconciled"==n){var d=e("[data-hidden-active-auction="+i+"]");d.length?d.remove():"";var s=d.length;r.notifyUserAboutAuctionClosing(t,s)}}var c=e("[data-handbid-item-auction='"+i+"']:not(.simple-box.status-available)");"preview"==n||"presale"==n?c.addClass("not-available-in-presale"):c.removeClass("not-available-in-presale"),e(".filters .by-item-type li.selected a").eq(0).click();var l="1"==t.enableCreditCardSupport,u=e("[data-receipt-of-auction='"+i+"']");l?u.removeClass("invoiceNoCCAllowed"):u.addClass("invoiceNoCCAllowed"),e("[data-item-check-status-auction-id='"+i+"']").val(n);var m=t.spendingThreshold;m=null!=m&&void 0!=m?m:0,e("[data-auction-spending-threshold]").val(m),this.checkItemIsAlreadySoldOrNotAvailable()},processTicketChange:function(t){var a=t.id,i="1"==t.isTicket,n=t.inventoryRemaining,o=e("[data-handbid-ticket-row='"+a+"']"),d=o.eq(0),s=0!=o.length,r=s&&!i,c=!s&&i,l=s&&i,u=e("[data-handbid-item-box='"+a+"']"),m=e('[data-handbid-item-details-block="'+a+'"]');r&&(d.slideUp("normal"),d.remove(),this.recalculateTotalTicketsPrice(),u.removeAttr("data-is-ticket"),m.removeAttr("data-ticket-inventory")),c&&(this.addItemToTickets(t),this.recalculateTotalTicketsPrice(),u.attr("data-is-ticket","1")),l&&(this.updateItemTicket(t),this.recalculateTotalTicketsPrice()),(r||c)&&this.clickOnFiltersToReorder(),(l||c)&&m.attr("data-ticket-inventory",n)},processItemChange:function(t){var a=t,i=t.id,n=t.status,o=t.showValue,d=t.availableForPreSale,s=t.categoryId,c=1==a.hideSales,l=e("[data-handbid-item-box='"+i+"']").eq(0),u=e("#bidItemId").val();if(u==i&&(l=e("[data-handbid-item-details-block='"+i+"']").eq(0)),e.each(t,function(t,a){a=void 0!=a&&null!=a?a:0,"inventoryRemaining"==t&&a==-1&&(a="∞"),"categoryName"==t&&l.attr("data-tags","|"+a.toLowerCase()+"|"),"quantitySold"==t&&e("[data-handbid-sold-of-id="+i+"]").html(a),"bidCount"==t&&e("[data-handbid-bids-of-id="+i+"]").html(a),e("[data-change-attribute="+t+"]",l).html(a),e("[data-handbid-item-attribute="+t+"]",l).html(a)}),void 0!=t.inventoryRemaining&&t.inventoryRemaining!=-1&&"∞"!=t.inventoryRemaining){var m=t.inventoryRemaining;m=void 0!=m&&null!=m?m:0,e("[data-handbid-remaining-of-id="+i+"]").html(m)}var h=!1,p=e("[data-handbid-params-box='"+i+"']"),v=e("[data-is-hidden-item] [data-handbid-ticket-quantity]"),b="1"==t.isHidden,f="1"==t.isDirectPurchaseItem,g="1"==t.disableMobileBidding,y="1"==t.isBidpadOnly,k=!f&&0===t.bidCount;e.map(p,function(t){var a=e(t),i=parseInt(a.attr("data-handbid-item-cat-id")),o=void 0!=a.eq(0).attr("data-is-hidden-item"),d=(void 0!=a.eq(0).attr("data-hide-if-sold"),a.data("handbid-item-box-status"),!b&&o),l=b&&!o,u=void 0!=i&&void 0!=s&&i!=s,m=e(".countAuctionItemsForCat"+i).eq(0),p=e(".countAuctionItemsForCat"+s).eq(0),v=e(".countAuctionItemsForCatAll").eq(0);u?(a.attr("data-handbid-item-cat-id",s),d?r.utilChangeCountValue(p,1):"",l?r.utilChangeCountValue(m,-1):"",d||l||b||(r.utilChangeCountValue(p,1),r.utilChangeCountValue(m,-1))):(d?r.utilChangeCountValue(p,1):"",l?r.utilChangeCountValue(p,-1):""),d?r.utilChangeCountValue(v,1):"",l?r.utilChangeCountValue(v,-1):"",h=l||d,b?a.attr("data-is-hidden-item","1"):a.removeAttr("data-is-hidden-item"),f?a.attr("data-for-sale","1"):a.removeAttr("data-for-sale"),g?a.attr("data-live","1"):a.removeAttr("data-live"),y?a.attr("data-bidpad","1"):a.removeAttr("data-bidpad"),k?a.attr("data-no-bids","1"):a.removeAttr("data-no-bids"),c?a.attr("data-hide-if-sold","1"):a.removeAttr("data-hide-if-sold"),a.attr("data-handbid-item-box-status",n)}),v.html("0");var C=e("[data-handbid-item-details-block='"+i+"']").eq(0);c?C.attr("data-hide-if-sold","1"):C.removeAttr("data-hide-if-sold");var w=e(".itemValueBox"+i),I="1"!=o&&1!=o;I?w.addClass("itemValueBoxHidden"):w.removeClass("itemValueBoxHidden"),this.processTicketChange(t),e("[data-item-check-status-item-id='"+i+"']").val(n),e("[data-item-check-is-live-item-id='"+i+"']").val(g?"yes":"no"),e("[data-item-check-is-live-bidpad-id='"+i+"']").val(y?"yes":"no"),e("[data-item-check-available-item-id='"+i+"']").val(d),this.checkItemIsAlreadySoldOrNotAvailable(a.winnerId,a.id),a.buyNowPrice=null==a.buyNowPrice||void 0==a.buyNowPrice?0:a.buyNowPrice;var x=!a.isDirectPurchaseItem,A=x&&a.buyNowPrice>0&&a.buyNowPrice>a.currentPrice,T=e(".BINButton.BINItem"+i).eq(0),M=e(".BINButton.BINItem"+i+" a.buy-now").eq(0);A?T.addClass("BINAvailable"):T.removeClass("BINAvailable"),M.attr("data-handbid-buynow-price",a.buyNowPrice),h&&this.clickOnFiltersToReorder();var B=e('[data-handbid-item-box="'+a.id+'"].simple-item-box');B.removeClass("status-open").removeClass("status-closed").removeClass("status-sold").removeClass("status-preview").removeClass("status-presale").addClass("status-"+n)},wantToPurchaseTicketsImmediately:function(t,a,i,n,o){var d=e("#bidder-info-load"),s=d.data("paddle-nonce");attentionAboutTBuying=!0;var r=new PNotify({title:"Pay for Tickets?",text:"If you choose 'Pay Later', the Auction Staff will charge your card.",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Pay Now",addClass:"bid-here-button",click:function(t){t.update({title:"Purchasing",text:'<div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:"glyphicon glyphicon-refresh gly-spin",addclass:"handbid-paddle-number-notice",hide:!1,confirm:{confirm:!1},buttons:{closer:!1,sticker:!1},history:{history:!1}});var a={action:"handbid_ajax_pay_for_tickets",auctionId:n,receiptId:i,nonce:s};e.post(ajaxurl,a,function(a){console.log("-----------------------"),console.log("----Pay For Tickets success----"),a=JSON.parse(a),console.log(a);var n="",o="",d="",s="";return void 0==a.errors?a.result?(n="Purchased by your credit card '"+a.paid_by.nameOnCard+"' (**** **** **** "+a.paid_by.lastFour+")",o="Purchasing success",d="success",s="glyphicon glyphicon-ok",e('[data-receipt-block-id="'+i+'"]').removeClass("preview").addClass("open")):(n="Cannot pay invoice by any of your cards. Please, contact auction manager for instructions.",o="Failed",d="error",s="glyphicon glyphicon-remove-sign"):(n=a.errors.join("<br>"),o="Failed",d="error",s="glyphicon glyphicon-remove-sign"),attentionAboutTBuying=!1,t.update({title:o,text:n,icon:s,hide:!0,type:d,delay:3e3,mouse_reset:!1,confirm:{confirm:!1},buttons:{closer:!0,sticker:!1},history:{history:!1}}),!1})}},{text:"Pay Later",addClass:"browse-here-button",click:function(e){attentionAboutTBuying=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});r.get().on("pnotify.cancel",function(){return!1})},detectIfUserHasOnlyTicketsInPurchases:function(t){var a=!1,i=t?t:e("[data-purchased-purchase-id]");return i.length&&(a=!0,e.map(i,function(t){void 0==e(t).attr("data-purchased-item-is-ticket")&&(a=!1)})),a},doesUserWantToBuyTicketsJustNow:function(t,a,i){var n=e("[data-purchased-purchase-id]"),o=0,d=0;handbidMain.detectIfUserHasOnlyTicketsInPurchases(n)&&(e.map(n,function(t){d+=parseInt(e(t).data("dashboard-price")),o+=parseInt(e(t).data("dashboard-quantity"))}),handbidMain.wantToPurchaseTicketsImmediately(o,d,t,a,i))},utilChangeCountValue:function(e,t){e.html(parseInt(e.html())+t)},loadActiveAuctionsToContainer:function(){var t=e(".active-auctions-list-area");t.addClass("loading-messages");var a=t.data("nonce");e.post(ajaxurl,{action:"handbid_ajax_get_active_auctions",nonce:a},function(e){return e=JSON.parse(e),t.removeClass("loading-messages"),t.html(e.auctions),!1})},showUnpaidInvoicesToUser:function(t,i,n,o){var d=e.cookie("bidder-"+t+"-want-no-invoice-"+o.id),s=t&&o.id&&"yes"!=d,c=i==o.auction&&n;if(s||c){c&&(attentionAboutUnpaidI=!0);var l="You have an unpaid invoice with a Balance of "+a()+o.total+" in "+o.title+".  Do you want to pay it?";new PNotify({title:"Unpaid Invoice",type:"info",text:l,icon:"glyphicon glyphicon-off",addclass:"handbid-message-notice",hide:!c,delay:1e4,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"View Invoice",addClass:"view-invoices-button",click:function(e){c&&(attentionAboutUnpaidI=!1),r.scrollToInvoices(e,o.id),e.remove()}},{text:"Cancel",addClass:"browse-here-button",click:function(a){c&&(attentionAboutUnpaidI=!1),attentionAboutBidding=!1,e.cookie("bidder-"+t+"-want-no-invoice-"+o.id,"yes",{expires:cookieExpire,path:"/"}),a.remove()}}]},before_open:function(e){c&&handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){c&&handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}})}},loadInvoicesToContainer:function(t){var a=e(".unpaidInvoicesCountContainer"),i=e(".receipts-list-area");i.addClass("loading-messages");var n=i.data("nonce");e.post(ajaxurl,{action:"handbid_ajax_get_invoices",nonce:n},function(n){n=JSON.parse(n),i.removeClass("loading-messages"),a.html(n.unpaid),n.unpaid?a.show():a.hide(),i.html(n.invoices);var o=e("#bidder-info-load"),d=parseInt(o.data("profile-id")),s=e(".item-details"),r=handbidMain.detectIfUserHasOnlyTicketsInPurchases(),c=!!s.length&&parseInt(s.data("item-auction-id")),l=!!s.length&&("yes"==s.data("item-is-ticket")&&r);return!t&&n.unpaid>0&&e.map(e(".receiptRow.preview"),function(t){var a=e(t),i=parseInt(a.data("receipt-block-id")),n=a.data("receipt-total"),o=a.data("receipt-of-auction"),s=e(".invoice-title",a).eq(0).html();handbidMain.showUnpaidInvoicesToUser(d,c,l,{id:i,total:n,title:s,auction:o})}),!1})},loadMessagesToContainer:function(){var t=e(".messages-list-area");t.addClass("loading-messages");var a=t.data("nonce");e.post(ajaxurl,{action:"handbid_ajax_get_messages",nonce:a},function(e){return e=JSON.parse(e),t.removeClass("loading-messages"),t.html(e.messages),!1})},loadBidsHistoryToContainer:function(t){var a=e(".bid-history-container-"+t);if(a.length){a.addClass("loading-messages");var i=a.data("bids-nonce");e.post(ajaxurl,{action:"handbid_ajax_get_bid_history",itemID:t,nonce:i},function(e){return e=JSON.parse(e),a.removeClass("loading-messages"),a.html(e.history),!1})}},loadAllToContainers:function(){this.loadActiveAuctionsToContainer(),this.loadInvoicesToContainer(),this.loadMessagesToContainer()},scrollToInvoices:function(t,a){if(void 0!=a&&e("rtg-"+a).is(":visible"))return!1;var i=e('a[data-slider-nav-key="profile-user-info"]:visible');i.click(),e('a[data-slider-nav-key="see-my-receipt"]:visible').click(),e("html,body").animate({scrollTop:i.offset().top},"normal"),r.loadInvoicesToContainer(!0),void 0!=t?t.remove():""},notifyUserAboutAuctionClosing:function(t,a){var i=t.name,n="Auction <b>"+i+"</b> is closed now.",o=[],d=!1,s=!0,c=e("#bidder-info-load").length&&""!=e("#bidder-info-load").html();a&&c&&(n+="<br>You may have an unpaid invoices so you can check them.",o.push({text:"View Invoices",addClass:"view-invoices-button",click:function(e){r.scrollToInvoices(e),e.remove()}}),d={confirm:!0,buttons:o},s=!1),void 0!=timerNotice?timerNotice.remove():"",timerNotice=new PNotify({title:"Auction Closed",type:"info",text:n,icon:"glyphicon glyphicon-off",addclass:"handbid-message-notice",hide:s,mouse_reset:!1,confirm:d,buttons:{closer:!0,sticker:!1},history:{history:!1}})},notifyUserAboutReceipt:function(t){var a=t.id,i=e("#bidder-info-load").length&&""!=e("#bidder-info-load").html();if(0==e("[data-receipt-block-id='"+a+"']").length&&i){var n=(t.name,t.name),o=[];o.push({text:"invoice",addClass:"view-invoices-button",click:function(e){r.scrollToInvoices(e),e.remove()}}),confirm={confirm:!0,buttons:o},hide=!1;var d={title:"Auction Invoices",type:"info",text:n,icon:"",addclass:"handbid-message-notice",hide:!0,delay:1e4,mouse_reset:!1,confirm:confirm,buttons:{closer:!0,sticker:!1},history:{history:!1}};void 0!=auctionInvoices&&"out"==auctionInvoices.animating&&(auctionInvoices=void 0),void 0!=auctionInvoices?auctionInvoices.update(d):auctionInvoices=new PNotify(d)}},removeItemFromDashboardList:function(t,a){var i=e(".handbid-list-of-bids-"+a).eq(0);if("purchases"==a?e("[data-purchased-purchase-id="+t+"]").remove():e("[data-"+a+"-item-id="+t+"]").remove(),0==e("li",i).length){var n=i.data("no-items-text");i.prepend("<p>"+n+"</p>")}},displayOnlyCurrentStatusOfItem:function(t,a){e("[data-handbid-box-id="+t+"][data-handbid-item-banner]").hide(),e("[data-handbid-box-id="+t+"][data-handbid-item-banner='"+a+"']").show(),e("[data-handbid-item-box="+t+"]").attr("data-handbid-item-box-status",a)},addLosingItemRow:function(e,t,i){this.removeItemFromDashboardList(e,"losing");var n="under_maxbid"==i?" by MaxBid. ":".",o=void 0!=t.auctionKey?t.auctionKey:currentAuctionKey,d="/auctions/"+o+"/item/"+t.item.key,s=void 0!=t.item.image?t.item.image:t.item.imageUrl;this.addDashboardBidLosing(t.item.id,t.item.name,d,t.amount),this.removeItemFromDashboardList(e,"winning"),this.recheckAndRecalculateBids();var r={isBidding:!0,itemLink:d,itemImage:s};this.notice("You are <br>outbid</b> the item <b>"+t.item.name+" ("+t.item.itemCode+") </b> at "+a()+t.amount+n+" <a href='"+d+"'>GO TO ITEM</a>","Losing Item","error",null,r)},addWinningItemRow:function(e,t,i){this.removeItemFromDashboardList(e,"winning");var n="under_maxbid"==i?" by MaxBid! ":" now!",o=void 0!=t.auctionKey?t.auctionKey:currentAuctionKey,d="/auctions/"+o+"/item/"+t.item.key,s=void 0!=t.item.image?t.item.image:t.item.imageUrl;this.addDashboardBidWinning(t.item.id,t.item.name,d,t.amount),this.removeItemFromDashboardList(e,"losing"),this.recheckAndRecalculateBids();var r={isBidding:!0,itemLink:d,itemImage:s},c="You are <br>winning</b> the item <b>"+t.item.name+" ("+t.item.itemCode+") </b> at "+a()+t.amount+n;c="maxbid_auto"==i?t.message:c,this.notice(c,"Winning!","success",null,r)},checkIfBidsExistsAndChange:function(t,a){var i=e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id"),n=t.item.id,o=t.winnerId,d=e("[data-winning-item-id="+n+"]").length;e("[data-losing-item-id="+n+"]").length;d&&o!=i&&(console.log("----- LOSING ITEM -----"),this.checkIfMaxBidIsNotAtual(t),this.loadMessagesToContainer()),o==i&&(console.log("----- WINNING ITEM -----"),this.addWinningItemRow(n,t),this.checkIfMaxBidIsNotAtual(t),this.loadMessagesToContainer())},userItemBiddingEvent:function(e){var t=e.item.id,a=e.status,i=e.statusReason;"losing"==a&&(this.removeItemFromDashboardList(t,"losing"),this.addLosingItemRow(t,e,i)),"winning"==a&&"maxbid_auto"==i&&(this.removeItemFromDashboardList(t,"winning"),this.addWinningItemRow(t,e,i),r.loadBidsHistoryToContainer(t))},checkIfMaxBidIsNotAtual:function(t){
var a=t.item.id,i=e("[data-maxbid-item-id='"+a+"']").eq(0),n=parseInt(i.data("proxy-item-max-value"));void 0!=i&&t.amount>=n&&this.removeItemFromDashboardList(a,"proxy"),this.recheckAndRecalculateBids()},addUserPurchase:function(e){1==e.isDeleted?(this.removeItemFromDashboardList(e.id,"purchases"),this.recheckAndRecalculateBids()):(this.removeItemFromDashboardList(e.item.id,"winning"),this.removeItemFromDashboardList(e.id,"purchases"),this.addDashboardBidPurchased(e),this.loadMessagesToContainer())},processUserReceipt:function(t){var a=t.id,i=e('[data-receipt-block-id="'+a+'"]').eq(0),n=e('[data-receipt-block-id="'+a+'"] .unpaidControls'),o=e('[data-receipt-block-id="'+a+'"] .paidControls'),d=e('[data-receipt-block-id="'+a+'"] .unpaidRows');t.paid?(i.removeClass("preview").addClass("open"),n.hide(),d.hide(),o.show()):(i.addClass("preview").removeClass("open"),n.show(),d.show(),o.hide())},noticeIfNoCreditCard:function(t,a,i){var n=t.attr("data-handbid-credit-cards-required"),o="undefined"!=typeof n&&n!==!1,d=e("[data-handbid-card-row]"),s=e("#footer-credit-cards-count"),r=s.length?parseInt(s.val()):d.length;return(o&&0==r||i)&&(a&&(ticketsPopupWasOpened=!0),handbidModalsMain.showSingleModal("credit-card-form")),o||i},getCountOfPastItemPurchases:function(t){var a=0;return e.map(e('.handbid-list-of-bids-purchases [data-purchased-item-id="'+t+'"]'),function(t){a+=parseInt(e(t).data("dashboard-quantity"))}),a},confirmIfUserReallyWantToBuy:function(t,a){var i=parseInt(e("[data-handbid-quantity]").eq(0).html()),n=parseInt(e('[data-handbid-item-attribute="buyNowPrice"]').eq(0).html()),o=i*n,d=e(".item-details").eq(0),s=d.data("item-id"),r="yes"==d.data("item-is-donation"),c="yes"==d.data("item-is-ticket"),l=!r&&t.getCountOfPastItemPurchases(s),u=r?"Donation Confirmation":"Purchase Confirmation",m=r?"Confirm Donation of $"+o+"?":"Add "+i+" for $"+o+" to your cart?",h=l?m+"<br /><br /> Hey! You have already purchased "+l+" of this item, are you sure you want to purchase "+i+" more?":m;a&&(i=0,o=0,e.map(a,function(e,t){i+=e.quantity,o+=e.quantity*e.price})),(c||a)&&(u="Ticket Confirmation",h="Confirm addition of "+i+" ticket"+(i>1?"s":"")+" for $"+o+" to purchases?"),attentionAboutBuyConf=!0;var p=new PNotify({title:u,text:h,icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice handbid-left-padding-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Yes",addClass:"bid-here-button",click:function(e){attentionAboutBuyConf=!1,e.remove(),a?t.confirmedTicketsPurchase(a):t.confirmedPurchase()}},{text:"No, thanks",addClass:"browse-here-button",click:function(e){attentionAboutBuyConf=!1,e.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});p.get().on("pnotify.cancel",function(){return!1})},alreadyHaveMaxBidForItem:function(t){var i=parseInt(e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id")),n=t.item.winnerId;if(n==i&&t){var o=t.item.name,d=t.proxyBid,s=t.item.highestProxyBid;handbidMain.notice("Cannot create MaxBid at <b>"+o+"</b> at "+a()+d+". You already have a maxbid for this item at "+a()+s+" . Please remove the current maxbid to create a new one.","Already Have MaxBid","error")}},messageToAuctionManager:function(){e("[data-handbid-mail-to-manager]").live("click",function(t){var a=e(this).data("handbid-mail-to-manager"),i=e(this).data("handbid-auction"),n=e(this).data("handbid-auction-id"),o=e(this).data("handbid-auction-org"),d=e(this).data("nonce");t.preventDefault();var s=new PNotify({title:"Send Email To Auction Manager",text:"",icon:"glyphicon glyphicon-envelope",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{prompt:!0,prompt_multi_line:!0,prompt_default:""},buttons:{closer:!1,sticker:!1},history:{history:!1}});s.get().on("pnotify.confirm",function(t,s,r){s.cancelRemove().update({title:"Sending Your Message",text:e("<div/>").text(r).html()+'<br><br><div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:!0,type:"info",hide:!1,confirm:{prompt:!1},buttons:{closer:!1,sticker:!1}}),e.post(ajaxurl,{action:"handbid_ajax_send_message",text:r,email:a,auction:i,auctionID:n,auctionOrg:o,nonce:d},function(e){console.log(e),s.cancelRemove().update({title:"<b>Message Sent</b>",text:"<b>Thank you, your message has been sent</b>",icon:!0,type:"success",hide:!0,delay:3e3,confirm:{prompt:!1},buttons:{closer:!0,sticker:!1}})})})})},disableAllBiddingButtonsIfSold:function(){e('[data-handbid-bid-button="up"]').addClass("disabled-button"),e('[data-handbid-bid-button="down"]').addClass("disabled-button"),e('[data-handbid-bid-button="bid"]').addClass("disabled-button"),e('[data-handbid-bid-button="proxy"]').addClass("disabled-button"),e('[data-handbid-bid-button="purchase"]').addClass("disabled-button"),e('[data-handbid-bid-button="buyItNow"]').addClass("disabled-button")},isButtonDisabledOrAlreadyActive:function(e){return e.hasClass("disabled-button")||e.hasClass("active")},scrollBodyToTopOfElement:function(t,a){a=a?a:900,e("html, body").animate({scrollTop:t},a)},getCategoryForInitialFilter:function(){var e="all",t=window.location.hash;return t&&(t=t.split("-").pop(),console.log(t),e=this.getCookie(this.getCookieNameForItem(t))),e},goBackToItem:function(){var t=window.location.hash;if(t){t=t.split("-").pop();var a=e('[data-handbid-item-box="'+t+'"]').offset();if(void 0!=a){var i=this.getCategoryForInitialFilter();"all"!=i?setTimeout(function(){e('[data-legacy-category-id="'+t+'"] a').click(),setTimeout(function(){handbidMain.scrollBodyToTopOfElement(a.top)},500)},500):this.scrollBodyToTopOfElement(a.top)}}},getStatusReasonByCode:function(e){return void 0!=n[e]?n[e]:e},cannotDoIfUnauthorized:function(){var t=e.cookie("handbid-auth");return t?this.loggedIn=!0:(e("[data-handbid-connect]").eq(0).click(),this.loggedIn=!1),!this.loggedIn},confirmedPurchase:function(){var t=e("[data-handbid-user-id]"),i=e("[data-handbid-auction-id]"),n=e("[data-handbid-item-id]"),o=e("#bidUserId"),d=e("#bidAuctionId"),s=e("#bidItemId"),c=t.length>0?t.attr("data-handbid-user-id"):parseInt(o.val())?parseInt(o.val()):null,l=i.length>0?i.attr("data-handbid-auction-id"):parseInt(d.val())?parseInt(d.val()):null,u=n.length>0?n.attr("data-handbid-item-id"):parseInt(s.val())?parseInt(s.val()):null,m=e("[data-handbid-quantity], [data-handbid-bid-amount]"),h=e(".increment span.incrementSpan"),p=e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]'),v=(h.length>0?parseInt(h[0].innerHTML):1,p.length>0?parseInt(p[0].innerHTML):1,e("#bidNonce").val()),b=e('[data-handbid-bid-button="purchase"]').eq(0),f=parseInt(b.data("handbid-buynow-price")),g=parseInt(m[0].innerHTML);b.addClass("active");var y={action:"handbid_ajax_createbid",nonce:v,userId:c,auctionId:l,itemId:u,amount:f,quantity:g};e.post(ajaxurl,y,function(t){console.log("-----------------------"),console.log("----Buy Items success----"),t=JSON.parse(t),console.log(t),b.removeClass("active");var i="";if("failed"==t.status)i=r.getStatusReasonByCode(t.statusReason),handbidMain.notice(i,t.status.toUpperCase(),t.status);else{var n=e('[data-handbid-item-attribute="totalSoldItems"]').eq(0),o=t.item.quantitySold;n.html(o);var d=e('[data-handbid-item-attribute="inventoryRemaining"]').eq(0),s=t.item.inventoryRemaining;s=s==-1?"∞":s,d.html(s);var c=0!=t.item.inventoryRemaining?1:0;m.html(c);var l=void 0!=t.item.isAppeal&&1==t.item.isAppeal,h=l?"Thank You!":"Congratulations!";i=l?"You donated "+a()+t.currentAmount*t.quantity:"You purchased "+g+" <br>of Item #"+t.item.id+" <br><b>"+t.item.name+"</b>",handbidMain.notice(i,h,"success"),handbidMain.removeItemFromDashboardList(u,"proxy"),handbidMain.recheckAndRecalculateBids(),r.loadAllToContainers(),r.reloadPageIfForceRefresh()}return!1})},confirmedTicketsPurchase:function(t){var a=e(".handbid-modal.tickets-modal .modal-close").eq(0),i=e('[data-handbid-tickets-button="purchase"]').eq(0),n=i.data("handbid-buy-tickets-nonce"),o=i.data("handbid-auction-id"),d=i.data("handbid-profile-id");i.addClass("active"),a.hide();var s={action:"handbid_ajax_buy_tickets",nonce:n,userId:d,auctionId:o,items:t};e.post(ajaxurl,s,function(n){console.log("---------------------------"),console.log("----Buy Tickets success----"),n=JSON.parse(n),console.log(n),e.map(e("[data-handbid-ticket-id]"),function(t,a){var i=e(t),o=e("[data-handbid-ticket-quantity]",i).eq(0),d=e("[data-handbid-tickets-remaining]",i).eq(0),s=parseInt(o.html()),c=parseInt(i.data("handbid-ticket-id")),l=d.val(),u=parseInt(d.val());return o.html(0),!connectedToSocket&&"-1"!=l&&"∞"!=l&&r.in_array(n.successID,c)&&d.val(u-s),null}),e("[data-handbid-tickets-total]").html(0);var o=[];return n.failID.length&&(o=e.map(t,function(t,a){if(r.in_array(n.failID,t.id)){var i="";if(void 0!=n.fail[t.id].data&&void 0!=n.fail[t.id].data.error){var o=e.map(n.fail[t.id].data.error,function(e,t){return e.join(", ")});i="<br> Reason: "+o.join(", ")}else i="<br> Reason: Something wrong. Please, try again later";return r.in_array(n.failID,t.id)?"Item #"+t.id+" <br><b>"+t.name+"</b>"+i:null}return null}),handbidMain.notice("<b>Cannot Buy:</b> <br><br>"+o.join(" <br><br>"),"Cannot Buy Tickets","error")),n.successID.length&&(o=e.map(t,function(e,t){if(r.in_array(n.successID,e.id)){var a=n.success[e.id];a.amount,a.quantity,a.name;return r.in_array(n.successID,e.id)?"<b>"+e.quantity+"</b> of Item #"+e.id+" <br><b>"+e.name+"</b>":null}return null}),r.loadInvoicesToContainer(!0),handbidMain.notice("You purchased <br>"+o.join("; <br>"),"Congratulations!","success")),i.removeClass("active"),a.show(),a.click(),!1})},setupBidding:function(t){var a=e("[data-handbid-user-id]").length>0?e("[data-handbid-user-id]").attr("data-handbid-user-id"):parseInt(e("#bidUserId").val())?parseInt(e("#bidUserId").val()):null,i=e("[data-handbid-auction-id]").length>0?e("[data-handbid-auction-id]").attr("data-handbid-auction-id"):parseInt(e("#bidAuctionId").val())?parseInt(e("#bidAuctionId").val()):null,n=e("[data-handbid-item-id]").length>0?e("[data-handbid-item-id]").attr("data-handbid-item-id"):parseInt(e("#bidItemId").val())?parseInt(e("#bidItemId").val()):null,o=e("[data-handbid-quantity], [data-handbid-bid-amount]"),d=e(".increment span.incrementSpan").length>0?parseInt(e(".increment span.incrementSpan")[0].innerHTML):1,s=e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]').length>0?parseInt(e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]')[0].innerHTML):1;e('[data-handbid-bid-button="up"]').live("click",function(a){var i=parseInt(e('[data-handbid-item-attribute="inventoryRemaining"]').eq(0).html());if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this))||0==i)return!1;a.preventDefault();var n=!0,s=!0,r=o,c=e(this).hasClass("max-bid-up"),l=e(this).hasClass("isDirectPurchase");l||(r=e(c?"[data-handbid-maxbid-amount]":"[data-handbid-onlybid-amount]"));var u=parseInt(r[0].innerHTML)+d;if(l){var i=e('[data-handbid-item-attribute="inventoryRemaining"]').length>0?parseInt(e('[data-handbid-item-attribute="inventoryRemaining"]')[0].innerHTML):-1;i=i?i:-1;var m=e('[data-handbid-item-attribute="totalSoldItems"]').length>0?parseInt(e('[data-handbid-item-attribute="totalSoldItems"]')[0].innerHTML):0;m=m?m:0,n=i==-1||i!=-1&&u<=i}else{console.log("maxb burchase");var h=e("[data-handbid-buynow-price]").length>0?e("[data-handbid-buynow-price]").eq(0).data("handbid-buynow-price"):-1;h=""!=h?parseInt(h):-1;var p=c?u<h:u<=h;n=h<=0||h>0&&p,s=h<=0||h>0&&u<h}n&&(r.html(u),l||c||!s||e("[data-handbid-maxbid-amount]").html(u))}),e('[data-handbid-bid-button="down"]').live("click",function(a){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;a.preventDefault();var i=o,n=e(this).hasClass("max-bid-down"),r=e(this).hasClass("isDirectPurchase");r||(i=e(n?"[data-handbid-maxbid-amount]":"[data-handbid-onlybid-amount]"));var c=parseInt(i[0].innerHTML)-d;s=e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]').length>0?parseInt(e('.minimalBidAmount span[data-change-attribute="minimumBidAmount"]')[0].innerHTML):1,c>=s&&(i.html(c),r||n||e("[data-handbid-maxbid-amount]").html(c))}),e('[data-handbid-bid-button="bid"]').live("click",function(o){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;o.preventDefault();var d=e(this),s=t.checkIfWantToShowBidConfirmation();return s?t.notConfirmedBidAction(d,a,i,n):t.confirmedBidAction(d,a,i,n),!1}),e('[data-handbid-bid-button="proxy"]').live("click",function(o){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;var d=e("[data-handbid-maxbid-amount]"),s=d[0].innerHTML,r=e("#bidNonce").val(),c=e(this);c.addClass("active"),e(".proxy-bid-dialog-close").hide();var l={action:"handbid_ajax_createbid",nonce:r,userId:a,auctionId:i,itemId:n,maxAmount:s};return e.post(ajaxurl,l,function(a){if(console.log(a),console.log("-----------------------"),console.log("----Max Bid success----"),a=JSON.parse(a),console.log(a),void 0==a.status)t.notice("Something went wrong. Please, try again later","No response from server","error");else if("failed"==a.status){var i="";"max_bid"==a.bidType?t.alreadyHaveMaxBidForItem(a):(i=t.getStatusReasonByCode(a.statusReason),t.notice(i,a.status.toUpperCase(),a.status))}else a.item.auctionKey=e("#bidder-info-load").data("auction-key"),t.addDashboardBidProxy(a.id,a.item.id,a.item.name,a.item.key,a.item.auctionKey,a.maxAmount),"raised_maxbid"==a.statusReason&&"winning"==a.status&&(t.addWinningItemRow(a.item.id,a,a.statusReason),t.loadBidsHistoryToContainer(a.item.id)),t.reloadPageIfForceRefresh();return c.removeClass("active"),e(".proxy-bid-dialog-close").show(),e(".proxy-bid-dialog-close").click(),!1}),!1}),e('[data-handbid-bid-button="purchase"]').live("click",function(a){a.preventDefault();var i=parseInt(e('[data-handbid-item-attribute="inventoryRemaining"]').eq(0).html());return!(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this))||0==i)&&(t.confirmIfUserReallyWantToBuy(t,!1),!1)}),e('[data-handbid-bid-button="buyItNow"]').live("click",function(o){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;o.preventDefault();var d=e("#bidNonce").val(),s=parseInt(e(this).data("handbid-buynow-price")),r=e(this);r.addClass("active");var c={action:"handbid_ajax_createbid",nonce:d,userId:a,auctionId:i,itemId:n,amount:s};return e.post(ajaxurl,c,function(a){return console.log("-----------------------"),console.log("----Buy Now success----"),a=JSON.parse(a),console.log(a),e('[data-handbid-item-banner="sold"]').show(),t.disableAllBiddingButtonsIfSold(),r.removeClass("active"),t.loadInvoicesToContainer(!0),t.reloadPageIfForceRefresh(),!1}),!1}),e("[data-handbid-delete-proxy]").live("click",function(a){if(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this)))return!1;a.preventDefault();var i=(e(".handbid-list-of-bids-proxy").eq(0),e("#bidNonce").val()),n=parseInt(e(this).data("handbid-delete-proxy")),o=e(this),d=o.data("item-id");o.addClass("active");var s={action:"handbid_ajax_removebid",nonce:i,bidID:n};return e.post(ajaxurl,s,function(e){return console.log("-----------------------------"),console.log("----Delete Maxbid success----"),e=JSON.parse(e),console.log(e),t.removeItemFromDashboardList(d,"proxy"),t.recheckAndRecalculateBids(),o.removeClass("active"),!1}),!1})},notConfirmedBidAction:function(t,a,i,n){attentionAboutConfirm=!0;var o=e('[data-change-attribute="minimumBidAmount"]').eq(0).html(),d=e(".handbidAuctionCurrency").eq(0).html();new PNotify({title:"",text:"<b>Place a bid for "+d+'<span data-change-attribute="minimumBidAmount">'+o+"</span> on this item?</b>",icon:"glyphicon glyphicon-question-sign",type:"info",hide:!1,confirm:{confirm:!0,buttons:[{text:"Yes",click:function(e){attentionAboutConfirm=!1,e.remove(),handbidMain.confirmedBidAction(t,a,i,n)}},{text:"No",click:function(e){attentionAboutConfirm=!1,e.remove()}}]},buttons:{closer:!1,sticker:!1},history:{history:!1},before_open:function(t){t.get().css({}),confirm_bid_overlay?confirm_bid_overlay.fadeIn("fast"):confirm_bid_overlay=e("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",background:"rgba(0, 0, 0, 0.7)",top:"0",bottom:"0",right:"0",left:"0","z-index":"9999"}}).appendTo("body").fadeIn("fast")},before_close:function(){confirm_bid_overlay.fadeOut("fast")}})},confirmedBidAction:function(t,i,n,o){var d=e("[data-handbid-onlybid-amount]"),s=d[0].innerHTML,c=e("#bidNonce").val(),l=t,u="";l.addClass("active");var m={action:"handbid_ajax_createbid",nonce:c,userId:i,auctionId:n,itemId:o,amount:s};e.post(ajaxurl,m,function(t){return console.log(t),console.log("-----------------------"),console.log("----Bid Now success----"),t=JSON.parse(t),console.log(t),"failed"==t.status?(u=r.getStatusReasonByCode(t.statusReason),r.notice(u,t.status.toUpperCase(),t.status)):(e('[data-handbid-item-attribute="bidCount"]').html(t.item.bidCount),e('[data-handbid-item-attribute="minimumBidAmount"]').html(a()+t.item.minimumBidAmount),"under_maxbid"==t.statusReason&&(r.addLosingItemRow(t.item.id,t,t.statusReason),r.loadBidsHistoryToContainer(t.item.id)),r.reloadPageIfForceRefresh()),l.removeClass("active"),!1})},reloadPageIfForceRefresh:function(){forcePageRefreshAfterBids&&location.reload()},reloadPageAfterPurchasesIfForceRefresh:function(){forcePageRefreshAfterPurchases&&location.reload()},recalculateTotalTicketsPrice:function(){var t=0,a=e.map(e("[data-handbid-ticket-id]"),function(a,i){var n=e(a),o=e("[data-handbid-ticket-quantity]",n).eq(0),d=parseInt(o.html()),s=parseInt(n.data("handbid-ticket-id")),r=parseInt(n.data("handbid-ticket-price")),c=e("[data-handbid-ticket-title]",n).eq(0).html();return t+=d*r,d>0?{id:s,price:r,quantity:d,name:c}:null});return t=r.number_format(t,0,".",","),e("[data-handbid-tickets-total]").html(t),a},setupTicketsPurchasing:function(t){e('[data-handbid-ticket-button="up"]').live("click",function(a){a.preventDefault();var i=e(this).parents("[data-handbid-ticket-id]").eq(0),n=e("[data-handbid-ticket-button='down']",i).eq(0),o=e("[data-handbid-ticket-quantity]",i).eq(0),d=e("[data-handbid-tickets-remaining]",i).eq(0),s=parseInt(o.html()),r=d.val(),c=parseInt(d.val()),l=(parseInt(i.data("handbid-ticket-id")),parseInt(i.data("handbid-ticket-step"))),u=(parseInt(i.data("handbid-ticket-price")),s+l);(u<=c||"-1"==r||"∞"==r)&&(o.html(u),t.recalculateTotalTicketsPrice(),n.removeClass("ghosted-out"),u+l>c&&"-1"!=r&&"∞"!=r&&e(this).addClass("ghosted-out"))}),e('[data-handbid-ticket-button="down"]').live("click",function(a){a.preventDefault();var i=e(this).parents("[data-handbid-ticket-id]").eq(0),n=e("[data-handbid-ticket-button='up']",i).eq(0),o=e("[data-handbid-ticket-quantity]",i).eq(0),d=e("[data-handbid-tickets-remaining]",i).eq(0),s=parseInt(o.html()),r=(parseInt(d.val()),parseInt(i.data("handbid-ticket-id")),parseInt(i.data("handbid-ticket-step"))),c=(parseInt(i.data("handbid-ticket-price")),s-r);c>=0&&(o.html(c),t.recalculateTotalTicketsPrice(),n.removeClass("ghosted-out"),c-r<0&&e(this).addClass("ghosted-out"))}),e('[data-handbid-tickets-button="purchase"]').live("click",function(a){a.preventDefault();var i=t.recalculateTotalTicketsPrice();return!(t.isButtonDisabledOrAlreadyActive(e(this))||t.cannotDoIfUnauthorized()||t.noticeIfNoCreditCard(e(this),!0,!1)||0==i.length)&&(t.confirmIfUserReallyWantToBuy(t,i),!1)})},makePaymentForReceipt:function(){e(".make-payment-button").live("click",function(t){if(t.preventDefault(),r.isButtonDisabledOrAlreadyActive(e(this))||r.cannotDoIfUnauthorized()||r.noticeIfNoCreditCard(e(this)))return!1;var a=e(this),i=a.parents(".receiptRow").eq(0),n=e(".paidControls",i).eq(0),o=e(".unpaidControls",i).eq(0),d=a.parents(".receipt-payment-block").eq(0),s=e(".select-payment-card",d).eq(0).val(),c=a.data("make-payment-nonce"),l=a.data("auction-id"),u=a.data("receipt-id");a.addClass("active");var m={action:"handbid_ajax_make_receipt_payment",nonce:c,cardId:s,receiptId:u,auctionId:l};return e.post(ajaxurl,m,function(t){if(console.log("---------------------------"),console.log("----Make payment success----"),t=JSON.parse(t),console.log(t),t.result.paid){n.slideDown(),o.remove(),i.addClass("open").removeClass("preview"),handbidMain.notice("Your receipt was successfully paid!","Congratulations!","success");var d=e(".unpaidInvoicesCountContainer"),s=e(".receipts-list-area li.preview").length;s?d.show():d.hide(),d.html(s)}else handbidMain.notice(t.result.description,"Payment Error","error");return a.removeClass("active"),!1}),!1})},submitBid:function(e){},setupConnect:function(){var t=e("body");if(t.hasClass("handbid-logged-out")){this.loggedIn=!1;var a=e('[data-handbid-modal-key="login-modal"]');e("[data-handbid-connect]").live("click",function(t){t.preventDefault();var i=e(this).hasClass("register");i&&(e(".active-container").eq(0).removeClass("active-container").hide(),e("[data-tab-name='register-form']").eq(0).addClass("active-container").show()),a.modal("show")}),a.on("hidden.bs.modal",function(e){handbidLoginMain.restoreInitialTabState()})}else this.loggedIn=!0,e("[data-handbid-connect]").css("display","none")},setupTutorialPopup:function(){var t=(e("body"),e('[data-handbid-modal-key="login-modal"]'));e("[data-handbid-tutorial]").live("click",function(e){e.preventDefault(),void 0!=handbidLoginMain&&handbidLoginMain.changeToTutorialTabState(),t.modal("show")})},setupBidderDashboard:function(){e(".bidder-info-container .stats-bar").live("click.ajax-load",function(){e.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"load_bidder_dashboard"},dataType:"html",success:function(t){e(t).appendTo(e(".bidder-dashboard-inner"))}}),e(this).off(".ajax-load")})},setupDeleteCreditCard:function(){e("[data-handbid-delete-credit-card]").live("click",function(t){t.preventDefault();var a=e(this),i=a.data("handbid-delete-credit-card"),n=e("#deleteCardNonce").val();a.addClass("active");var o={action:"handbid_ajax_remove_credit_card",cardID:i,nonce:n};return e.post(ajaxurl,o,function(t){console.log("-----------------------------"),console.log("----Remove Credit Card Success----"),console.log(t);try{t=JSON.parse(t),console.log(t)}catch(n){}if(a.removeClass("active"),void 0==t.error)if(void 0==t.resp||void 0==t.resp.data||void 0==t.resp.data.message||void 0==t.resp.success||t.resp.success){e('[data-handbid-card-row="'+i+'"]').remove(),r.notice("Your card has been deleted","Card Success","success");var o=e("#footer-credit-cards-count");if(void 0!=o){var d=parseInt(o.val())+1;o.val(d)}if(e(".select-payment-card option[data-option-val="+i+"]").remove(),0==e(".credit-card ul.simple-list li").length){var s=e(".credit-card ul.simple-list");s.after('<div class="row no-results-row"> <p style="text-align: left;">Note: Not all auctions use credit cards</p>  <label class="no-results"> You have no cards on file. </label> </div>'),s.remove(),e("[data-handbid-credit-cards-need]").attr("data-handbid-credit-cards-required",""),e(".select-payment-card").hide()}}else r.notice(t.resp.data.message,"Card Error","error");else r.notice("Something wrong. Please, try again later","Card Error","error")}),!1})},setupAddCreditCardCallback:function(t,a){addingCCState=!1;var i=currentCCForm,n=e(".bidder-info-container.credit-card ul"),o=(e('[data-handbid-modal-key="credit-card-form"] .modal-close'),i.find(".credit-card-status").eq(0)),d=!1,s="",c=!1,l="",u="Something wrong. Please, try again later";if(void 0!=a.error)d=!0,void 0!=a.error.message?(s=a.error.message,r.notice(s,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1)):(s=u,r.notice(u,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1));else if(void 0==a.card)d=!0,s=u,r.notice(u,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1);else{var m={action:"handbid_ajax_add_credit_card",stripeId:a.id,creditCardHandle:a.card.id,nameOnCard:i.find(".ccNameOnCard").val(),nonce:e("#hb-credit-card-nonce").val()},h="Card was created successfully.<br> Adding it to your profile";r.notice(h),c=!0,l=h,e.post(ajaxurl,m,function(t){try{t=JSON.parse(t)}catch(a){}if(t=t.resp,console.log(t),void 0==t.success||t.success||void 0==t.data||void 0==t.data.error){r.notice("Your card has been added successfully","Card Success","success");var i=e("#footer-credit-cards-count");if(void 0!=i){var d=parseInt(i.val())+1;i.val(d)}var c=e(' <li class="row" data-handbid-card-row="'+t.id+'"> <div class="col-md-3 col-xs-3"> <h4>Name</h4>'+t.nameOnCard+'</div> <div class="col-md-3 col-xs-3"> <h4>Card Number</h4> xxxx xxxx xxxx '+t.lastFour+'</div> <div class="col-md-3 col-xs-3"> <h4>Exp. Date</h4>'+t.expMonth+"/"+t.expYear+'</div> <div class="col-md-3 col-xs-3"> <a class="button pink-solid-button  loading-span-button" data-handbid-delete-credit-card="'+t.id+'"><em>Delete</em></a></div></li>'),l=e(".credit-card .no-results-row").length>0,u=e(".select-payment-card");if(u.show(),u.append("<option data-option-val='"+t.id+"' value='"+t.id+"'>"+t.nameOnCard+" (xxxx xxxx xxxx "+t.lastFour+")</option>"),l){e(".credit-card .no-results-row").remove();var m=null;m=e(e(".credit-card .simple-list").length>0?".credit-card .simple-list":'<ul class="simple-list"></ul>'),m.prependTo(e(".credit-card")),c.appendTo(m)}else c.appendTo(n);if(e("[data-handbid-credit-cards-need]").removeAttr("data-handbid-credit-cards-required"),e('[data-handbid-modal-key="credit-card-form"] .modal-close').click(),o.removeClass("card-error").removeClass("card-success"),o.html(""),handbidLoginMain.requestToAddCCAfter(!0),ticketsPopupWasOpened){var h=r.recalculateTotalTicketsPrice();r.confirmIfUserReallyWantToBuy(r,h),ticketsPopupWasOpened=!1}}else{var p=e.map(t.data.error,function(e,t){return e.join("<br>")});s="<b>"+p.join("<br>")+"</b>",o.removeClass("card-success").addClass("card-error"),o.html(s),r.notice(s,"Card Error","error"),handbidLoginMain.requestToAddCCAfter(!1)}})}i.find(".submit-cc-button").prop("disabled",!1),e(".credit-card-form-modal").removeClass("processing"),d?(o.removeClass("card-success").addClass("card-error"),o.html(s)):c?(o.removeClass("card-error").addClass("card-success"),o.html(l)):(o.removeClass("card-error").removeClass("card-success"),o.html(""))},setupAddCreditCard:function(){var t=e(".creditcard-template");t.live("submit",function(t){if(!addingCCState){addingCCState=!0;var a=e(this);currentCCForm=a,a.find(".submit-cc-button").prop("disabled",!0),e(".credit-card-form-modal").addClass("processing"),Stripe.card.createToken(a,handbidMain.setupAddCreditCardCallback)}return!1})},showCardErrorsIfExists:function(){var t="handbid-cc-error",a=e.cookie(t);void 0!=a&&null!=a&&"null"!=a&&""!=a.trim()&&(handbidMain.notice(a,"Card Error","error"),e.removeCookie(t,{path:"/"}));var i="handbid-cc-success",n=e.cookie(i);void 0!=n&&null!=n&&"null"!=n&&""!=n.trim()&&(handbidMain.notice(n,"Card Success","success"),e.removeCookie(i,{path:"/"}))},setupProvincesSelect:function(){var t=e("#userAddressCountryId"),a=e("#userAddressProvinceId"),i=e(".provincesRow"),n=e("#provincesCountByCountry");t.live("change",function(o){var d=parseInt(t.val()),s=parseInt(n.data("current-country"));if(d!=s){var r=n.data("provinces-"+d);if(void 0!=r){var c=t.data("provinces-nonce"),l={action:"handbid_ajax_get_countries_provinces",nonce:c,countryID:d};e.post(ajaxurl,l,function(t){console.log(t),t=JSON.parse(t),a.find("option").remove().end().val(""),e.each(t,function(t,i){a.append(e("<option>",{value:i.value,text:i.text})),0==t&&a.val(i.value)}),i.slideDown("fast")})}else i.slideUp("fast"),a.find("option").remove().end().append('<option value="">No Provinces</option>').val("");n.data("current-country",d)}})},setupEditProfile:function(){var t=e(".edit-profile");t.on("submit",function(t){t.preventDefault();var a=e(this).serialize();return e.ajax({url:i+"bidder/update",method:"PUT",data:a,success:function(e){return r.notice("Your profile has been updated"),!1}}),!1})},setupAuthorizationStatus:function(){var t=e("#bidder-info-load"),a=t.is(":visible")&&(""!=t.html().trim()||t.hasClass("hidden-page-dashboard")),i=!(!e.cookie("handbid-auth")||!a);i===!0?(e("body").addClass("handbid-logged-in"),e(".quick-links > li").clone().appendTo("#menu-mobile-menu"),e.ajaxSetup({headers:{Authorization:e.cookie("handbid-auth").split(": ")[1]}})):e("body").addClass("handbid-logged-out")},oldNotice:function(t){r.noticeContainer=e('<div class="handbid-growl-container"></div>'),r.noticeContainer.appendTo("body"),r.noticeTemplate='<div class="handbid-growl"><div class="message">Notice Message</div></div>',t.indexOf("&")>-1&&(t=t.split("&")[0]),t=t.split("+").join(" ");var a=e(r.noticeTemplate);e(".message",a).html(t),a.appendTo(r.noticeContainer),setTimeout(function(){a.remove()},5e3)},notice:function(t,a,i,n,o){a=void 0!=a?a:"Notice Message",n=void 0==n||n,i=void 0!=i?i:"info",i="failed"==i?"error":i;var d=void 0!=o&&void 0!=o.isBidding&&o.isBidding;if(d){var s=void 0!=o.itemLink?o.itemLink:"#",r=void 0!=o.itemImage&&"/images/default_photo-75px-white.png"!=o.itemImage?o.itemImage:e("[data-default-item-image]").eq(0).val();t="<div class='col-xs-4 handbid-notice-image-container'><a href='"+s+"'><img src='"+r+"'></a></div><div class='col-xs-8 handbid-notice-text-container'><h5 class='notice-text-title'>"+a+"</h5>"+t+"</div>",a=""}var c={title:a,text:t,type:i,hide:n,mouse_reset:!1,delay:5e3,addclass:"handbid-message-notice",buttons:{sticker:!1}};"Broadcast Message"==a&&(c.icon=" glyphicon glyphicon-envelope ",c.addclass+=" handbid-broadcast-notice"),d&&(c.icon="",c.addclass+=" handbid-bidding-notice");try{return new PNotify(c)}catch(l){return this.oldNotice(t),!1}},detectIfUserWantToBid:function(){var t=e("#bidder-info-load"),a=parseInt(t.data("auction")),i=t.data("auction-status"),n=parseInt(t.data("profile-id")),o=t.data("profile-paddle-number"),d=t.data("paddle-nonce"),s="bidder-"+n+"-just-view-auction-"+a,c=e.cookie(s),l="bidder-"+n+"-bidding-in-auction-"+a,u=e.cookie(l),m="N/A"==o&&void 0==u;if("N/A"!=o&&void 0==u&&e.cookie(l,o,{expires:cookieExpire,path:"/"}),a&&n&&m&&"yes"!=c&&"closed"!=i&&"reconcile"!=i&&"reconciled"!=i){attentionAboutBidding=!0;var h=new PNotify({title:"Register to Bid?",text:"Do you want to bid in this auction or just browse for now?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Bid",addClass:"bid-here-button",click:function(t){t.update({title:"Receiving the Paddle Number for this Auction",text:'<div class="progress progress-striped active" style="margin:0">\t                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">\t\t                                        <span class="sr-only">100%</span>\t                                            </div>                                                </div>',icon:"glyphicon glyphicon-refresh gly-spin",addclass:"handbid-paddle-number-notice",hide:!1,confirm:{confirm:!1},buttons:{closer:!1,sticker:!1},history:{history:!1}});var i={action:"handbid_ajax_get_paddle_number",auctionID:a,nonce:d};e.post(ajaxurl,i,function(i){console.log("-----------------------"),console.log("----Receive Paddle Number success----"),i=JSON.parse(i),console.log(i);var n="",o="",d="",c="";return void 0!=i.paddleId?(e("[data-paddle-for-auction-"+a+"]").html(i.paddleId),
currentPaddleNumber=i.paddleId,e.cookie(l,currentPaddleNumber,{expires:cookieExpire,path:"/"}),n="Your paddle number for this auction is <b>"+i.paddleId+"</b>",o="Done",d="success",c="glyphicon glyphicon-ok",e.removeCookie(s)):(n=i.errors.join("<br>"),o="Failed",d="error",c="glyphicon glyphicon-remove-sign"),attentionAboutBidding=!1,t.update({title:o,text:n,icon:c,hide:!0,type:d,delay:3e3,mouse_reset:!1,confirm:{confirm:!1},buttons:{closer:!0,sticker:!1},history:{history:!1}}),r.addProfileActiveAuctions(),!1})}},{text:"Browse",addClass:"browse-here-button",click:function(t){attentionAboutBidding=!1,e.cookie(s,"yes",{expires:cookieExpire,path:"/"}),t.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});h.get().on("pnotify.cancel",function(){return!1})}},detectIfUserWantToBuyTickets:function(){var t=e("#bidder-info-load"),a=e("[data-handbid-tickets]").length,i=parseInt(t.data("auction")),n=t.data("auction-status"),o=parseInt(t.data("profile-id")),d=e.cookie("bidder-"+o+"-want-no-tickets-"+i);if(i&&o&&a&&"yes"!=d&&"closed"!=n&&"reconcile"!=n&&"reconciled"!=n){attentionAboutTickets=!0;var s=new PNotify({title:"Auction Tickets",text:"Current Auction has tickets. Do you want to purchase one of them?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Yes",addClass:"bid-here-button",click:function(t){attentionAboutTickets=!1,t.remove(),e("[data-handbid-tickets]").eq(0).click()}},{text:"No, thanks",addClass:"browse-here-button",click:function(t){attentionAboutTickets=!1,e.cookie("bidder-"+o+"-want-no-tickets-"+i,"yes",{expires:cookieExpire,path:"/"}),t.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});s.get().on("pnotify.cancel",function(){return!1})}},detectIfUserCanDownloadApps:function(){var a=e("#bidder-info-load"),i=parseInt(a.data("profile-id")),n="bidder-"+i+"-want-no-apps",o=e.cookie(n),d=t.iPhone(),s=t.iPad(),r=t.Android(),c=r?"Android":d?"iPhone":"iPad",l=r?"data-handbid-app-googleplay":d?"data-handbid-app-appstore":"data-handbid-app-appstore-ipad",u=e("["+l+"]").eq(0).val();if((d||s||r)&&"yes"!=o){attentionAboutMobiles=!0;var m=new PNotify({title:"Download Handbid App?",text:c+" detected. Do you want to download our app special for your device?",icon:"glyphicon glyphicon-phone",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Download",addClass:"bid-here-button",click:function(t){attentionAboutMobiles=!1,e.cookie(n,"yes",{expires:cookieExpire,path:"/"}),t.remove(),window.location=u}},{text:"No, thanks",addClass:"browse-here-button",click:function(t){attentionAboutMobiles=!1,e.cookie(n,"yes",{expires:cookieExpire,path:"/"}),t.remove()}}]},stack:!1,before_open:function(e){handbidMain.fadeInModalOverlayAndPositionModal(e)},before_close:function(){handbidMain.fadeOutModalOverlay()},buttons:{closer:!1,sticker:!1},history:{history:!1}});m.get().on("pnotify.cancel",function(){return!1})}},displayRequiredCardsMessage:function(t){var a=e("div.credit-card ul").children("li.row"),i=parseInt(e("#footer-credit-cards-count").val());return!(!a.length&&!i)||(t=void 0!=t?t:"You must supply a credit card to bid in this auction.",void new PNotify({title:"Credit cards required",type:"error",text:"<b>"+t+"</b>",icon:"glyphicon glyphicon-exclamation-sign",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0,buttons:[{text:"Add a card",addClass:"add-credit-card-button",click:function(e){handbidModalsMain.showSingleModal("credit-card-form"),e.remove()}}]},buttons:{closer:!1,sticker:!1},history:{history:!1}}))},lazyShowMoreMessages:function(t){var a=parseInt(t.data("current-chunk"))+1,i=parseInt(t.data("chunks-count")),n=e(".messages-part-"+a);n.slideDown("normal"),e(".load-less-messages").show(),t.data("current-chunk",a),a>=i&&t.hide()},lazyShowLessMessages:function(t){var a=e(".message-row"),i=e(".messages-part-0");a.hide(),i.slideDown("normal");var n=e(".load-more-messages");n.data("current-chunk",0),n.show(),t.hide()},setCircleTimer:function(e){var t=1e3*e,a="#6FD57F",i="#FC5B3F",n=document.getElementById("handbid-circle-timer-"+e);n.innerHTML="",circleTimer=new ProgressBar.Circle(n,{color:a,trailColor:"#fff",trailWidth:10,duration:t,strokeWidth:15,step:function(e,t){t.path.setAttribute("stroke",e.color)}}),circleTimer.animate(1,{from:{color:a},to:{color:i}})},startTimer:function(t){var a=!1;if(!a){var i=!0;e.map(e("[data-handbid-timer]"),function(t){t=e(t);var a=t.html(),i=a.split(":"),n=parseInt(i[0]),o=parseInt(i[1]),d=parseInt(i[2]);if(0==d){if(0==o){if(0==n)return void handbidMain.changeAuctionTimer(0,!1);n--,o=60,n<10&&(n="0"+n)}o--,o<10&&(o="0"+o),d=59}else d--;d<10&&(d="0"+d),o<10&&(o="0"+o),n<10&&(n="0"+n),"000"==n&&(n="00"),"000"==o&&(o="00"),t.html(n+":"+o+":"+d),e(".timer-hours-number").html(n),e(".timer-mins-number").html(o),e(".timer-secs-number").html(d)}),i&&setTimeout(function(){t.startTimer(t)},timerTimeout)}},setTimerRemaining:function(t){var a=e("#timerRemaining");if(void 0!=a.val()){var i=parseInt(a.val());a.data("auction-name");i&&t.changeAuctionTimer(i,!0)}},formatTimerTime:function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),i=e-3600*t-60*a;return i<10&&(i="0"+i),a<10&&(a="0"+a),t<10&&(t="0"+t),"000"==t&&(t="00"),"000"==a&&(a="00"),t+":"+a+":"+i},showTimerRemainingNotice:function(e,t){t=void 0!=t?" <b>"+t+"</b>":"";var a=this.formatTimerTime(e);void 0!=timerNotice?timerNotice.remove():"",timerNotice=void 0,timerNotice=r.notice("Auction "+t+"<br>closes after <b><div data-handbid-timer>"+a+"</div></b>","Closing Auction Timer"),this.changeAuctionTimer(e,!0)},changeAuctionTimer:function(e,t){var a=this.formatTimerTime(e),i='<div class="auction-timer-place"><div class="circle-place col-xs-3"><div class="handbid-circle-timer" id="handbid-circle-timer-'+e+'"></div></div><div class="numbers-place col-xs-9" id="handbid-numbers-timer-'+e+'"><div class="col-xs-4 number-cont"><em class="timer-hours-number">00</em><span>hours</span></div><div class="col-xs-4 number-cont"><em class="timer-mins-number">00</em><span>mins</span></div><div class="col-xs-4 number-cont secs-number-cont"><em class="timer-secs-number">00</em><span>secs</span></div></div></div>',n='<span class="btn btn-small btn-default toggle-timer-notice"><em class="glyphicon glyphicon-chevron-down"></em><em class="glyphicon glyphicon-chevron-up"></em></span>',o='<h3 class="notice-connection-title"><b>Auction Closes After&nbsp;&nbsp;&nbsp;&nbsp;<span data-handbid-timer>'+a+"</span></b></h3>"+n;void 0!=timerMessage&&"out"==timerMessage.animating&&(timerMessage=void 0),t?void 0==timerMessage?(timerMessage=new PNotify({title:o,type:"error",text:i,icon:"",addclass:"handbid-message-notice handbid-timer-top-notice  stack-bar-top",cornerclass:"",width:"100%",stack:s,hide:!1,mouse_reset:!1,buttons:{closer:!1,sticker:!1},history:{history:!1}}),this.setCircleTimer(e)):(timerMessage.update({title:o,text:i}),this.setCircleTimer(e)):void 0!=timerMessage&&timerMessage.update({title:'<h3 class="notice-connection-title"><b>Auction Closed</b></h3>',text:"",hide:!0,delay:5e3,before_close:function(){handbidMain.loadAllToContainers()}})},showExpiredNotice:function(){var t=new PNotify({title:"Session Expired",text:"Your user session has expired. Please, relogin.",icon:"glyphicon glyphicon-off",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,delay:3e3,confirm:!1,stack:!1,before_open:function(t){t.get().css({top:e(window).height()/2-t.get().height()/2-80,left:e(window).width()/2-t.get().width()/2}),reload_overlay?reload_overlay.fadeIn("fast"):reload_overlay=e("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",background:"rgba(0, 0, 0, 0.7)",top:"0",bottom:"0",right:"0",left:"0","z-index":"9999"}}).appendTo("body").fadeIn("fast")},before_close:function(){reload_overlay.fadeOut("fast"),location.reload()},buttons:{closer:!0,sticker:!1},history:{history:!1}});t.get().on("pnotify.cancel",function(){return!1})},reloadBidderProfile:function(){var t=jQuery("#bidder-info-load"),a=parseInt(t.data("auction"));void 0!=t.html()&&""!=t.html().trim()&&(a?e.post(ajaxurl,{action:"handbid_profile_load",auction:t.data("auction"),nonce:t.data("load")},function(a){if(""!=t.html().trim()&&""==a.trim());else{t.html(a);var i=t.data("auction");void 0!=currentPaddleNumber&&""!=i.trim()&&(t.data("profile-paddle-number",currentPaddleNumber),e("[data-paddle-for-auction-"+i+"]").html(currentPaddleNumber)),t.slideDown("normal"),r.setupAddCreditCard(),r.setupProvincesSelect(),r.loadAllToContainers()}}):(r.setupAddCreditCard(),r.setupProvincesSelect(),r.loadAllToContainers())),r.applyBidConfirmationChecking(),e(".creditcard-template").length>0?r.setupAddCreditCard():""},applyBidConfirmationChecking:function(t){e("#bidConfirmationsEnabled").live("change",function(t){var a=e(this).val(),i=parseInt(e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id")),n=i+"_bid_confirmations";e.cookie(n,a,{expires:cookieExpire,path:"/"})})},checkIfWantToShowBidConfirmation:function(){var t=parseInt(e("[data-dashboard-profile-id]").eq(0).data("dashboard-profile-id")),a=t+"_bid_confirmations",i=e.cookie(a),n=void 0==i||"yes"==i;return n=0!=t&&void 0!=t&&n},redirectFromResetedAuctions:function(e){window.location="/auctions/?auction-reset"},redirectFromResetedAuctionsCheck:function(){e("[data-auction-reset-sign]").length>0&&this.notice("<b>This auction has been reset, please select another one</b>","Auction Reset","info")},checkSocketConnection:function(e){o+=o,!connectedToSocket&&o<=d?void 0==connectMessage&&(connectMessage=new PNotify({title:'<h3 class="notice-connection-title"><b>Unable to connect for real-time updates</b><span class="notice-connection-switch">?</span></h3>',type:"error",text:'<div class="notice-connection-tip">Handbid uses a live connection to the server to update auction items, bids and stats. When it can\'t connect to this live connection, this message will appear. You can still bid on items, but you may need to refresh your browser page to see if any prices have changed. Please click on the chat/help tab below to let us know this message exists. It is likely that your Internet service provider is blocking our connection, but we will look into it! Happy Bidding!</div>',icon:"",addclass:"handbid-message-notice handbid-no-connection-notice notice-collapsed stack-bar-top",cornerclass:"",width:"100%",stack:s,hide:!1,mouse_reset:!1,buttons:{closer:!1,sticker:!1},history:{history:!1}})):void 0!=connectMessage&&(connectMessage.remove(),connectMessage=void 0),setTimeout(function(){e.checkSocketConnection(e,o)},3e3)}};e(document).ready(function(){handbidMain=r,i=e("#apiEndpointsAddress").val(),r.setupAuthorizationStatus(),r.makePaymentForReceipt(),r.detectIfUserWantToBuyTickets(),r.detectIfUserWantToBid(),r.messageToAuctionManager(),r.redirectFromResetedAuctionsCheck(),setTimeout(function(){r.checkSocketConnection(r)},1e4),e("[data-handbid-item-key], [data-no-bids], [data-tags]").length>0&&e("body").addClass("enable-handbid-fatal-error");var t=window.location.href;t.indexOf("handbid-notice")>-1&&r.notice(window.location.href.split("handbid-notice=")[1]),e(".bidder-info-container").length>0?r.setupBidderDashboard():"",r.setupDeleteCreditCard(),e("[data-handbid-connect]").length>0?r.setupConnect():"",r.setupTutorialPopup(),e("[data-handbid-bid]").length>0||e(".handbid-list-of-bids-proxy").length>0?r.setupBidding(r):"",e("[data-handbid-timer]").length>0&&(timerElements=e("[data-handbid-timer]"),r.startTimer(r)),e("[data-handbid-tickets]").length>0?r.setupTicketsPurchasing(r):"",r.setTimerRemaining(r),r.reloadBidderProfile(),r.showCardErrorsIfExists(),e(".handbid-logout a, a.handbid-logout-link").live("click",function(t){t.preventDefault();var a=e(this).attr("href"),i=new PNotify({title:"Logout Confirmation",text:"Are you sure want to logout?",icon:"glyphicon glyphicon-question-sign",type:"info",addclass:"handbid-message-notice",hide:!1,mouse_reset:!1,confirm:{confirm:!0},buttons:{closer:!1,sticker:!1},history:{history:!1}});i.get().on("pnotify.confirm",function(){window.location=a}).on("pnotify.cancel",function(){return!1})}),e(".notice-connection-switch").live("click",function(t){t.preventDefault(),e(".notice-connection-tip").slideToggle("normal"),e(".handbid-no-connection-notice").toggleClass("notice-collapsed")}),e(".toggle-timer-notice").live("click",function(t){t.preventDefault(),e(".handbid-timer-top-notice").toggleClass("notice-collapsed")}),e("[data-toggle-invoice-link]").live("click",function(t){t.preventDefault();var a=e(this).data("toggle-invoice-link");e(this).toggleClass("opened-invoice"),e("[data-receipt-block-id="+a+"] .invoice-details-container").slideToggle("normal")}),e("[data-toggle-invoice-more-link]").live("click",function(t){t.preventDefault();var a=e(this).data("toggle-invoice-more-link");e(this).toggleClass("opened-invoice"),e("[data-receipt-block-id="+a+"] .invoice-more-details-container").slideToggle("normal")}),e(".load-more-messages").live("click",function(t){t.preventDefault();var a=e(this);r.lazyShowMoreMessages(a)}),e(".load-less-messages").live("click",function(t){t.preventDefault();var a=e(this);r.lazyShowLessMessages(a)}),e(".global-footer").prepend("<span class='toggle-info'>Show Footer Info</span>"),e(".global-footer span.toggle-info").live("click",function(t){t.preventDefault(),e(".global-footer").toggleClass("show-all")}),e('[data-slider-nav-id="auction-details"]').live("click",function(e){r.clickOnFiltersToReorder()}),e(".map-holder-item").live("click",function(e){mapsAreActivated||auctionGoogleMapsInit()})})}(jQuery);var timerForSearch,timerToLoad,isotopeWasFiltered=!1,wasNotVisible=!0,needToMoveToItem=!1,checkIS;!function(e){function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function a(){return h||(h=e(".item-list").isotope({itemSelector:".simple-box",layoutMode:"masonry",getSortData:f,sortAscending:u,sortBy:m,masonry:{columnWidth:".sizer"}})),!0}function i(){var t=e("[data-handbid-item-box]:visible").length;0==t?e(".message-no-isotope-results").fadeIn("slow"):e(".message-no-isotope-results").fadeOut("fast"),o()}function n(){void 0!=timerForSearch&&(timerForSearch=void 0),timerForSearch=setTimeout(i,1e3)}function o(){void 0!=timerToLoad&&(timerToLoad=void 0),isotopeWasFiltered=!0,timerToLoad=setTimeout(d,2e3)}function d(){s(),isotopeWasFiltered&&e(".simple-item-box .full-image-wrapper.without-image").each(function(){var t=e(this).visible("complete");if(t){var a=e(this).data("backgroung-image-url");""!=a.trim&&e(this).attr("style","background-image: url('"+a+"');"),e(this).removeClass("without-image")}})}function s(){if(wasNotVisible){var t=e('.container[data-slider-nav-key="items"]'),a=t.is(":visible");if(a){var i=handbidMain.getCategoryForInitialFilter();if(void 0!=i&&"all"!=i){var n=e('.by-category li[data-legacy-category-id="'+i+'"]'),o=e(".by-category li[data-selector]");if(n.length){o.removeClass("selected"),n.addClass("selected");var d=n.attr("data-selector"),s="category";"*"===d?delete p[s]:p[s]=d}}c(),wasNotVisible=!1,setTimeout(function(){handbidMain.goBackToItem(),needToMoveToItem=!1},500)}}}function r(){var a,i=[];return e.each(p,function(e,t){i.push(t)}),a=i.join(""),h&&(h.isotope({sortAscending:u,sortBy:m,filter:function(){if(v){var i=new RegExp(t(v),"i"),n=e(this).html();if(i&&n&&!i.test(n))return!1}return!a||matchesSelector(this,a)}}),n()),!0}function c(){h?r():a()&&r()}e(document).ready(function(){e(".sticky").each(function(t,a){var i,n=e("> *",a)[0],o=!1,d=0,s=e(window).scrollTop(),r=e(a).attr("data-sticky-margin-top");r=r?parseInt(r):0,r=e("body").hasClass("handbid-logged-in")?r+94:r,e(window).scroll(function(){var t,c=e(window).scrollTop(),l=e(a).position().top-r,u=e(".global-footer").position().top-3,m=e(n).is(":visible"),h=c-s;if(!m||document.body.clientWidth<=992||e('.slider-nav[data-slider-nav-id="bidder-dashboard"]').has(".active-slide").length)return e(n).css({position:"",top:"",marginTop:"",width:"",height:"",zIndex:"",backgroundColor:""}),d=0,e(n).removeClass("sticking"),e(a).css({height:""}),void(o=!1);if(i=e(n).height()+parseInt(e(n).css("padding-top"))+parseInt(e(n).css("padding-bottom")),c>=l&&!o?(o=!0,e(a).height(i),e(n).css({position:"fixed",top:r+"px",transition:"none",width:e(n).width()+"px"}),e(n).addClass("sticking")):o&&c<l&&(e(n).css({position:"",top:"",marginTop:"",width:"",height:"",zIndex:"",backgroundColor:""}),d=0,e(n).removeClass("sticking"),e(a).css({height:""}),o=!1),o){var p=e(window).height();i+=r,(0!==d||i>p)&&(d+i>p&&h>0?d-=h:h<0&&d<0&&(d-=h),d>0?d=0:d<p-i&&(d=p-i)),t=c+d+i,t>u&&(d-=t-u),e(n).css({marginTop:d+"px"})}s=c})})});var l,u,m,h,p={},v=!1,b=500,f={name:function(t){return e("h3 .nameLowerCase",t).html()},price:function(t){return parseInt(e(".currentItemPrice",t).html().replace("$",""))},bids:function(t){return parseInt(e(".bids em",t).html())}};window._sortNameAsc=function(){u=!0,m="name"},window._sortNameDesc=function(){u=!1,m="name"},window._sortPriceAsc=function(){u=!0,m="price"},window._sortPriceDesc=function(){u=!1,m="price"},window._sortBidsAsc=function(){u=!0,m="bids"},window._sortBidsDesc=function(){u=!1,m="bids"},window._sortNameAsc(),e(document).ready(function(){var t=!0;if(e('.slider-nav [data-slider-nav-key="items"]').on("click",function(){var t=e(".sticky-for-sort-bar").offset().top;e(window).scrollTop()>t&&e("html, body").animate({scrollTop:t},500)}),e(window).scroll(d),e(".fancy-search .query").on("keydown",function(a){var i=a.charCode||a.keyCode;if(13!=i||!e(this).hasClass("categories-query")){l&&clearTimeout(l);var n=function(){v=e(this).val(),t=!1,e('.filters .section [data-selector="*"] a').click(),t=!0,c()}.bind(this);if(13===i)return n(),!1;l=setTimeout(n,b)}}),e(".fancy-search .query").on("keyup",function(){var t=e(this).val();t&&0!==t.length?e(".fancy-search .reset").show():e(".fancy-search .reset").hide()}),e(".fancy-search .reset").on("click",function(t){t.preventDefault(),e(".fancy-search .query").val(""),v=!1,e(this).hide(),c()}),e('select[name="sort"], select[name="mobile-sort"]').on("change",function(){var t=e(this).val();window[t]?(window[t](),c()):console.log("not found",t)}),e(".filters .section").each(function(a,i){var n=e(i).attr("data-section");e("[data-selector] a",i).on("click",function(a){a.preventDefault(),e("[data-selector]",i).removeClass("selected"),e(this).parent().addClass("selected");var o=e(this).parent().attr("data-selector");"*"===o?delete p[n]:p[n]=o,t&&(e(".fancy-search .query").val(""),v=!1,c())})}),e('select[name="mobile-type"], select[name="mobile-category"]').on("change",function(){var a=e(this).val(),i=e(this).attr("name").split("-")[1];"*"===a?delete p[i]:p[i]=a,t&&(e(".fancy-search .query").val(""),v=!1,c())}),setTimeout(function(){var t=e("ul.by-category li.selected a")[0];void 0!=t&&t.click()},3500),e('[data-slider-nav-key="items"]').on("click",function(e){e.preventDefault(),c()}),window.location.hash){var a=e('[data-slider-nav-key="items"]').offset();void 0!=a&&(needToMoveToItem=!0,setTimeout(function(){e("html, body").animate({scrollTop:a.top+50},50),setTimeout(function(){s()},100)},500))}e(window).scroll(function(){s()})}),e(window).load(function(){a(),c()})}(jQuery),function(e){e(document).ready(function(){e("[data-tooltip-wrapper]").on("hover",function(){e(this).addClass("simple-tooltip-showing")}),e("[data-tooltip-wrapper]").on("click",function(){var t=e(this).attr("data-tooltip-delay"),a=e(this);e(this).attr("tooltip-clicked",!0),void 0==t&&(t=3e3),e(this).addClass("simple-tooltip-showing"),setTimeout(function(){a.removeClass("simple-tooltip-showing"),a.removeAttr("tooltip-clicked")},t)}),e("[data-tooltip-wrapper]").on("mouseleave",function(){void 0==e(this).attr("tooltip-clicked")&&e(this).removeClass("simple-tooltip-showing")})})}(jQuery);var handbidLoginMain,cookieExpire=7;!function(e){var t={displaySpecifiedTabOfLoginPopup:function(t){var a=e(".active-container").eq(0),i=e("[data-tab-name="+t+"]");0!=i.length&&(e(".errorsRow").hide(),a.removeClass("active-container").slideUp("fast"),i.addClass("active-container").slideDown("fast"))},registerFieldsValidation:function(a){var i,n,o,d,s=!0,r=e("[data-tab-name="+a+"] .errorsRow").eq(0),c=e("[data-tab-name="+a+"] .errorsContainer").eq(0);return c.html(""),e("[data-tab-name="+a+"] input[required]").each(function(){i=e(this),n=i.attr("type"),""==i.val().trim()||"checkbox"==n&&!i.is(":checked")?(c.append(i.data("required-message")+"<br>"),i.addClass("validation-error"),s=!1):i.removeClass("validation-error")}),e("[data-tab-name="+a+"] input.is-email").each(function(){i=e(this),""==i.val().trim()||t.validEmail(i.val())?i.removeClass("validation-email-error"):(i.addClass("validation-email-error"),c.append(i.data("not-email-message")+"<br>"),s=!1)}),"register-form"==a&&(o=e("#reg-password"),d=e("#reg-password-confirm"),o.val()!=d.val()?(c.append(d.data("mismatch-message")+"<br>"),o.addClass("validation-mismatch-error"),d.addClass("validation-mismatch-error"),s=!1):(o.removeClass("validation-mismatch-error"),d.removeClass("validation-mismatch-error"))),s?r.slideUp("normal"):r.slideDown("normal"),s},restoreInitialTabState:function(){this.displaySpecifiedTabOfLoginPopup("login-form"),e(".cleanable-input").val(""),e(".to-hide-block").hide(),e(".validation-error").removeClass("validation-error")},changeToTutorialTabState:function(){this.displaySpecifiedTabOfLoginPopup("tutorial-info-1"),e(".cleanable-input").val(""),e(".to-hide-block").hide()},copyToConfirmField:function(t){var a=t.data("copy-to");e("#"+a).val(t.val())},getPhoneNumber:function(e){return e.replace(/\D+/g,"")},validEmail:function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},formatRepo:function(e){return e.name+" ("+e.totalItems+" items, by "+e.organization+")"},formatRepoSelection:function(t){return void 0!=t.auctionGuid&&(e(t.inputIt).val(t.auctionGuid),e("#confirm-add-to-auction-slug").val(t.key),e("#confirm-add-to-auction-name").val(t.name)),"----"!=t.text&&(e(".loadAuctionsToAutoCompleteRegisterTextContainer").show(),e(".loadAuctionsToAutoCompleteRegisterText").html(t.name),e(".loadAuctionsToAutoCompleteRegisterSelectContainer").hide(),e(".loadAuctionsToAutoCompleteConfirmTextContainer").show(),e(".loadAuctionsToAutoCompleteConfirmText").html(t.name),e(".loadAuctionsToAutoCompleteConfirmSelectContainer").hide()),t.name},loadAuctionsToAutoComplete:function(e){var a=e.data("auto-complete-nonce"),i=e.data("auto-complete-select"),n=e.data("auto-complete-input");e.select2({ajax:{url:ajaxurl,action:"handbid_load_auto_complete_auctions",delay:250,data:function(e){return{q:e.term,page:e.page,nonce:a,selectIt:i,inputIt:n,action:"handbid_load_auto_complete_auctions"}},processResults:function(e,t){var a;try{e=JSON.parse(e),a=e.items}catch(i){a=[]}return{results:a}},escapeMarkup:function(e){return e},cache:!0},minimumInputLength:1,templateResult:t.formatRepo,templateSelection:t.formatRepoSelection})},loadAuctionsByShortCode:function(a){var i=e("#inviteShortCodeInput").val(),n=a.data("check-invite-nonce"),o=e(".invite-code-tab .errorsRow"),d=e(".autoCompleteHiddenRegister, .autoCompleteHiddenConfirm"),s=e(".loadAuctionsToAutoCompleteRegisterText, .loadAuctionsToAutoCompleteConfirmText"),r=e(".loadAuctionsToAutoCompleteRegisterTextContainer, .loadAuctionsToAutoCompleteConfirmTextContainer"),c=e(".loadAuctionsToAutoCompleteRegisterSelectContainer, .loadAuctionsToAutoCompleteConfirmSelectContainer");a.addClass("active"),e.post(ajaxurl,{action:"handbid_load_shortcode_auctions",inviteCode:i,nonce:n},function(e){if(console.log(e),e=JSON.parse(e),a.removeClass("active"),void 0!=e.items&&e.items.length>0){o.slideUp("normal");var i=e.items[0];d.val(i.auctionGuid),s.html(i.name),r.show(),c.hide(),t.displaySpecifiedTabOfLoginPopup("register-form")}else o.slideDown("normal")})},tryToLogin:function(a){var i=e("#hb-login-form-action").val(),n=e("#hb-login-form-username").val(),o=e("#hb-login-form-password").val(),d=e("#login-add-to-auction").val(),s=e("#hb-login-form-nonce").val(),r=e("#hb-login-form-redirect").val(),c=e(".isCurrentlyLoggingIn"),l=e("[data-handbid-modal-key='login-modal'] .errorsRow");t.validEmail(n)||(n=t.getPhoneNumber(n)),a.addClass("active"),c.slideDown(),l.slideUp("normal"),e.post(ajaxurl,{action:i,username:n,password:o,auctionGuid:d,nonce:s},function(e){console.log(e),e=JSON.parse(e),a.removeClass("active"),e.success?(c.children("h3").html("Successfully Logged In. Redirecting"),l.slideUp("normal"),window.location=r):(c.slideUp(),l.slideDown("normal"))})},tryToRegister:function(a){var i=e("#hb-reg-form-action").val(),n=e("#confirm-firstname").val(),o=e("#confirm-lastname").val(),d=e("#confirm-password").val(),s=e("#confirm-email").val(),r=e("#confirm-phone-code").val(),c=t.getPhoneNumber(e("#confirm-phone-number").val()),l=e("#confirm-phone-type").val(),u=e("#confirm-add-to-auction-id").val(),m=e("#confirm-add-to-auction").val(),h=e("#confirm-add-to-auction-slug").val(),p=e("#confirm-add-to-auction-name").val(),v=e("#hb-reg-form-nonce").val(),b=e("[data-tab-name='register-form-confirm'] .errorsRow").eq(0),f=e("[data-tab-name='register-form-confirm'] .errorsContainer").eq(0);a.addClass("active"),e.post(ajaxurl,{action:i,firstname:n,lastname:o,password:d,email:s,countryCode:r,mobile:c,deviceType:l,auctionGuid:m,auctionSlug:h,auctionName:p,nonce:v},function(i){if(console.log(i),i=JSON.parse(i),console.log(i),a.removeClass("active"),i.success){b.hide(),f.html("");var n=e("#reg-complete-name"),o=e("#reg-complete-auction"),d=e("#reg-paddle-number"),s=e("#reg-complete-have-paddle-number"),r=e("[data-handbid-modal-key='login-modal'] .modal-close").eq(0),c=e("#start-bidding-button");n.html(i.values.firstname+" "+i.values.lastname),void 0!=h&&""!=h.trim()||void 0==currentAuctionKey||(h=currentAuctionKey);var l="/auctions/"+h;if(i.profile.data.currentPaddleNumber){var m=i.profile.data.currentPaddleNumber,v=i.profile.data.identity,g="bidder-"+v+"-bidding-in-auction-"+u;c.attr("href",l),r.attr("data-reload-href",l),o.html(p),d.html(m),s.show(),e.cookie(g,m,{expires:cookieExpire,path:"/"})}else c.attr("href",l),r.attr("data-reload-href",l),s.hide();var y=e("#reg-complete-add-card"),k=y.hasClass("add-new-cc-to-register");t.requestToAddCCAfter(!k),t.displaySpecifiedTabOfLoginPopup("register-complete")}else b.show(),f.html(i.error)})},resendPasswordLink:function(a){var i=e("#emailOrPhoneToResetPass").val();t.validEmail(i)||(i=t.getPhoneNumber(i));var n=a.data("change-pass-nonce"),o=e("[data-tab-name='forgot-pass'] .errorsRow");a.addClass("active"),e.post(ajaxurl,{action:"handbid_ajax_reset_password",emailOrPhone:i,nonce:n},function(e){console.log(e),e=JSON.parse(e),console.log(e),a.removeClass("active"),e.success?(o.slideUp("normal"),t.displaySpecifiedTabOfLoginPopup("forgot-pass-sent")):o.slideDown("normal")})},requestToAddCC:function(){handbidModalsMain.showSingleModal("credit-card-form")},requestToAddCCAfter:function(t){var a=e("#reg-complete-start-bidding"),i=e("#reg-complete-add-card");t?i.hide():i.show(),t?a.show():a.hide()}};e(document).ready(function(){e(".has-popover").popover(),e(".login-popup-link").live("click",function(a){if(a.preventDefault(),!e(this).hasClass("register-next")&&!e(this).hasClass("register-confirm")){var i=e(this).data("target-tab");t.displaySpecifiedTabOfLoginPopup(i)}}),e(".tutorialTabs").click(function(t){t.preventDefault(),e(this).tab("show"),e(".tutorialTabsContainer").removeClass("active"),e(this).parent().addClass("active")}),e("#hb-login-form-submit").click(function(a){a.preventDefault(),e(this).hasClass("active")||t.tryToLogin(e(this))}),e('[data-handbid-modal-key="login-modal"] .modal-close').on("click",function(){t.restoreInitialTabState();var a=e(this).data("reload-href");void 0!=a&&(window.location=a)}),e(".copyable-field").on("focusout",function(){t.copyToConfirmField(e(this))}),e(".login-popup-link.register-next").on("click",function(a){if(a.preventDefault(),t.registerFieldsValidation("register-form")){var i=e(this).data("target-tab");t.displaySpecifiedTabOfLoginPopup(i)}}),e(".login-popup-link.register-confirm").on("click",function(a){if(a.preventDefault(),t.registerFieldsValidation("register-form-confirm")){t.tryToRegister(e(this));e(this).data("target-tab")}}),e(".loadAuctionsToAutoComplete").each(function(a){t.loadAuctionsToAutoComplete(e(this))}),e(".inviteShortCodeButton").live("click",function(a){a.preventDefault(),t.loadAuctionsByShortCode(e(this))}),e(".reset-password-link").on("click",function(a){t.resendPasswordLink(e(this))}),e("#start-enter-card-button").on("click",function(a){t.requestToAddCC(e(this))}),e(".exit-tutorial-link").on("click",function(t){e("[data-handbid-modal-key='login-modal'] .modal-close").click()}),e(".change-auto-complete-auction").on("click",function(t){t.preventDefault(),e(".loadAuctionsToAutoCompleteConfirmTextContainer").hide(),e(".loadAuctionsToAutoCompleteConfirmText").html(""),e(".loadAuctionsToAutoCompleteConfirmSelectContainer").show(),e(".autoCompleteHiddenConfirm").val(""),e(".loadAuctionsToAutoCompleteRegisterTextContainer").hide(),e(".loadAuctionsToAutoCompleteRegisterText").html(""),e(".loadAuctionsToAutoCompleteRegisterSelectContainer").show(),e(".autoCompleteHiddenRegister").val("")}),handbidLoginMain=t})}(jQuery),function(e){e(document).ready(function(){var t=e(".mobile-menu");t.find("a[data-slider-nav-key]").on("click",function(){var t=e('.slider-nav[data-slider-nav-id="bidder-dashboard"] .slider-nav-mobile a[data-slider-nav-key="profile-user-info"]'),a=e(this).attr("data-slider-nav-key");e('.slider-nav[data-slider-nav-id="bidder-dashboard"]').has(".active-slide").length||t[0].click(),e('.slider-nav[data-slider-nav-id="bidder-dashboard-inner"] [data-slider-nav-key="'+a+'"]')[0].click(),e("html,body").animate({scrollTop:t.offset().top},"normal")})})}(jQuery);var handbidModalsMain;!function(e){var t={showSingleModal:function(t){var a=e('.handbid-modal[data-handbid-modal-key="'+t+'"]');e("body").append(a),a.modal("show"),e(".credit-card-form-modal").on("hidden.bs.modal",function(){e(this).find(".credit-card-status").eq(0).html("").removeClass("card-success").removeClass("card-error"),e(this).find("input[type=text]").val("")}),e(".tickets-modal").on("hidden.bs.modal",function(){var t=e('[data-handbid-tickets-button="purchase"]');t.is(":visible")||(ticketsPopupWasOpened=!1)})}};e(document).ready(function(){e(".handbid-modal-link").live("click",function(a){if(a.preventDefault(),handbidMain.noticeIfNoCreditCard(e(this)))return!1;var i=e(this).attr("data-handbid-modal-key");t.showSingleModal(i)}),handbidModalsMain=t})}(jQuery);